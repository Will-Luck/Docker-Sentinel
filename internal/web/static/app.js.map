{
  "version": 3,
  "sources": ["src/js/csrf.js", "src/js/utils.js", "src/js/dashboard.js", "src/js/queue.js", "src/js/swarm.js", "src/js/sse.js", "src/js/settings-core.js", "src/js/settings-cluster.js", "src/js/notifications.js", "src/js/registries.js", "src/js/about.js", "src/js/images.js", "src/js/logs.js", "src/js/main.js"],
  "sourcesContent": ["/* ============================================================\n   0. CSRF Protection \u2014 auto-inject X-CSRF-Token on mutating requests\n   ============================================================ */\n\nvar originalFetch = window.fetch;\n\nfunction getCSRFToken() {\n    var match = document.cookie.match(/(^|;\\s*)sentinel_csrf=([^;]+)/);\n    return match ? match[2] : \"\";\n}\n\nwindow.fetch = function (url, opts) {\n    opts = opts || {};\n    var method = (opts.method || \"GET\").toUpperCase();\n    // Only inject CSRF on state-changing methods for same-origin requests.\n    if (method !== \"GET\" && method !== \"HEAD\" && method !== \"OPTIONS\") {\n        var token = getCSRFToken();\n        if (token) {\n            opts.headers = opts.headers || {};\n            // Support both Headers object and plain object.\n            if (typeof opts.headers.set === \"function\") {\n                opts.headers.set(\"X-CSRF-Token\", token);\n            } else {\n                opts.headers[\"X-CSRF-Token\"] = token;\n            }\n        }\n    }\n    return originalFetch.call(window, url, opts).then(function (resp) {\n        // Auto-redirect to login on 401 (session expired).\n        if (resp.status === 401 && url.indexOf(\"/api/auth/me\") === -1) {\n            window.location.href = \"/login\";\n        }\n        return resp;\n    });\n};\n\nexport { getCSRFToken };\n", "/* ============================================================\n   3. Toast System (with batching for scan bursts)\n   4. HTML Escape Helper\n   4a. Styled Confirmation Modal\n   5. apiPost helper\n   ============================================================ */\n\n/* ------------------------------------------------------------\n   3. Toast System\n   ------------------------------------------------------------ */\n\nvar _toastBatch = [];\nvar _toastBatchTimer = null;\nvar _toastBatchWindow = 1500; // ms to collect events before showing summary\n\nfunction showToast(message, type) {\n    _showToastImmediate(message, type);\n}\n\nfunction _showToastImmediate(message, type) {\n    var container = document.getElementById(\"toast-container\");\n    if (!container) {\n        container = document.createElement(\"div\");\n        container.id = \"toast-container\";\n        container.className = \"toast-container\";\n        document.body.appendChild(container);\n    }\n\n    var toast = document.createElement(\"div\");\n    toast.className = \"toast toast-\" + type;\n    toast.textContent = message;\n    container.appendChild(toast);\n\n    setTimeout(function () {\n        toast.style.animation = \"fadeOut 0.3s ease-out forwards\";\n        setTimeout(function () {\n            if (toast.parentNode) toast.parentNode.removeChild(toast);\n        }, 300);\n    }, 4000);\n}\n\n// Queue a toast for batching. If multiple arrive within the batch window,\n// they are collapsed into a single summary toast.\nfunction queueBatchToast(message, type) {\n    _toastBatch.push({message: message, type: type});\n    if (_toastBatchTimer) clearTimeout(_toastBatchTimer);\n    _toastBatchTimer = setTimeout(function () {\n        _flushBatchToasts();\n    }, _toastBatchWindow);\n}\n\nfunction _flushBatchToasts() {\n    var batch = _toastBatch;\n    _toastBatch = [];\n    _toastBatchTimer = null;\n    if (batch.length === 0) return;\n    if (batch.length === 1) {\n        _showToastImmediate(batch[0].message, batch[0].type);\n        return;\n    }\n    // Summarise: count updates and queue additions separately.\n    var updates = 0;\n    var queued = 0;\n    for (var i = 0; i < batch.length; i++) {\n        var msg = batch[i].message.toLowerCase();\n        if (msg.indexOf(\"update\") !== -1 || msg.indexOf(\"available\") !== -1) updates++;\n        else if (msg.indexOf(\"queue\") !== -1 || msg.indexOf(\"added\") !== -1) queued++;\n        else updates++; // fallback\n    }\n    var parts = [];\n    if (updates > 0) parts.push(updates + \" update\" + (updates === 1 ? \"\" : \"s\") + \" detected\");\n    if (queued > 0) parts.push(queued + \" queued for approval\");\n    _showToastImmediate(parts.join(\", \"), \"info\");\n}\n\n/* ------------------------------------------------------------\n   4. HTML Escape Helper\n   ------------------------------------------------------------ */\n\nfunction escapeHTML(str) {\n    var div = document.createElement(\"div\");\n    div.appendChild(document.createTextNode(str));\n    return div.innerHTML;\n}\n\n/* ------------------------------------------------------------\n   4a. Styled Confirmation Modal\n   ------------------------------------------------------------ */\n\nfunction showConfirm(title, bodyHTML) {\n    // bodyHTML is always application-generated markup (never user input),\n    // constructed from escapeHTML-sanitised values in calling code.\n    return new Promise(function(resolve) {\n        var triggerEl = document.activeElement;\n\n        var overlay = document.createElement(\"div\");\n        overlay.className = \"confirm-overlay\";\n\n        var modal = document.createElement(\"div\");\n        modal.className = \"confirm-modal\";\n        modal.setAttribute(\"role\", \"dialog\");\n        modal.setAttribute(\"aria-modal\", \"true\");\n\n        var titleId = \"confirm-title-\" + Date.now();\n        modal.setAttribute(\"aria-labelledby\", titleId);\n\n        var titleEl = document.createElement(\"div\");\n        titleEl.className = \"confirm-title\";\n        titleEl.id = titleId;\n        titleEl.textContent = title;\n        modal.appendChild(titleEl);\n\n        var body = document.createElement(\"div\");\n        body.className = \"confirm-body\";\n        // Safe: bodyHTML is built from escapeHTML-sanitised values, not raw user input.\n        body.innerHTML = bodyHTML; // eslint-disable-line no-unsanitized/property\n        modal.appendChild(body);\n\n        var buttons = document.createElement(\"div\");\n        buttons.className = \"confirm-buttons\";\n\n        var cancelBtn = document.createElement(\"button\");\n        cancelBtn.className = \"confirm-btn-cancel\";\n        cancelBtn.textContent = \"Cancel\";\n        cancelBtn.type = \"button\";\n        buttons.appendChild(cancelBtn);\n\n        var applyBtn = document.createElement(\"button\");\n        applyBtn.className = \"confirm-btn-apply\";\n        applyBtn.textContent = \"Apply\";\n        applyBtn.type = \"button\";\n        buttons.appendChild(applyBtn);\n\n        modal.appendChild(buttons);\n        overlay.appendChild(modal);\n        document.body.appendChild(overlay);\n\n        cancelBtn.focus();\n\n        function cleanup(result) {\n            document.body.removeChild(overlay);\n            if (triggerEl && triggerEl.focus) triggerEl.focus();\n            resolve(result);\n        }\n\n        cancelBtn.addEventListener(\"click\", function() { cleanup(false); });\n        applyBtn.addEventListener(\"click\", function() { cleanup(true); });\n\n        overlay.addEventListener(\"click\", function(e) {\n            if (e.target === overlay) cleanup(false);\n        });\n\n        // Focus trap and Escape\n        modal.addEventListener(\"keydown\", function(e) {\n            if (e.key === \"Escape\") {\n                e.stopPropagation();\n                cleanup(false);\n                return;\n            }\n            if (e.key === \"Tab\") {\n                var focusables = [cancelBtn, applyBtn];\n                var idx = focusables.indexOf(document.activeElement);\n                if (e.shiftKey) {\n                    if (idx <= 0) { e.preventDefault(); focusables[focusables.length - 1].focus(); }\n                } else {\n                    if (idx >= focusables.length - 1) { e.preventDefault(); focusables[0].focus(); }\n                }\n            }\n        });\n    });\n}\n\n/* ------------------------------------------------------------\n   5. apiPost helper (shared fetch wrapper)\n   ------------------------------------------------------------ */\n\nfunction apiPost(url, body, successMsg, errorMsg, triggerEl, onSuccess) {\n    var opts = { method: \"POST\" };\n    if (body) {\n        opts.headers = { \"Content-Type\": \"application/json\" };\n        opts.body = JSON.stringify(body);\n    }\n    if (triggerEl) {\n        triggerEl.classList.add(\"loading\");\n        triggerEl.disabled = true;\n    }\n    function clearLoading() {\n        if (triggerEl) {\n            triggerEl.classList.remove(\"loading\");\n            triggerEl.disabled = false;\n        }\n    }\n    fetch(url, opts)\n        .then(function (resp) {\n            return resp.json().then(function (data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function (result) {\n            if (result.ok) {\n                showToast(result.data.message || successMsg, \"success\");\n                if (onSuccess) onSuccess(result.data);\n            } else {\n                showToast(result.data.error || errorMsg, \"error\");\n            }\n            clearLoading();\n        })\n        .catch(function () {\n            clearLoading();\n            showToast(\"Network error \\u2014 \" + errorMsg.toLowerCase(), \"error\");\n        });\n}\n\nexport {\n    showToast,\n    queueBatchToast,\n    escapeHTML,\n    showConfirm,\n    apiPost\n};\n", "/* ============================================================\n   Dashboard module \u2014 theme, accordions, pause banner, last scan,\n   row click, stack toggle, multi-select, filter/sort, tabs,\n   manage mode, drag reorder\n   ============================================================ */\n\nimport { showToast, escapeHTML } from \"./utils.js\";\n\n/* ------------------------------------------------------------\n   1. Theme System\n   ------------------------------------------------------------ */\n\nfunction initTheme() {\n    var saved = localStorage.getItem(\"sentinel-theme\") || \"auto\";\n    applyTheme(saved);\n}\n\nfunction applyTheme(theme) {\n    var root = document.documentElement;\n\n    if (theme === \"dark\") {\n        root.style.colorScheme = \"dark\";\n    } else if (theme === \"light\") {\n        root.style.colorScheme = \"light\";\n    } else {\n        root.style.colorScheme = \"dark light\";\n    }\n\n    localStorage.setItem(\"sentinel-theme\", theme);\n}\n\n/* ------------------------------------------------------------\n   1b. Accordion Persistence\n   ------------------------------------------------------------ */\n\nfunction getAccordionKey(details) {\n    var h2 = details.querySelector(\"h2\");\n    if (!h2) return null;\n    var page = document.body.dataset.page || window.location.pathname;\n    return \"sentinel-acc::\" + page + \"::\" + h2.textContent.trim();\n}\n\nfunction saveAccordionState(details) {\n    var key = getAccordionKey(details);\n    if (!key) return;\n    localStorage.setItem(key, details.open ? \"1\" : \"0\");\n}\n\nfunction clearAccordionState() {\n    var keys = [];\n    for (var i = 0; i < localStorage.length; i++) {\n        var k = localStorage.key(i);\n        if (k && k.indexOf(\"sentinel-acc::\") === 0) keys.push(k);\n    }\n    for (var j = 0; j < keys.length; j++) {\n        localStorage.removeItem(keys[j]);\n    }\n}\n\nfunction initAccordionPersistence() {\n    var mode = localStorage.getItem(\"sentinel-sections\") || \"remember\";\n    var accordions = document.querySelectorAll(\"details.accordion\");\n\n    // If there's only one accordion on the page, always expand it.\n    var forceOpen = accordions.length === 1;\n\n    for (var i = 0; i < accordions.length; i++) {\n        var details = accordions[i];\n\n        if (forceOpen) {\n            details.open = true;\n        } else if (mode === \"remember\") {\n            // Restore saved state if available\n            var key = getAccordionKey(details);\n            if (key) {\n                var saved = localStorage.getItem(key);\n                if (saved === \"1\") details.open = true;\n                else if (saved === \"0\") details.open = false;\n                // If no saved state, keep the HTML default\n            }\n        } else if (mode === \"collapsed\") {\n            details.open = false;\n        } else if (mode === \"expanded\") {\n            details.open = true;\n        }\n\n        // Listen for toggle to persist user choices (always, regardless of mode)\n        details.addEventListener(\"toggle\", function() {\n            if (localStorage.getItem(\"sentinel-sections\") === \"remember\") {\n                saveAccordionState(this);\n            }\n        });\n    }\n}\n\n/* ------------------------------------------------------------\n   2c. Dashboard Pause Banner\n   ------------------------------------------------------------ */\n\nfunction initPauseBanner() {\n    var banner = document.getElementById(\"pause-banner\");\n    if (!banner) return;\n\n    fetch(\"/api/settings\")\n        .then(function(r) { return r.json(); })\n        .then(function(settings) {\n            if (settings[\"paused\"] === \"true\") {\n                banner.style.display = \"\";\n            }\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\nfunction resumeScanning() {\n    var banner = document.getElementById(\"pause-banner\");\n    fetch(\"/api/settings/pause\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ paused: false })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                if (banner) banner.style.display = \"none\";\n                showToast(\"Scanning resumed\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to resume scanning\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error \u2014 could not resume scanning\", \"error\");\n        });\n}\n\nfunction checkPauseState() {\n    var banner = document.getElementById(\"pause-banner\");\n    if (!banner) return;\n\n    fetch(\"/api/settings\")\n        .then(function(r) { return r.json(); })\n        .then(function(settings) {\n            banner.style.display = settings[\"paused\"] === \"true\" ? \"\" : \"none\";\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\n/* ------------------------------------------------------------\n   2c. Last Scan Timestamp\n   ------------------------------------------------------------ */\n\nvar lastScanTimestamp = null;\nvar lastScanTimer = null;\n\nfunction refreshLastScan() {\n    var el = document.getElementById(\"last-scan\");\n    if (!el) return;\n\n    fetch(\"/api/last-scan\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            if (!data.last_scan) {\n                el.textContent = \"Last scan: never\";\n                lastScanTimestamp = null;\n                return;\n            }\n            lastScanTimestamp = new Date(data.last_scan);\n            el.title = lastScanTimestamp.toLocaleString();\n            renderLastScanTicker();\n            if (!lastScanTimer) {\n                lastScanTimer = setInterval(renderLastScanTicker, 1000);\n            }\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\nfunction renderLastScanTicker() {\n    var el = document.getElementById(\"last-scan\");\n    if (!el || !lastScanTimestamp) return;\n\n    var diff = Math.floor((Date.now() - lastScanTimestamp.getTime()) / 1000);\n    if (diff < 0) diff = 0;\n\n    var parts = [];\n    if (diff >= 86400) {\n        parts.push(Math.floor(diff / 86400) + \"d\");\n        diff %= 86400;\n    }\n    if (diff >= 3600) {\n        parts.push(Math.floor(diff / 3600) + \"h\");\n        diff %= 3600;\n    }\n    if (diff >= 60) {\n        parts.push(Math.floor(diff / 60) + \"m\");\n        diff %= 60;\n    }\n    parts.push(diff + \"s\");\n\n    el.textContent = \"Last scan: \" + parts.join(\" \") + \" ago\";\n}\n\n/* ------------------------------------------------------------\n   6. Row Click Delegation\n   ------------------------------------------------------------ */\n\nfunction onRowClick(e, name) {\n    var tag = e.target.tagName;\n    if (tag === \"A\" || tag === \"BUTTON\" || tag === \"SELECT\" || tag === \"INPUT\" || tag === \"OPTION\") {\n        return;\n    }\n    if (e.target.closest(\".status-badge-wrap\")) {\n        return;\n    }\n    var row = e.target.closest(\"tr.container-row\");\n    var href = row ? row.getAttribute(\"data-href\") : \"\";\n    if (href) { window.location.href = href; return; }\n    var host = row ? row.getAttribute(\"data-host\") : \"\";\n    var url = \"/container/\" + encodeURIComponent(name);\n    if (host) url += \"?host=\" + encodeURIComponent(host);\n    window.location.href = url;\n}\n\n/* ------------------------------------------------------------\n   7. Stack Toggle\n   ------------------------------------------------------------ */\n\nfunction toggleStack(headerRow) {\n    // Non-cluster path: stack is a <tbody class=\"stack-group\">.\n    var group = headerRow.closest(\".stack-group\");\n    if (group) {\n        group.classList.toggle(\"stack-collapsed\");\n        var expanded = !group.classList.contains(\"stack-collapsed\");\n        headerRow.setAttribute(\"aria-expanded\", expanded ? \"true\" : \"false\");\n        return;\n    }\n\n    // Cluster path: stack header is a <tr> inside a host-group <tbody>.\n    // Toggle visibility of following sibling rows until the next stack-header\n    // or host-header.\n    var collapsed = headerRow.classList.toggle(\"stack-section-collapsed\");\n    var chevron = headerRow.querySelector(\".stack-chevron\");\n    if (chevron) {\n        chevron.style.transform = collapsed ? \"rotate(0deg)\" : \"rotate(90deg)\";\n    }\n    var sibling = headerRow.nextElementSibling;\n    while (sibling && !sibling.classList.contains(\"stack-header\") && !sibling.classList.contains(\"host-header\")) {\n        sibling.style.display = collapsed ? \"none\" : \"\";\n        sibling = sibling.nextElementSibling;\n    }\n}\n\nfunction toggleSwarmSection(row) {\n    var section = row.closest(\".swarm-section\");\n    if (!section) return;\n    var isCollapsed = section.classList.toggle(\"swarm-collapsed\");\n    var icon = section.querySelector(\".expand-icon\");\n    if (icon) icon.textContent = isCollapsed ? \"\\u25B8\" : \"\\u25BE\";\n    // Hide/show all following svc-group tbody elements until the next non-svc-group.\n    var sibling = section.nextElementSibling;\n    while (sibling && sibling.classList.contains(\"svc-group\")) {\n        sibling.style.display = isCollapsed ? \"none\" : \"\";\n        sibling = sibling.nextElementSibling;\n    }\n}\n\nfunction toggleHostGroup(header) {\n    var hostGroup = header.closest(\".host-group\");\n    if (!hostGroup) return;\n    var isCollapsed = hostGroup.classList.toggle(\"host-collapsed\");\n    var icon = header.querySelector(\".expand-icon\");\n    if (icon) {\n        icon.textContent = isCollapsed ? \"\\u25B8\" : \"\\u25BE\"; // right-pointing or down-pointing triangle\n    }\n}\n\nfunction expandAllStacks() {\n    var groups = document.querySelectorAll(\".stack-group\");\n    for (var i = 0; i < groups.length; i++) {\n        groups[i].classList.remove(\"stack-collapsed\");\n        var header = groups[i].querySelector(\".stack-header\");\n        if (header) header.setAttribute(\"aria-expanded\", \"true\");\n    }\n    // Expand stacks inside host groups (cluster path).\n    var hostStackHeaders = document.querySelectorAll(\".host-group .stack-header\");\n    for (var i = 0; i < hostStackHeaders.length; i++) {\n        hostStackHeaders[i].classList.remove(\"stack-section-collapsed\");\n        var chevron = hostStackHeaders[i].querySelector(\".stack-chevron\");\n        if (chevron) chevron.style.transform = \"rotate(90deg)\";\n        var sibling = hostStackHeaders[i].nextElementSibling;\n        while (sibling && !sibling.classList.contains(\"stack-header\") && !sibling.classList.contains(\"host-header\")) {\n            sibling.style.display = \"\";\n            sibling = sibling.nextElementSibling;\n        }\n    }\n    // Expand host groups themselves.\n    var hostGroups = document.querySelectorAll(\".host-group\");\n    for (var i = 0; i < hostGroups.length; i++) {\n        hostGroups[i].classList.remove(\"host-collapsed\");\n        var icon = hostGroups[i].querySelector(\".expand-icon\");\n        if (icon) icon.textContent = \"\\u25BE\";\n    }\n    // Also expand Swarm service groups.\n    var svcGroups = document.querySelectorAll(\".svc-group\");\n    for (var i = 0; i < svcGroups.length; i++) {\n        svcGroups[i].classList.remove(\"svc-collapsed\");\n    }\n}\n\nfunction collapseAllStacks() {\n    var groups = document.querySelectorAll(\".stack-group\");\n    for (var i = 0; i < groups.length; i++) {\n        groups[i].classList.add(\"stack-collapsed\");\n        var header = groups[i].querySelector(\".stack-header\");\n        if (header) header.setAttribute(\"aria-expanded\", \"false\");\n    }\n    // Collapse stacks inside host groups (cluster path).\n    var hostStackHeaders = document.querySelectorAll(\".host-group .stack-header\");\n    for (var i = 0; i < hostStackHeaders.length; i++) {\n        hostStackHeaders[i].classList.add(\"stack-section-collapsed\");\n        var chevron = hostStackHeaders[i].querySelector(\".stack-chevron\");\n        if (chevron) chevron.style.transform = \"rotate(0deg)\";\n        var sibling = hostStackHeaders[i].nextElementSibling;\n        while (sibling && !sibling.classList.contains(\"stack-header\") && !sibling.classList.contains(\"host-header\")) {\n            sibling.style.display = \"none\";\n            sibling = sibling.nextElementSibling;\n        }\n    }\n    // Collapse host groups themselves.\n    var hostGroups = document.querySelectorAll(\".host-group\");\n    for (var i = 0; i < hostGroups.length; i++) {\n        hostGroups[i].classList.add(\"host-collapsed\");\n        var icon = hostGroups[i].querySelector(\".expand-icon\");\n        if (icon) icon.textContent = \"\\u25B8\";\n    }\n    // Also collapse Swarm service groups.\n    var svcGroups = document.querySelectorAll(\".svc-group\");\n    for (var i = 0; i < svcGroups.length; i++) {\n        svcGroups[i].classList.add(\"svc-collapsed\");\n    }\n}\n\n/* ------------------------------------------------------------\n   9. Multi-select\n   ------------------------------------------------------------ */\n\nvar selectedContainers = {};\nvar manageMode = false;\n\nfunction updateSelectionUI() {\n    var names = Object.keys(selectedContainers);\n    var count = 0;\n    for (var i = 0; i < names.length; i++) {\n        if (selectedContainers[names[i]]) count++;\n    }\n\n    var bar = document.getElementById(\"bulk-bar\");\n    var countEl = document.getElementById(\"bulk-count\");\n    if (count > 0) {\n        if (bar) bar.style.display = \"\";\n        if (countEl) countEl.textContent = count + \" selected\";\n        document.body.style.paddingBottom = \"70px\";\n    } else {\n        if (bar) bar.style.display = \"none\";\n        document.body.style.paddingBottom = \"\";\n    }\n}\n\nfunction clearSelection() {\n    selectedContainers = {};\n    var checkboxes = document.querySelectorAll(\".row-select\");\n    for (var i = 0; i < checkboxes.length; i++) {\n        checkboxes[i].checked = false;\n    }\n    var selectAll = document.getElementById(\"select-all\");\n    if (selectAll) selectAll.checked = false;\n    var stackCbs = document.querySelectorAll(\".stack-select\");\n    for (var s = 0; s < stackCbs.length; s++) {\n        stackCbs[s].checked = false;\n        stackCbs[s].indeterminate = false;\n    }\n    updateSelectionUI();\n}\n\nfunction recomputeSelectionState() {\n    // Per-stack: set stack checkbox to checked/unchecked/indeterminate.\n    var stacks = document.querySelectorAll(\"tbody.stack-group\");\n    for (var s = 0; s < stacks.length; s++) {\n        var stackCb = stacks[s].querySelector(\".stack-select\");\n        if (!stackCb) continue;\n        var rows = stacks[s].querySelectorAll(\".row-select\");\n        var total = rows.length;\n        var checked = 0;\n        for (var r = 0; r < rows.length; r++) {\n            if (rows[r].checked) checked++;\n        }\n        stackCb.checked = total > 0 && checked === total;\n        stackCb.indeterminate = checked > 0 && checked < total;\n    }\n\n    // Global select-all.\n    var allRows = document.querySelectorAll(\".row-select\");\n    var allTotal = allRows.length;\n    var allChecked = 0;\n    for (var a = 0; a < allRows.length; a++) {\n        if (allRows[a].checked) allChecked++;\n    }\n    var selectAll = document.getElementById(\"select-all\");\n    if (selectAll) {\n        selectAll.checked = allTotal > 0 && allChecked === allTotal;\n        selectAll.indeterminate = allChecked > 0 && allChecked < allTotal;\n    }\n\n    updateSelectionUI();\n}\n\n/* ------------------------------------------------------------\n   9a. Filter & Sort System\n   ------------------------------------------------------------ */\n\nvar filterState = { status: \"all\", updates: \"all\", sort: \"default\" };\nvar activeDashboardTab = null;\n\nfunction initFilters() {\n    var saved = localStorage.getItem(\"sentinel-filters\");\n    if (saved) { try { filterState = JSON.parse(saved); } catch(e) {} }\n\n    // Restore active states from saved filter state.\n    var pills = document.querySelectorAll(\".filter-pill\");\n    for (var i = 0; i < pills.length; i++) {\n        var p = pills[i];\n        if (filterState[p.getAttribute(\"data-filter\")] === p.getAttribute(\"data-value\")) {\n            p.classList.add(\"active\");\n        }\n    }\n\n    var bar = document.getElementById(\"filter-bar\");\n    if (bar) bar.addEventListener(\"click\", function(e) {\n        var pill = e.target.closest(\".filter-pill\");\n        if (!pill) return;\n\n        var key = pill.getAttribute(\"data-filter\");\n        var value = pill.getAttribute(\"data-value\");\n        var exclusive = pill.getAttribute(\"data-exclusive\");\n        var wasActive = pill.classList.contains(\"active\");\n\n        // Deactivate exclusive siblings and reset their filter state.\n        if (exclusive) {\n            var siblings = bar.querySelectorAll('.filter-pill[data-exclusive=\"' + exclusive + '\"]');\n            for (var s = 0; s < siblings.length; s++) {\n                siblings[s].classList.remove(\"active\");\n                var sibKey = siblings[s].getAttribute(\"data-filter\");\n                if (sibKey !== key) {\n                    filterState[sibKey] = sibKey === \"sort\" ? \"default\" : \"all\";\n                }\n            }\n        }\n\n        // Toggle: if was active, deactivate (reset to default); if not, activate.\n        if (wasActive) {\n            pill.classList.remove(\"active\");\n            filterState[key] = key === \"sort\" ? \"default\" : \"all\";\n        } else {\n            pill.classList.add(\"active\");\n            filterState[key] = value;\n        }\n\n        localStorage.setItem(\"sentinel-filters\", JSON.stringify(filterState));\n        applyFiltersAndSort();\n    });\n\n    applyFiltersAndSort();\n}\n\n// activateFilter is called from stat card clicks to set a filter + expand all stacks.\nfunction activateFilter(key, value) {\n    // Reset all filters first.\n    filterState = { status: \"all\", updates: \"all\", sort: \"default\" };\n\n    // Set the requested filter.\n    filterState[key] = value;\n    localStorage.setItem(\"sentinel-filters\", JSON.stringify(filterState));\n\n    // Update pill UI to match.\n    var pills = document.querySelectorAll(\".filter-pill\");\n    for (var i = 0; i < pills.length; i++) {\n        var p = pills[i];\n        if (p.getAttribute(\"data-filter\") === key && p.getAttribute(\"data-value\") === value) {\n            p.classList.add(\"active\");\n        } else {\n            p.classList.remove(\"active\");\n        }\n    }\n\n    expandAllStacks();\n    applyFiltersAndSort();\n}\n\nfunction applyFiltersAndSort() {\n    var table = document.getElementById(\"container-table\");\n    if (!table) return;\n\n    // Scope filtering to the active tab; null means no tabs (process everything).\n    var activeTab = activeDashboardTab;\n\n    var stacks = table.querySelectorAll(\"tbody.stack-group\");\n    for (var s = 0; s < stacks.length; s++) {\n        var stack = stacks[s];\n\n        // Skip tbodies belonging to a different tab.\n        var stackTab = stack.getAttribute(\"data-tab\");\n        if (activeTab !== null && activeTab !== \"all\" && stackTab !== null && stackTab !== activeTab) continue;\n\n        // Skip tbodies hidden by tab switching.\n        if (stack.style.display === \"none\") continue;\n\n        var rows = stack.querySelectorAll(\".container-row\");\n        var visibleCount = 0;\n        for (var r = 0; r < rows.length; r++) {\n            var row = rows[r];\n            var show = true;\n            if (filterState.status === \"running\") show = row.classList.contains(\"state-running\");\n            else if (filterState.status === \"stopped\") show = !row.classList.contains(\"state-running\");\n            if (show && filterState.updates === \"pending\") show = row.classList.contains(\"has-update\");\n            row.style.display = show ? \"\" : \"none\";\n            if (show) visibleCount++;\n        }\n        stack.style.display = visibleCount === 0 ? \"none\" : \"\";\n    }\n\n    // Filter Swarm service groups too.\n    var svcGroups = table.querySelectorAll(\"tbody.svc-group\");\n    for (var g = 0; g < svcGroups.length; g++) {\n        var svcGroup = svcGroups[g];\n\n        // Skip tbodies belonging to a different tab.\n        var svcTab = svcGroup.getAttribute(\"data-tab\");\n        if (activeTab !== null && activeTab !== \"all\" && svcTab !== null && svcTab !== activeTab) continue;\n\n        // Skip tbodies hidden by tab switching.\n        if (svcGroup.style.display === \"none\") continue;\n\n        var svcHeader = svcGroup.querySelector(\".svc-header\");\n        if (!svcHeader) continue;\n        var showSvc = true;\n        if (filterState.status === \"running\") {\n            var rb = svcHeader.querySelector(\".svc-replicas\");\n            showSvc = rb && !rb.classList.contains(\"svc-replicas-down\");\n        } else if (filterState.status === \"stopped\") {\n            var rb2 = svcHeader.querySelector(\".svc-replicas\");\n            showSvc = rb2 && rb2.classList.contains(\"svc-replicas-down\");\n        }\n        if (showSvc && filterState.updates === \"pending\") {\n            showSvc = svcHeader.classList.contains(\"has-update\");\n        }\n        svcGroup.style.display = showSvc ? \"\" : \"none\";\n    }\n\n    // Filter host-group tbodies (cluster mode).\n    var hostGroups = table.querySelectorAll(\"tbody.host-group\");\n    for (var h = 0; h < hostGroups.length; h++) {\n        var hg = hostGroups[h];\n\n        var hgTab = hg.getAttribute(\"data-tab\");\n        if (activeTab !== null && activeTab !== \"all\" && hgTab !== null && hgTab !== activeTab) continue;\n        if (hg.style.display === \"none\") continue;\n\n        var hgRows = hg.querySelectorAll(\".container-row\");\n        var hgVisible = 0;\n        for (var hr = 0; hr < hgRows.length; hr++) {\n            var hRow = hgRows[hr];\n            var hShow = true;\n            if (filterState.status === \"running\") hShow = hRow.classList.contains(\"state-running\");\n            else if (filterState.status === \"stopped\") hShow = !hRow.classList.contains(\"state-running\");\n            if (hShow && filterState.updates === \"pending\") hShow = hRow.classList.contains(\"has-update\");\n            hRow.style.display = hShow ? \"\" : \"none\";\n            if (hShow) hgVisible++;\n        }\n    }\n\n    if (filterState.sort !== \"default\") {\n        sortRows(stacks);\n        sortSwarmServices(table);\n    }\n}\n\nfunction sortRows(stacks) {\n    for (var s = 0; s < stacks.length; s++) {\n        var tbody = stacks[s];\n        var rows = [];\n        var rowEls = tbody.querySelectorAll(\".container-row\");\n        for (var r = 0; r < rowEls.length; r++) {\n            if (rowEls[r].style.display === \"none\") continue;\n            rows.push(rowEls[r]);\n        }\n\n        if (filterState.sort === \"alpha\") {\n            rows.sort(function(a, b) {\n                return a.getAttribute(\"data-name\").localeCompare(b.getAttribute(\"data-name\"));\n            });\n        } else if (filterState.sort === \"status\") {\n            rows.sort(function(a, b) {\n                var sa = statusScore(a), sb = statusScore(b);\n                return sa !== sb ? sb - sa : a.getAttribute(\"data-name\").localeCompare(b.getAttribute(\"data-name\"));\n            });\n        }\n\n        for (var i = 0; i < rows.length; i++) {\n            tbody.appendChild(rows[i]);\n        }\n    }\n}\n\nfunction sortSwarmServices(table) {\n    var groups = table.querySelectorAll(\"tbody.svc-group\");\n    if (groups.length < 2) return;\n    var arr = [];\n    for (var i = 0; i < groups.length; i++) {\n        if (groups[i].style.display === \"none\") continue;\n        arr.push(groups[i]);\n    }\n    if (filterState.sort === \"alpha\") {\n        arr.sort(function(a, b) {\n            return (a.getAttribute(\"data-service\") || \"\").localeCompare(b.getAttribute(\"data-service\") || \"\");\n        });\n    } else if (filterState.sort === \"status\") {\n        arr.sort(function(a, b) {\n            var sa = svcStatusScore(a), sb = svcStatusScore(b);\n            return sa !== sb ? sb - sa : (a.getAttribute(\"data-service\") || \"\").localeCompare(b.getAttribute(\"data-service\") || \"\");\n        });\n    }\n    for (var j = 0; j < arr.length; j++) {\n        arr[j].parentNode.appendChild(arr[j]);\n    }\n}\n\nfunction svcStatusScore(svcGroup) {\n    var header = svcGroup.querySelector(\".svc-header\");\n    if (!header) return 0;\n    var rep = header.querySelector(\".svc-replicas\");\n    if (rep && rep.classList.contains(\"svc-replicas-down\")) return 3;\n    if (header.classList.contains(\"has-update\")) return 2;\n    return 1;\n}\n\nfunction statusScore(row) {\n    if (!row.classList.contains(\"state-running\")) return 3;\n    if (row.classList.contains(\"has-update\")) return 2;\n    return 1;\n}\n\n/* ------------------------------------------------------------\n   9b. Dashboard Tabs\n   ------------------------------------------------------------ */\n\nfunction initDashboardTabs() {\n    var tabsEl = document.getElementById(\"dashboard-tabs\");\n    if (!tabsEl) return; // Standalone mode \u2014 no tabs\n\n    var saved = localStorage.getItem(\"sentinel-dashboard-tab\") || \"all\";\n\n    // Validate saved tab exists; fall back to first tab button if not found.\n    var buttons = tabsEl.querySelectorAll(\".tab-btn\");\n    var found = false;\n    for (var i = 0; i < buttons.length; i++) {\n        if (buttons[i].getAttribute(\"data-tab\") === saved) {\n            found = true;\n            break;\n        }\n    }\n    if (!found && buttons.length > 0) {\n        saved = buttons[0].getAttribute(\"data-tab\");\n    }\n\n    switchDashboardTab(saved);\n\n    for (var j = 0; j < buttons.length; j++) {\n        buttons[j].addEventListener(\"click\", function() {\n            switchDashboardTab(this.getAttribute(\"data-tab\"));\n        });\n    }\n}\n\nfunction switchDashboardTab(tabId) {\n    var tabsEl = document.getElementById(\"dashboard-tabs\");\n    if (!tabsEl) return;\n\n    activeDashboardTab = tabId;\n\n    // Update tab button active states and aria-selected attributes.\n    var buttons = tabsEl.querySelectorAll(\".tab-btn\");\n    var activeBtn = null;\n    for (var i = 0; i < buttons.length; i++) {\n        var btn = buttons[i];\n        if (btn.getAttribute(\"data-tab\") === tabId) {\n            btn.classList.add(\"active\");\n            btn.setAttribute(\"aria-selected\", \"true\");\n            activeBtn = btn;\n        } else {\n            btn.classList.remove(\"active\");\n            btn.setAttribute(\"aria-selected\", \"false\");\n        }\n    }\n\n    // Update stat cards from the active button's data attributes.\n    if (activeBtn) {\n        var total   = activeBtn.getAttribute(\"data-stats-total\")   || \"0\";\n        var running = activeBtn.getAttribute(\"data-stats-running\") || \"0\";\n        var pending = activeBtn.getAttribute(\"data-stats-pending\") || \"0\";\n        updateStats(parseInt(total, 10), parseInt(running, 10), parseInt(pending, 10));\n    }\n\n    // Show/hide tbody elements based on their data-tab attribute.\n    var table = document.getElementById(\"container-table\");\n    if (table) {\n        var tbodies = table.querySelectorAll(\"tbody\");\n        for (var t = 0; t < tbodies.length; t++) {\n            var tb = tbodies[t];\n            var tbTab = tb.getAttribute(\"data-tab\");\n            if (tbTab === null) {\n                // No data-tab (e.g. thead-equivalent tbodies) \u2014 always visible.\n                continue;\n            }\n            tb.style.display = (tabId === \"all\" || tbTab === tabId) ? \"\" : \"none\";\n        }\n    }\n\n    localStorage.setItem(\"sentinel-dashboard-tab\", tabId);\n\n    applyFiltersAndSort();\n}\n\nfunction recalcTabStats() {\n    var tabsEl = document.getElementById(\"dashboard-tabs\");\n    if (!tabsEl) return;\n\n    var table = document.getElementById(\"container-table\");\n    if (!table) return;\n\n    var buttons = tabsEl.querySelectorAll(\".tab-btn\");\n    for (var i = 0; i < buttons.length; i++) {\n        var btn = buttons[i];\n        var tabId = btn.getAttribute(\"data-tab\");\n\n        var total = 0, running = 0, pending = 0;\n\n        // Count stack-group container rows for this tab.\n        var stacks = table.querySelectorAll('tbody.stack-group[data-tab=\"' + tabId + '\"]');\n        for (var s = 0; s < stacks.length; s++) {\n            if (stacks[s].style.display === \"none\") continue;\n            var rows = stacks[s].querySelectorAll(\".container-row\");\n            for (var r = 0; r < rows.length; r++) {\n                if (rows[r].style.display === \"none\") continue;\n                total++;\n                if (rows[r].classList.contains(\"state-running\")) running++;\n                if (rows[r].classList.contains(\"has-update\")) pending++;\n            }\n        }\n\n        // Count svc-group Swarm services for this tab.\n        var svcGroups = table.querySelectorAll('tbody.svc-group[data-tab=\"' + tabId + '\"]');\n        for (var g = 0; g < svcGroups.length; g++) {\n            if (svcGroups[g].style.display === \"none\") continue;\n            total++;\n            var svcHeader = svcGroups[g].querySelector(\".svc-header\");\n            if (svcHeader) {\n                var replicas = svcHeader.querySelector(\".svc-replicas\");\n                if (replicas && replicas.classList.contains(\"svc-replicas-healthy\")) running++;\n                if (svcHeader.classList.contains(\"has-update\")) pending++;\n            }\n        }\n\n        // Count host-group container rows (cluster hosts) for this tab.\n        var hostGroups = table.querySelectorAll('tbody.host-group[data-tab=\"' + tabId + '\"]');\n        for (var hg = 0; hg < hostGroups.length; hg++) {\n            if (hostGroups[hg].style.display === \"none\") continue;\n            var hgRows = hostGroups[hg].querySelectorAll(\".container-row\");\n            for (var hr = 0; hr < hgRows.length; hr++) {\n                if (hgRows[hr].style.display === \"none\") continue;\n                total++;\n                if (hgRows[hr].classList.contains(\"state-running\")) running++;\n                if (hgRows[hr].classList.contains(\"has-update\")) pending++;\n            }\n        }\n\n        btn.setAttribute(\"data-stats-total\",   String(total));\n        btn.setAttribute(\"data-stats-running\",  String(running));\n        btn.setAttribute(\"data-stats-pending\",  String(pending));\n\n        // Refresh displayed stat cards if this is the active tab.\n        if (tabId === activeDashboardTab) {\n            updateStats(total, running, pending);\n        }\n\n        // Update the badge text for non-\"all\" tabs immediately.\n        if (tabId !== \"all\") {\n            var badge = btn.querySelector(\".tab-badge\");\n            if (badge) badge.textContent = String(total);\n        }\n    }\n\n    // Update the \"all\" tab by summing all other tabs.\n    var allBtn = tabsEl.querySelector('.tab-btn[data-tab=\"all\"]');\n    if (allBtn) {\n        var allTotal = 0, allRunning = 0, allPending = 0;\n        var nonAllBtns = tabsEl.querySelectorAll(\".tab-btn:not([data-tab='all'])\");\n        for (var k = 0; k < nonAllBtns.length; k++) {\n            allTotal += parseInt(nonAllBtns[k].getAttribute(\"data-stats-total\") || \"0\", 10);\n            allRunning += parseInt(nonAllBtns[k].getAttribute(\"data-stats-running\") || \"0\", 10);\n            allPending += parseInt(nonAllBtns[k].getAttribute(\"data-stats-pending\") || \"0\", 10);\n        }\n        allBtn.setAttribute(\"data-stats-total\", String(allTotal));\n        allBtn.setAttribute(\"data-stats-running\", String(allRunning));\n        allBtn.setAttribute(\"data-stats-pending\", String(allPending));\n        var allBadge = allBtn.querySelector(\".tab-badge\");\n        if (allBadge) allBadge.textContent = String(allTotal);\n        if (activeDashboardTab === \"all\") {\n            updateStats(allTotal, allRunning, allPending);\n        }\n    }\n}\n\n// Forward-declared \u2014 will be set by sse.js via setUpdateStatsFn.\n// updateStats is defined in sse.js but used by dashboard tabs;\n// we import it at usage time to avoid circular deps.\nvar updateStats = function() {};\n\nfunction setUpdateStatsFn(fn) {\n    updateStats = fn;\n}\n\n/* ------------------------------------------------------------\n   10. Manage Mode\n   ------------------------------------------------------------ */\n\nfunction toggleManageMode() {\n    manageMode = !manageMode;\n    var table = document.getElementById(\"container-table\");\n    var btn = document.getElementById(\"manage-btn\");\n    if (!table || !btn) return;\n\n    if (manageMode) {\n        table.classList.add(\"managing\");\n        btn.textContent = \"Done\";\n        btn.classList.add(\"active\");\n    } else {\n        table.classList.remove(\"managing\");\n        btn.textContent = \"Manage\";\n        btn.classList.remove(\"active\");\n        clearSelection();\n    }\n\n    // Enable/disable drag on stack groups\n    var groups = table.querySelectorAll(\".stack-group\");\n    for (var i = 0; i < groups.length; i++) {\n        if (manageMode) {\n            groups[i].setAttribute(\"draggable\", \"true\");\n        } else {\n            groups[i].removeAttribute(\"draggable\");\n        }\n    }\n}\n\n/* ------------------------------------------------------------\n   Stack Drag Reordering\n   ------------------------------------------------------------ */\n\n(function () {\n    var dragSrc = null;\n\n    document.addEventListener(\"dragstart\", function (e) {\n        var group = e.target.closest(\".stack-group\");\n        if (!group || !manageMode) return;\n        // Only allow drag from the handle element.\n        if (!e.target.closest(\".stack-drag-handle\")) {\n            e.preventDefault();\n            return;\n        }\n        dragSrc = group;\n        group.classList.add(\"dragging\");\n        e.dataTransfer.effectAllowed = \"move\";\n        e.dataTransfer.setData(\"text/plain\", group.getAttribute(\"data-stack\"));\n    });\n\n    document.addEventListener(\"dragover\", function (e) {\n        var group = e.target.closest(\".stack-group\");\n        if (!group || !dragSrc || group === dragSrc) return;\n        e.preventDefault();\n        e.dataTransfer.dropEffect = \"move\";\n\n        // Determine above/below by mouse Y relative to element midpoint\n        var rect = group.getBoundingClientRect();\n        var mid = rect.top + rect.height / 2;\n        clearDragClasses(group);\n        if (e.clientY < mid) {\n            group.classList.add(\"drag-over-above\");\n        } else {\n            group.classList.add(\"drag-over-below\");\n        }\n    });\n\n    document.addEventListener(\"dragleave\", function (e) {\n        var group = e.target.closest(\".stack-group\");\n        if (group) clearDragClasses(group);\n    });\n\n    document.addEventListener(\"drop\", function (e) {\n        var group = e.target.closest(\".stack-group\");\n        if (!group || !dragSrc || group === dragSrc) return;\n        e.preventDefault();\n\n        var rect = group.getBoundingClientRect();\n        var mid = rect.top + rect.height / 2;\n        var table = group.closest(\"table\");\n\n        if (e.clientY < mid) {\n            table.insertBefore(dragSrc, group);\n        } else {\n            // Insert after: use nextElementSibling (next tbody)\n            var next = group.nextElementSibling;\n            if (next) {\n                table.insertBefore(dragSrc, next);\n            } else {\n                table.appendChild(dragSrc);\n            }\n        }\n\n        cleanupDrag();\n        saveStackOrder();\n    });\n\n    document.addEventListener(\"dragend\", function () {\n        cleanupDrag();\n    });\n\n    function clearDragClasses(el) {\n        el.classList.remove(\"drag-over-above\", \"drag-over-below\");\n    }\n\n    function cleanupDrag() {\n        if (dragSrc) {\n            dragSrc.classList.remove(\"dragging\");\n            dragSrc = null;\n        }\n        var all = document.querySelectorAll(\".drag-over-above, .drag-over-below\");\n        for (var i = 0; i < all.length; i++) {\n            clearDragClasses(all[i]);\n        }\n    }\n\n    function saveStackOrder() {\n        var groups = document.querySelectorAll(\".stack-group\");\n        var order = [];\n        for (var i = 0; i < groups.length; i++) {\n            var name = groups[i].getAttribute(\"data-stack\");\n            if (name) order.push(name);\n        }\n        fetch(\"/api/settings/stack-order\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ order: order })\n        })\n        .then(function (res) {\n            if (!res.ok) throw new Error(\"save failed\");\n            showToast(\"Stack order saved\", \"success\");\n        })\n        .catch(function () {\n            showToast(\"Failed to save stack order\", \"error\");\n        });\n    }\n})();\n\n/* ------------------------------------------------------------\n   11. Container Log Viewer\n   ------------------------------------------------------------ */\n\nasync function fetchContainerLogs(name, hostId) {\n    var linesEl = document.getElementById('log-lines');\n    var lines = linesEl ? linesEl.value : '50';\n    var logsEl = document.getElementById('container-logs');\n    if (!logsEl) return;\n\n    logsEl.textContent = 'Loading logs...';\n\n    var url = '/api/containers/' + encodeURIComponent(name) + '/logs?lines=' + lines;\n    if (hostId) url += '&host=' + encodeURIComponent(hostId);\n\n    try {\n        var resp = await fetch(url);\n        if (!resp.ok) throw new Error('HTTP ' + resp.status);\n        var data = await resp.json();\n        logsEl.textContent = data.logs || 'No log output.';\n        // Auto-scroll to bottom.\n        logsEl.scrollTop = logsEl.scrollHeight;\n    } catch (err) {\n        logsEl.textContent = 'Error loading logs: ' + err.message;\n    }\n}\n\nexport {\n    initTheme,\n    applyTheme,\n    initAccordionPersistence,\n    initPauseBanner,\n    resumeScanning,\n    checkPauseState,\n    refreshLastScan,\n    onRowClick,\n    toggleStack,\n    toggleSwarmSection,\n    toggleHostGroup,\n    expandAllStacks,\n    collapseAllStacks,\n    selectedContainers,\n    manageMode,\n    updateSelectionUI,\n    clearSelection,\n    recomputeSelectionState,\n    initFilters,\n    activateFilter,\n    applyFiltersAndSort,\n    initDashboardTabs,\n    recalcTabStats,\n    setUpdateStatsFn,\n    toggleManageMode,\n    fetchContainerLogs\n};\n", "/* ============================================================\n   5. API Actions \u2014 Queue operations, container actions, bulk\n   ============================================================ */\n\nimport { showToast, escapeHTML, showConfirm, apiPost } from \"./utils.js\";\n\n// Local escapeHtml (lowercase h) used by loadAllTags.\nfunction escapeHtml(str) {\n    if (!str) return \"\";\n    return str\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\n// Access via window to avoid circular import with sse.js.\nfunction _updateQueueBadge() {\n    if (window.updateQueueBadge) window.updateQueueBadge();\n}\n\n// Access dashboard state via window to avoid circular imports.\nfunction _getSelectedContainers() { return window._dashboardSelectedContainers || {}; }\nfunction _getManageMode() { return window._dashboardManageMode || false; }\n\n// Remove a queue row (and its accordion) from the DOM with animation.\nfunction removeQueueRow(btn) {\n    var row = btn ? btn.closest(\"tr\") : null;\n    if (!row) return;\n    var accordion = row.nextElementSibling;\n    var hasAccordion = accordion && accordion.classList.contains(\"accordion-panel\");\n\n    // Quick fade then remove \u2014 no height animation to avoid table layout shifts.\n    row.style.transition = \"opacity 0.15s ease\";\n    row.style.opacity = \"0\";\n    if (hasAccordion) {\n        accordion.style.transition = \"opacity 0.15s ease\";\n        accordion.style.opacity = \"0\";\n    }\n\n    setTimeout(function () {\n        if (hasAccordion) accordion.remove();\n        row.remove();\n\n        // Update \"Pending Updates (N)\" heading.\n        var tbody = document.querySelector(\".table-wrap tbody\");\n        var remaining = tbody ? tbody.querySelectorAll(\"tr.container-row\").length : 0;\n        var heading = document.querySelector(\".card-header h2\");\n        if (heading) heading.textContent = \"Pending Updates (\" + remaining + \")\";\n\n        _updateQueueBadge();\n\n        // Show empty state if queue is now empty.\n        if (remaining === 0 && tbody) {\n            var emptyRow = document.createElement(\"tr\");\n            var td = document.createElement(\"td\");\n            td.setAttribute(\"colspan\", \"5\");\n            var wrapper = document.createElement(\"div\");\n            wrapper.className = \"empty-state\";\n            var h3 = document.createElement(\"h3\");\n            h3.textContent = \"No pending updates\";\n            var p1 = document.createElement(\"p\");\n            p1.textContent = \"No containers are waiting for approval. Containers with a manual policy will appear here when updates are available.\";\n            var p2 = document.createElement(\"p\");\n            p2.style.marginTop = \"var(--sp-2)\";\n            var link = document.createElement(\"a\");\n            link.href = \"/settings\";\n            link.textContent = \"Manage default policies\";\n            p2.appendChild(link);\n            wrapper.appendChild(h3);\n            wrapper.appendChild(p1);\n            wrapper.appendChild(p2);\n            td.appendChild(wrapper);\n            emptyRow.appendChild(td);\n            tbody.appendChild(emptyRow);\n        }\n    }, 180);\n}\n\nfunction toggleQueueAccordion(index) {\n    var panel = document.getElementById(\"accordion-queue-\" + index);\n    if (!panel) return;\n    var visible = panel.style.display !== \"none\";\n    panel.style.display = visible ? \"none\" : \"\";\n    var row = panel.previousElementSibling;\n    var chevron = row ? row.querySelector(\".queue-expand\") : null;\n    if (chevron) chevron.textContent = visible ? \"\\u25B8\" : \"\\u25BE\";\n}\n\nfunction approveUpdate(key, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    apiPost(\n        \"/api/approve/\" + encodeURIComponent(key),\n        null,\n        \"Approved update for \" + key,\n        \"Failed to approve\",\n        btn,\n        function () { removeQueueRow(btn); }\n    );\n}\n\nfunction ignoreUpdate(key, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    apiPost(\n        \"/api/ignore/\" + encodeURIComponent(key),\n        null,\n        \"Version ignored for \" + key,\n        \"Failed to ignore version\",\n        btn,\n        function () { removeQueueRow(btn); }\n    );\n}\n\nfunction rejectUpdate(key, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    apiPost(\n        \"/api/reject/\" + encodeURIComponent(key),\n        null,\n        \"Rejected update for \" + key,\n        \"Failed to reject\",\n        btn,\n        function () { removeQueueRow(btn); }\n    );\n}\n\n// Bulk queue actions \u2014 fire staggered API calls, disable all buttons, show a\n// single summary toast, and reload the page when done.\nvar _bulkInProgress = false;\n\nfunction bulkQueueAction(apiPath, actionLabel, triggerBtn) {\n    var rows = document.querySelectorAll(\".table-wrap tbody tr.container-row[data-queue-key]\");\n    if (!rows.length) return;\n\n    _bulkInProgress = true;\n\n    // Disable every button on the page to prevent double-clicks.\n    var allBtns = document.querySelectorAll(\".queue-table .btn, .queue-header .btn\");\n    for (var i = 0; i < allBtns.length; i++) {\n        allBtns[i].disabled = true;\n    }\n    if (triggerBtn) {\n        triggerBtn.classList.add(\"loading\");\n    }\n\n    var keys = [];\n    for (var j = 0; j < rows.length; j++) {\n        var key = rows[j].getAttribute(\"data-queue-key\");\n        if (key) keys.push(key);\n    }\n    if (!keys.length) {\n        _bulkInProgress = false;\n        if (triggerBtn) { triggerBtn.classList.remove(\"loading\"); triggerBtn.disabled = false; }\n        return;\n    }\n\n    var completed = 0;\n    var failed = 0;\n    var total = keys.length;\n\n    function onDone() {\n        if (completed + failed < total) return;\n        _bulkInProgress = false;\n        if (failed > 0) {\n            showToast(completed + \" \" + actionLabel + \", \" + failed + \" failed\", \"warning\");\n        } else {\n            showToast(\"All \" + completed + \" updates \" + actionLabel, \"success\");\n        }\n        setTimeout(function () { window.location.reload(); }, 400);\n    }\n\n    for (var k = 0; k < keys.length; k++) {\n        (function (queueKey, delay) {\n            setTimeout(function () {\n                fetch(\"/api/\" + apiPath + \"/\" + encodeURIComponent(queueKey), {\n                    method: \"POST\",\n                    credentials: \"same-origin\"\n                })\n                .then(function (r) { return r.json(); })\n                .then(function (data) {\n                    if (data.error) { failed++; } else { completed++; }\n                })\n                .catch(function () { failed++; })\n                .then(onDone);\n            }, delay);\n        })(keys[k], k * 100);\n    }\n}\n\nfunction approveAll(event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    bulkQueueAction(\"approve\", \"approved\", btn);\n}\n\nfunction ignoreAll(event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    bulkQueueAction(\"ignore\", \"ignored\", btn);\n}\n\nfunction rejectAll(event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    bulkQueueAction(\"reject\", \"rejected\", btn);\n}\n\nfunction triggerUpdate(name, event, hostId) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    var url = \"/api/update/\" + encodeURIComponent(name);\n    if (hostId) url += \"?host=\" + encodeURIComponent(hostId);\n    // Same pattern as triggerSvcUpdate: manage loading state ourselves,\n    // don't pass btn to apiPost, let SSE handle the row refresh.\n    if (btn) {\n        btn.classList.add(\"loading\");\n        btn.disabled = true;\n        window._updateLoadingBtns = window._updateLoadingBtns || {};\n        var key = (hostId || \"\") + \"::\" + name;\n        window._updateLoadingBtns[key] = btn;\n        setTimeout(function() {\n            if (window._updateLoadingBtns && window._updateLoadingBtns[key]) {\n                window._updateLoadingBtns[key].classList.remove(\"loading\");\n                window._updateLoadingBtns[key].disabled = false;\n                delete window._updateLoadingBtns[key];\n            }\n        }, 120000);\n    }\n    apiPost(url, null,\n        \"Update started for \" + name,\n        \"Failed to trigger update\"\n    );\n}\n\nfunction triggerCheck(name, event, hostId) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    var url = \"/api/check/\" + encodeURIComponent(name);\n    if (hostId) url += \"?host=\" + encodeURIComponent(hostId);\n    apiPost(\n        url,\n        null,\n        \"Checking for updates on \" + name,\n        \"Failed to check for updates\",\n        btn\n    );\n}\n\nfunction triggerRollback(name, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    apiPost(\n        \"/api/containers/\" + encodeURIComponent(name) + \"/rollback\",\n        null,\n        \"Rollback started for \" + name,\n        \"Failed to trigger rollback\",\n        btn\n    );\n}\n\nfunction changePolicy(name, newPolicy, hostId) {\n    var url = \"/api/containers/\" + encodeURIComponent(name) + \"/policy\";\n    if (hostId) url += \"?host=\" + encodeURIComponent(hostId);\n    apiPost(\n        url,\n        { policy: newPolicy },\n        \"Policy changed to \" + newPolicy + \" for \" + name,\n        \"Failed to change policy\"\n    );\n}\n\nfunction triggerScan(event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    if (btn) {\n        btn.classList.add(\"loading\");\n        btn.disabled = true;\n    }\n    var opts = { method: \"POST\" };\n    fetch(\"/api/scan\", opts)\n        .then(function (resp) {\n            return resp.json().then(function (data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function (result) {\n            if (!result.ok) {\n                showToast(result.data.error || \"Failed to trigger scan\", \"error\");\n                if (btn) { btn.classList.remove(\"loading\"); btn.disabled = false; }\n            }\n            // On success, keep spinner \u2014 cleared by scan_complete SSE event.\n        })\n        .catch(function () {\n            showToast(\"Network error \u2014 failed to trigger scan\", \"error\");\n            if (btn) { btn.classList.remove(\"loading\"); btn.disabled = false; }\n        });\n}\n\nfunction triggerSelfUpdate(event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    showConfirm(\"Self-Update\", \"<p>This will restart Sentinel to apply the update. Continue?</p>\").then(function(confirmed) {\n        if (!confirmed) return;\n        localStorage.setItem(\"sentinel-self-updating\", \"1\");\n        apiPost(\n            \"/api/self-update\",\n            null,\n            \"Self-update initiated \\u2014 Sentinel will restart shortly\",\n            \"Failed to trigger self-update\",\n            btn\n        );\n    });\n}\n\nfunction switchToGHCR(name, ghcrImage) {\n    if (!confirm(\"Switch \" + name + \" to \" + ghcrImage + \"?\\n\\nThis will recreate the container with the GHCR image. A snapshot will be taken first for rollback.\")) {\n        return;\n    }\n    var enc = encodeURIComponent(name);\n    fetch(\"/api/containers/\" + enc + \"/switch-ghcr\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ target_image: ghcrImage })\n    })\n    .then(function(r) { return r.json(); })\n    .then(function(data) {\n        if (data.error) {\n            showToast(data.error, \"error\");\n        } else {\n            showToast(\"Switching \" + name + \" to GHCR image...\", \"success\");\n        }\n    })\n    .catch(function() {\n        showToast(\"Failed to switch to GHCR\", \"error\");\n    });\n}\n\nfunction loadAllTags(summaryEl) {\n    var details = summaryEl.parentElement;\n    // Only fetch once \u2014 after first load the body is populated.\n    if (details.dataset.tagsLoaded) return;\n    details.dataset.tagsLoaded = \"1\";\n\n    var name = window._containerName;\n    if (!name) return;\n\n    var body = document.getElementById(\"all-tags-body\");\n    var preview = document.getElementById(\"all-tags-preview\");\n\n    fetch(\"/api/containers/\" + encodeURIComponent(name) + \"/tags\")\n        .then(function(r) { return r.json(); })\n        .then(function(tags) {\n            if (!tags || tags.length === 0) {\n                if (body) body.innerHTML = '<div class=\"accordion-empty\">No tags found.</div>';\n                if (preview) preview.textContent = \"None\";\n                return;\n            }\n            if (preview) preview.textContent = tags.length + \" tags\";\n            var html = '<div class=\"tag-list\">';\n            for (var i = 0; i < tags.length; i++) {\n                html += '<span class=\"badge badge-muted tag-item\">' + escapeHtml(tags[i]) + '</span>';\n            }\n            html += '</div>';\n            if (body) body.innerHTML = html;\n        })\n        .catch(function() {\n            if (body) body.innerHTML = '<div class=\"accordion-empty\">Failed to load tags.</div>';\n            if (preview) preview.textContent = \"Error\";\n        });\n}\n\nfunction updateToVersion(name, hostId) {\n    var sel = document.getElementById(\"version-select\");\n    if (!sel || !sel.value) return;\n    var tag = sel.value;\n    var url = \"/api/containers/\" + encodeURIComponent(name) + \"/update-to-version\";\n    if (hostId) url += \"?host=\" + encodeURIComponent(hostId);\n    showConfirm(\"Update to Version\",\n        \"<p>Update <strong>\" + name + \"</strong> to <code>\" + tag + \"</code>?</p>\"\n    ).then(function(confirmed) {\n        if (!confirmed) return;\n        fetch(url, {\n            method: \"POST\",\n            headers: {\"Content-Type\": \"application/json\"},\n            body: JSON.stringify({tag: tag})\n        })\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            if (data.error) { showToast(data.error, \"error\"); }\n            else { showToast(data.message || \"Update started\", \"success\"); }\n        })\n        .catch(function() { showToast(\"Failed to trigger version update\", \"error\"); });\n    });\n}\n\nfunction applyBulkPolicy() {\n    var selectedContainers = _getSelectedContainers();\n    var names = [];\n    var keys = Object.keys(selectedContainers);\n    for (var i = 0; i < keys.length; i++) {\n        if (selectedContainers[keys[i]]) names.push(keys[i]);\n    }\n    if (names.length === 0) return;\n\n    var policyEl = document.getElementById(\"bulk-policy\");\n    var policy = policyEl ? policyEl.value : \"manual\";\n\n    // Step 1: Preview \u2014 ask the backend what would change.\n    fetch(\"/api/bulk/policy\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ containers: names, policy: policy })\n    })\n        .then(function (resp) {\n            return resp.json().then(function (data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function (result) {\n            if (!result.ok) {\n                showToast(result.data.error || \"Failed to preview bulk policy change\", \"error\");\n                return;\n            }\n\n            var preview = result.data;\n            var changeCount = preview.changes ? preview.changes.length : 0;\n            var blockedCount = preview.blocked ? preview.blocked.length : 0;\n            var unchangedCount = preview.unchanged ? preview.unchanged.length : 0;\n\n            if (changeCount === 0) {\n                var msg = \"No changes to apply\";\n                if (blockedCount > 0) msg += \" (\" + blockedCount + \" blocked)\";\n                if (unchangedCount > 0) msg += \" (\" + unchangedCount + \" already \" + policy + \")\";\n                showToast(msg, \"info\");\n                return;\n            }\n\n            // Build styled preview HTML for the confirm modal.\n            var bodyHTML = \"\";\n            for (var i = 0; i < preview.changes.length; i++) {\n                var c = preview.changes[i];\n                bodyHTML += '<div class=\"confirm-change-row\"><span class=\"confirm-change-name\">' + escapeHTML(c.name) + '</span> <span class=\"badge badge-muted\">' + escapeHTML(c.from) + '</span> \\u2192 <span class=\"badge badge-info\">' + escapeHTML(c.to) + '</span></div>';\n            }\n            if (blockedCount > 0) {\n                bodyHTML += '<div class=\"confirm-section-label\">Blocked (' + blockedCount + ')</div>';\n                for (var b = 0; b < preview.blocked.length; b++) {\n                    bodyHTML += '<div class=\"confirm-muted-row\">' + escapeHTML(preview.blocked[b].name) + ' \\u2014 ' + escapeHTML(preview.blocked[b].reason) + '</div>';\n                }\n            }\n            if (unchangedCount > 0) {\n                bodyHTML += '<div class=\"confirm-section-label\">Unchanged (' + unchangedCount + ')</div>';\n                for (var u = 0; u < preview.unchanged.length; u++) {\n                    bodyHTML += '<div class=\"confirm-muted-row\">' + escapeHTML(preview.unchanged[u].name) + ' \\u2014 ' + escapeHTML(preview.unchanged[u].reason) + '</div>';\n                }\n            }\n\n            // Step 2: User confirms via styled modal.\n            var confirmTitle = \"Change policy to \\u2018\" + escapeHTML(policy) + \"\\u2019 for \" + changeCount + \" container\" + (changeCount !== 1 ? \"s\" : \"\") + \"?\";\n            showConfirm(confirmTitle, bodyHTML).then(function(confirmed) {\n                if (!confirmed) return;\n\n                // Step 3: Confirm \u2014 send with confirm: true to apply.\n                fetch(\"/api/bulk/policy\", {\n                    method: \"POST\",\n                    headers: { \"Content-Type\": \"application/json\" },\n                    body: JSON.stringify({ containers: names, policy: policy, confirm: true })\n                })\n                    .then(function (resp2) {\n                        return resp2.json().then(function (data2) {\n                            return { ok: resp2.ok, data: data2 };\n                        });\n                    })\n                    .then(function (confirmResult) {\n                        if (!confirmResult.ok) {\n                            showToast(confirmResult.data.error || \"Failed to apply bulk policy change\", \"error\");\n                            return;\n                        }\n\n                        var applied = confirmResult.data.applied || 0;\n                        showToast(\"Policy changed to '\" + policy + \"' for \" + applied + \" container\" + (applied !== 1 ? \"s\" : \"\"), \"success\");\n\n                        // Refresh affected rows to reflect new policy values.\n                        for (var r = 0; r < preview.changes.length; r++) {\n                            if (window.updateContainerRow) window.updateContainerRow(preview.changes[r].name);\n                        }\n\n                        // Clear selection and exit manage mode.\n                        if (window.clearSelection) window.clearSelection();\n                        if (_getManageMode() && window.toggleManageMode) window.toggleManageMode();\n                    })\n                    .catch(function () {\n                        showToast(\"Network error \u2014 could not apply bulk policy change\", \"error\");\n                    });\n            });\n        })\n        .catch(function () {\n            showToast(\"Network error \u2014 could not preview bulk policy change\", \"error\");\n        });\n}\n\n\nfunction getBulkInProgress() { return _bulkInProgress; }\n\nexport {\n    removeQueueRow,\n    toggleQueueAccordion,\n    approveUpdate,\n    ignoreUpdate,\n    rejectUpdate,\n    getBulkInProgress,\n    bulkQueueAction,\n    approveAll,\n    ignoreAll,\n    rejectAll,\n    triggerUpdate,\n    triggerCheck,\n    triggerRollback,\n    changePolicy,\n    triggerScan,\n    triggerSelfUpdate,\n    switchToGHCR,\n    loadAllTags,\n    updateToVersion,\n    applyBulkPolicy\n};\n", "/* ============================================================\n   7b. Swarm Service Toggle & Actions\n   ============================================================ */\n\nimport { showToast, apiPost } from \"./utils.js\";\n\nfunction escapeHtml(str) {\n    if (!str) return \"\";\n    return str\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\n// isSafeURL validates that a URL string starts with http:// or https://.\nfunction isSafeURL(url) {\n    return typeof url === \"string\" && (url.indexOf(\"https://\") === 0 || url.indexOf(\"http://\") === 0);\n}\n\n// showBadgeSpinner from sse.js \u2014 inlined to avoid circular deps.\nfunction showBadgeSpinner(wrap) {\n    wrap.setAttribute(\"data-pending\", \"\");\n}\n\n// applyRegistryBadges from sse.js \u2014 access via window.\nfunction _applyRegistryBadges() {\n    if (window.applyRegistryBadges) window.applyRegistryBadges();\n}\n\nfunction toggleSvc(headerRow) {\n    var group = headerRow.closest(\".svc-group\");\n    if (!group) return;\n    group.classList.toggle(\"svc-collapsed\");\n}\n\nfunction triggerSvcUpdate(name, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    if (btn) {\n        btn.classList.add(\"loading\");\n        btn.disabled = true;\n        window._svcLoadingBtns = window._svcLoadingBtns || {};\n        window._svcLoadingBtns[name] = btn;\n        // Safety timeout \u2014 clear after 60s even if SSE never fires.\n        setTimeout(function() {\n            if (window._svcLoadingBtns && window._svcLoadingBtns[name]) {\n                window._svcLoadingBtns[name].classList.remove(\"loading\");\n                window._svcLoadingBtns[name].disabled = false;\n                delete window._svcLoadingBtns[name];\n            }\n        }, 60000);\n    }\n    apiPost(\n        \"/api/services/\" + encodeURIComponent(name) + \"/update\",\n        null,\n        \"Service update started for \" + name,\n        \"Failed to trigger service update\"\n    );\n    // Poll multiple times \u2014 Swarm updates take 10-30s to converge.\n    var delays = [2000, 5000, 10000, 20000];\n    for (var i = 0; i < delays.length; i++) {\n        (function(d) {\n            setTimeout(function() { refreshServiceRow(name); }, d);\n        })(delays[i]);\n    }\n}\n\nfunction changeSvcPolicy(name, newPolicy) {\n    // Services use the same policy endpoint as containers.\n    apiPost(\n        \"/api/containers/\" + encodeURIComponent(name) + \"/policy\",\n        { policy: newPolicy },\n        \"Policy changed to \" + newPolicy + \" for \" + name,\n        \"Failed to change policy\"\n    );\n}\n\nfunction rollbackSvc(name, event) {\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    if (btn) {\n        btn.classList.add(\"loading\");\n        btn.disabled = true;\n        window._svcLoadingBtns = window._svcLoadingBtns || {};\n        window._svcLoadingBtns[\"rb:\" + name] = btn;\n        setTimeout(function() {\n            if (window._svcLoadingBtns && window._svcLoadingBtns[\"rb:\" + name]) {\n                window._svcLoadingBtns[\"rb:\" + name].classList.remove(\"loading\");\n                window._svcLoadingBtns[\"rb:\" + name].disabled = false;\n                delete window._svcLoadingBtns[\"rb:\" + name];\n            }\n        }, 60000);\n    }\n    apiPost(\n        \"/api/services/\" + encodeURIComponent(name) + \"/rollback\",\n        null,\n        \"Rollback started for \" + name,\n        \"Failed to rollback \" + name\n    );\n    // Poll multiple times \u2014 Swarm rollback takes 10-30s to converge.\n    var delays = [2000, 5000, 10000, 20000];\n    for (var i = 0; i < delays.length; i++) {\n        (function(d) {\n            setTimeout(function() { refreshServiceRow(name); }, d);\n        })(delays[i]);\n    }\n}\n\n// Cache of task data for scaled-to-0 services. Preserved across refreshes\n// so task rows persistently show as \"shutdown\" instead of disappearing.\nvar _svcTaskCache = {};\n\nfunction scaleSvc(name, replicas, wrap) {\n    if (wrap) showBadgeSpinner(wrap);\n\n    // Scaling to 0: cache current tasks, then mark rows as \"shutdown\".\n    if (replicas === 0) {\n        var group = document.querySelector('.svc-group[data-service=\"' + name + '\"]');\n        if (group) {\n            // Capture task data from DOM before Swarm removes them.\n            var taskRows = group.querySelectorAll(\".svc-task-row\");\n            var cached = [];\n            for (var t = 0; t < taskRows.length; t++) {\n                var nodeCell = taskRows[t].querySelector(\".svc-node\");\n                var tagCell = taskRows[t].querySelector(\".mono\");\n                cached.push({\n                    NodeText: nodeCell ? nodeCell.textContent : \"\",\n                    Tag: tagCell ? tagCell.textContent : \"\"\n                });\n                // Immediately mark as shutdown.\n                var stateCell = taskRows[t].querySelector(\".badge\");\n                if (stateCell) {\n                    stateCell.textContent = \"shutdown\";\n                    stateCell.className = \"badge badge-error\";\n                    stateCell.title = \"\";\n                }\n            }\n            if (cached.length > 0) _svcTaskCache[name] = cached;\n        }\n    } else {\n        // Scaling up: clear cache so refreshServiceRow uses live data.\n        delete _svcTaskCache[name];\n    }\n\n    apiPost(\n        \"/api/services/\" + encodeURIComponent(name) + \"/scale\",\n        { replicas: replicas },\n        \"Scaled \" + name + \" to \" + replicas + \" replicas\",\n        \"Failed to scale \" + name\n    );\n    // Poll multiple times \u2014 Swarm scaling takes 5-15s to converge.\n    var delays = [2000, 5000, 10000, 20000];\n    for (var i = 0; i < delays.length; i++) {\n        (function(d) {\n            setTimeout(function() { refreshServiceRow(name); }, d);\n        })(delays[i]);\n    }\n}\n\nfunction refreshServiceRow(name) {\n    fetch(\"/api/services/\" + encodeURIComponent(name) + \"/detail\")\n        .then(function(r) { return r.json(); })\n        .then(function(svc) {\n            var group = document.querySelector('.svc-group[data-service=\"' + name + '\"]');\n            if (!group) return;\n            var header = group.querySelector(\".svc-header\");\n\n            // Fully rebuild the scale badge wrap to ensure hover button is always present.\n            var wrap = group.querySelector(\".status-badge-wrap[data-service]\");\n            if (wrap) {\n                wrap.style.pointerEvents = \"\";\n                wrap.removeAttribute(\"data-pending\");\n                var prevReplicas = svc.PrevReplicas || parseInt(wrap.getAttribute(\"data-prev-replicas\"), 10) || 1;\n                if (svc.DesiredReplicas > 0) {\n                    var replicaClass = (svc.RunningReplicas === svc.DesiredReplicas) ? \"svc-replicas-healthy\" :\n                        (svc.RunningReplicas > 0) ? \"svc-replicas-degraded\" : \"svc-replicas-down\";\n                    wrap.setAttribute(\"data-prev-replicas\", svc.DesiredReplicas);\n                    wrap.innerHTML = '<span class=\"badge svc-replicas ' + replicaClass + ' badge-default\">' +\n                        escapeHtml(svc.Replicas || '') + '</span>' +\n                        '<span class=\"badge badge-error badge-hover\" onclick=\"event.stopPropagation(); scaleSvc(\\'' +\n                        escapeHtml(name) + '\\', 0, this.closest(\\'.status-badge-wrap\\'))\">Scale to 0</span>';\n                } else {\n                    wrap.setAttribute(\"data-prev-replicas\", prevReplicas);\n                    wrap.innerHTML = '<span class=\"badge svc-replicas svc-replicas-down badge-default\">' +\n                        escapeHtml(svc.Replicas || '0/0') + '</span>' +\n                        '<span class=\"badge badge-success badge-hover\" onclick=\"event.stopPropagation(); scaleSvc(\\'' +\n                        escapeHtml(name) + '\\', ' + (prevReplicas > 0 ? prevReplicas : 1) + ', this.closest(\\'.status-badge-wrap\\'))\">Scale up</span>';\n                }\n            }\n\n            // Update image/version display in header.\n            // All dynamic values are sanitised through escapeHtml before DOM insertion.\n            // URLs come from our own API (server-computed), not user input.\n            if (header) {\n                var imgCell = header.querySelector(\".cell-image\");\n                if (imgCell && svc.Tag) {\n                    // Remove existing registry badge \u2014 applyRegistryBadges() will re-add it.\n                    var oldBadge = imgCell.querySelector(\".registry-badge\");\n                    if (oldBadge) oldBadge.remove();\n\n                    var rvSpan = (svc.ResolvedVersion) ? ' <span class=\"resolved-ver\">(' + escapeHtml(svc.ResolvedVersion) + ')</span>' : '';\n\n                    if (svc.NewestVersion) {\n                        var verHtml = escapeHtml(svc.NewestVersion);\n                        if (svc.VersionURL && isSafeURL(svc.VersionURL)) {\n                            verHtml = '<a href=\"' + escapeHtml(svc.VersionURL) + '\" target=\"_blank\" rel=\"noopener\" class=\"version-new version-link\">' + escapeHtml(svc.NewestVersion) + '</a>';\n                        } else {\n                            verHtml = '<span class=\"version-new\">' + verHtml + '</span>';\n                        }\n                        imgCell.innerHTML = '<span class=\"version-current\">' + escapeHtml(svc.Tag) + rvSpan + '</span>' +\n                            ' <span class=\"version-arrow\">&rarr;</span> ' + verHtml;\n                    } else {\n                        var tagHtml = escapeHtml(svc.Tag) + rvSpan;\n                        if (svc.ChangelogURL && isSafeURL(svc.ChangelogURL)) {\n                            imgCell.innerHTML = '<a href=\"' + escapeHtml(svc.ChangelogURL) + '\" target=\"_blank\" rel=\"noopener\" class=\"version-link\">' + tagHtml + '</a>';\n                        } else {\n                            imgCell.innerHTML = tagHtml;\n                        }\n                    }\n                    imgCell.setAttribute(\"title\", svc.Image || \"\");\n                    _applyRegistryBadges();\n                }\n\n                // Update has-update class.\n                if (svc.HasUpdate) {\n                    header.classList.add(\"has-update\");\n                } else {\n                    header.classList.remove(\"has-update\");\n                }\n\n                // Update action buttons (all dynamic values passed through escapeHtml).\n                // But if the update is still in progress (loading btn tracked), keep the\n                // spinner alive on the newly rendered button.\n                var actionCell = header.querySelector(\"td:last-child .btn-group\");\n                if (actionCell) {\n                    var isUpdating = window._svcLoadingBtns && window._svcLoadingBtns[name];\n                    var btns = \"\";\n                    if (svc.HasUpdate && svc.Policy !== \"pinned\") {\n                        btns += '<button class=\"btn btn-warning btn-sm' + (isUpdating ? ' loading' : '') + '\"' +\n                            (isUpdating ? ' disabled' : '') +\n                            ' onclick=\"event.stopPropagation(); triggerSvcUpdate(\\'' + escapeHtml(name) + '\\', event)\">Update</button>';\n                    }\n                    // Rollback only available on service detail page \u2014 not on dashboard.\n                    btns += '<a href=\"/service/' + encodeURIComponent(name) + '\" class=\"btn btn-sm\" onclick=\"event.stopPropagation()\">Details</a>';\n                    actionCell.innerHTML = btns;\n\n                    if (isUpdating) {\n                        var newBtn = actionCell.querySelector(\".btn-warning\");\n                        if (newBtn) window._svcLoadingBtns[name] = newBtn;\n                    }\n                }\n            }\n\n            // Clear loading buttons only when update is truly done (no HasUpdate means\n            // it succeeded, or UpdateStatus changed from what triggered the action).\n            // The SSE \"service update succeeded\" event will fire refreshServiceRow again,\n            // and at that point HasUpdate will be false \u2014 so the Update button won't be\n            // rendered at all, naturally clearing the spinner.\n            // We only force-clear here if the button is gone from the DOM entirely.\n            if (window._svcLoadingBtns) {\n                var b = window._svcLoadingBtns[name];\n                if (b && !b.isConnected) {\n                    delete window._svcLoadingBtns[name];\n                }\n            }\n\n            // Update expanded task rows.\n            var taskRows = group.querySelectorAll(\".svc-task-row\");\n            // Remove existing task rows.\n            for (var t = taskRows.length - 1; t >= 0; t--) {\n                taskRows[t].remove();\n            }\n            // Rebuild task rows from fresh data.\n            var taskHeader = group.querySelector(\".svc-header\");\n            if (taskHeader && svc.Tasks && svc.Tasks.length > 0) {\n                for (var t = 0; t < svc.Tasks.length; t++) {\n                    var task = svc.Tasks[t];\n                    var tr = document.createElement(\"tr\");\n                    tr.className = \"svc-task-row\";\n                    var stateBadge;\n                    if (task.State === \"running\") {\n                        stateBadge = '<span class=\"badge badge-success\">running</span>';\n                    } else if (task.State === \"preparing\") {\n                        stateBadge = '<span class=\"badge badge-info\">preparing</span>';\n                    } else {\n                        stateBadge = '<span class=\"badge badge-error\" title=\"' + escapeHtml(task.Error || '') + '\">' + escapeHtml(task.State) + '</span>';\n                    }\n                    var nodeDisplay = escapeHtml(task.NodeName);\n                    if (task.NodeAddr) {\n                        nodeDisplay += ' <span class=\"svc-node-addr\">(' + escapeHtml(task.NodeAddr) + ')</span>';\n                    }\n                    tr.innerHTML = '<td></td>' +\n                        '<td class=\"svc-node\">' + nodeDisplay + '</td>' +\n                        '<td class=\"mono\">' + escapeHtml(task.Tag || '') + '</td>' +\n                        '<td></td>' +\n                        '<td>' + stateBadge + '</td>' +\n                        '<td></td>';\n                    // Insert task rows after the header row.\n                    taskHeader.parentNode.insertBefore(tr, taskHeader.nextSibling);\n                }\n            } else if (taskHeader && svc.DesiredReplicas === 0) {\n                // Scaled to 0: show cached tasks as \"shutdown\" if available,\n                // otherwise fall back to a placeholder.\n                var cached = _svcTaskCache[name];\n                if (cached && cached.length > 0) {\n                    for (var t = cached.length - 1; t >= 0; t--) {\n                        var tr = document.createElement(\"tr\");\n                        tr.className = \"svc-task-row\";\n                        tr.innerHTML = '<td></td>' +\n                            '<td class=\"svc-node\">' + escapeHtml(cached[t].NodeText || '') + '</td>' +\n                            '<td class=\"mono\">' + escapeHtml(cached[t].Tag || '') + '</td>' +\n                            '<td></td>' +\n                            '<td><span class=\"badge badge-error\">shutdown</span></td>' +\n                            '<td></td>';\n                        taskHeader.parentNode.insertBefore(tr, taskHeader.nextSibling);\n                    }\n                } else {\n                    var tr = document.createElement(\"tr\");\n                    tr.className = \"svc-task-row\";\n                    tr.innerHTML = '<td></td><td colspan=\"4\" class=\"text-muted\" style=\"padding:var(--sp-3)\">Service scaled to 0 \\u2014 no active tasks</td><td></td>';\n                    taskHeader.parentNode.insertBefore(tr, taskHeader.nextSibling);\n                }\n            }\n\n            group.classList.add(\"row-updated\");\n            setTimeout(function() { group.classList.remove(\"row-updated\"); }, 300);\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\n\nexport {\n    toggleSvc,\n    triggerSvcUpdate,\n    changeSvcPolicy,\n    rollbackSvc,\n    scaleSvc,\n    refreshServiceRow\n};\n", "/* ============================================================\n   11. SSE Real-time Updates\n   11a. Live Row Updates, GHCR Alternatives\n   11b. Digest Banner\n   ============================================================ */\n\nimport { showToast, queueBatchToast } from \"./utils.js\";\n\n// Module-level state shared with other modules via window in main.js.\nvar ghcrAlternatives = {};\n\nvar sseReloadTimer = null;\n\nfunction scheduleReload() {\n    // Only full-reload on pages that render the container table (dashboard).\n    // Other pages (settings, history, queue, etc.) don't need reloading.\n    if (!document.getElementById(\"container-table\")) return;\n    if (sseReloadTimer) clearTimeout(sseReloadTimer);\n    sseReloadTimer = setTimeout(function () {\n        window.location.reload();\n    }, 800);\n}\n\n// Debounced reload for the queue page. Longer delay (2s) so rapid SSE events\n// from batch approvals don't cause repeated reloads.\nvar _queueReloadTimer = null;\nfunction scheduleQueueReload() {\n    if (_queueReloadTimer) clearTimeout(_queueReloadTimer);\n    _queueReloadTimer = setTimeout(function () {\n        _queueReloadTimer = null;\n        window.location.reload();\n    }, 2000);\n}\n\n/* ------------------------------------------------------------\n   11a. Live Row Updates \u2014 targeted DOM patching via partial endpoint\n   ------------------------------------------------------------ */\n\nfunction updateContainerRow(name, hostId) {\n    var enc = encodeURIComponent(name);\n    var url = \"/api/containers/\" + enc + \"/row\";\n    if (hostId) url += \"?host=\" + encodeURIComponent(hostId);\n    fetch(url)\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            if (!data.html) return;\n\n            // Update stats counters.\n            updateStats(data.total, data.running, data.pending);\n\n            // Parse the server-rendered HTML (from Go templates, not user input)\n            // into DOM nodes using a temporary tbody element.\n            var temp = document.createElement(\"tbody\");\n            temp.innerHTML = data.html; // Safe: server-rendered Go template HTML, no user content\n\n            var selector = 'tr.container-row[data-name=\"' + name + '\"]';\n            if (hostId) {\n                selector += '[data-host=\"' + hostId + '\"]';\n            } else {\n                selector += '[data-host=\"\"]';\n            }\n            var oldRow = document.querySelector(selector);\n\n            if (oldRow) {\n                var newRow = temp.querySelector(\".container-row\");\n\n                if (newRow) {\n                    oldRow.replaceWith(newRow);\n                    newRow.classList.add(\"row-updated\");\n                }\n\n                // Reapply checkbox state from selectedContainers after DOM patch.\n                var newCb = newRow ? newRow.querySelector(\".row-select\") : null;\n                var _selCont = window._dashboardSelectedContainers || {};\n                if (newCb && _selCont[newCb.value]) {\n                    newCb.checked = true;\n                }\n                if (window.recomputeSelectionState) window.recomputeSelectionState();\n            }\n\n            // Reapply badges and filters after DOM patch.\n            applyRegistryBadges();\n            if (window.applyFiltersAndSort) window.applyFiltersAndSort();\n            if (window.recalcTabStats) window.recalcTabStats();\n\n            // Clear completed action and re-apply spinners for still-pending ones.\n            clearPendingBadge(name, hostId);\n            reapplyBadgeSpinners();\n\n            // Preserve update button loading state across row replacement.\n            // Only keep spinning if the server confirms update is in-flight\n            // (template renders .btn-warning.loading when Maintenance=true).\n            if (window._updateLoadingBtns) {\n                var updKey = (hostId || \"\") + \"::\" + name;\n                if (window._updateLoadingBtns[updKey]) {\n                    var sel = 'tr.container-row[data-name=\"' + name + '\"]';\n                    if (hostId) sel += '[data-host=\"' + hostId + '\"]';\n                    var row = document.querySelector(sel);\n                    var updBtn = row ? row.querySelector(\".btn-warning.loading\") : null;\n                    if (updBtn) {\n                        // Server says update still in-flight \u2014 keep tracking.\n                        window._updateLoadingBtns[updKey] = updBtn;\n                    } else {\n                        // Update done (success/failure) or no button \u2014 clean up.\n                        delete window._updateLoadingBtns[updKey];\n                    }\n                }\n            }\n        })\n        .catch(function() {\n            // Fallback: full reload on error.\n            scheduleReload();\n        });\n}\n\nfunction updateStats(total, running, pending) {\n    var stats = document.getElementById(\"stats\");\n    if (!stats) return;\n    var values = stats.querySelectorAll(\".stat-value\");\n    var newVals = [total, running, pending];\n    for (var i = 0; i < values.length && i < newVals.length; i++) {\n        if (values[i] && String(values[i].textContent).trim() !== String(newVals[i])) {\n            values[i].textContent = newVals[i];\n            values[i].classList.remove(\"stat-changed\");\n            // Force reflow to restart animation.\n            void values[i].offsetWidth;\n            values[i].classList.add(\"stat-changed\");\n        }\n    }\n    updatePendingColor(pending);\n}\n\nfunction refreshDashboardStats() {\n    if (!document.getElementById(\"stats\")) return;\n    fetch(\"/api/stats\", {credentials: \"same-origin\"})\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            updateStats(data.total, data.running, data.pending);\n        })\n        .catch(function() {});\n}\n\nfunction updatePendingColor(pending) {\n    var stats = document.getElementById(\"stats\");\n    if (!stats) return;\n    var pendingEl = stats.querySelectorAll(\".stat-value\")[2];\n    if (!pendingEl) return;\n    if (pending === 0 || pending === \"0\") {\n        pendingEl.className = \"stat-value success\";\n    } else {\n        pendingEl.className = \"stat-value warning\";\n    }\n}\n\nvar pendingBadgeActions = {};\n\nfunction showBadgeSpinner(wrap) {\n    wrap.setAttribute(\"data-pending\", \"\");\n}\n\nfunction reapplyBadgeSpinners() {\n    for (var key in pendingBadgeActions) {\n        var parts = key.split(\"::\");\n        var h = parts[0], n = parts[1];\n        var selector = '.status-badge-wrap[data-name=\"' + n + '\"]';\n        if (h) selector += '[data-host-id=\"' + h + '\"]';\n        var wrap = document.querySelector(selector);\n        if (wrap) wrap.setAttribute(\"data-pending\", \"\");\n    }\n}\n\nfunction clearPendingBadge(name, hostId) {\n    var key = (hostId || \"\") + \"::\" + name;\n    delete pendingBadgeActions[key];\n}\n\nfunction setConnectionStatus(connected) {\n    var dot = document.getElementById(\"sse-indicator\");\n    var label = document.getElementById(\"sse-label\");\n    if (!dot) return;\n\n    if (connected) {\n        dot.className = \"status-dot connected\";\n        dot.title = \"Live\";\n        if (label) {\n            label.textContent = \"Live\";\n            label.classList.add(\"connected\");\n        }\n    } else {\n        dot.className = \"status-dot disconnected\";\n        dot.title = \"Reconnecting\\u2026\";\n        if (label) {\n            label.textContent = \"Reconnecting\\u2026\";\n            label.classList.remove(\"connected\");\n        }\n    }\n}\n\nfunction initSSE() {\n    if (typeof EventSource === \"undefined\") return;\n\n    var es = new EventSource(\"/api/events\");\n\n    es.addEventListener(\"connected\", function () {\n        if (localStorage.getItem(\"sentinel-self-updating\")) {\n            localStorage.removeItem(\"sentinel-self-updating\");\n            window.location.reload();\n            return;\n        }\n        setConnectionStatus(true);\n    });\n\n    es.addEventListener(\"container_update\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            // Show toast with appropriate severity.\n            var toastType = \"info\";\n            if (data.message) {\n                if (data.message.indexOf(\"failed\") !== -1) toastType = \"error\";\n                else if (data.message.indexOf(\"success\") !== -1) toastType = \"success\";\n            }\n            queueBatchToast(data.message || (\"Update: \" + data.container_name), toastType);\n            if (data.container_name) {\n                updateContainerRow(data.container_name, data.host_id);\n                return;\n            }\n        } catch (_) {}\n        scheduleReload();\n    });\n\n    es.addEventListener(\"container_state\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            if (data.container_name) {\n                updateContainerRow(data.container_name, data.host_id);\n                return;\n            }\n        } catch (_) {}\n        scheduleReload();\n    });\n\n    es.addEventListener(\"queue_change\", function (e) {\n        var data;\n        try {\n            data = JSON.parse(e.data);\n            queueBatchToast(data.message || \"Queue updated\", \"info\");\n        } catch (_) { data = {}; }\n        if (document.getElementById(\"container-table\")) {\n            // Dashboard: refresh the affected row so UPDATE AVAILABLE appears.\n            if (data.container_name) {\n                updateContainerRow(data.container_name, data.host_id);\n            }\n            refreshDashboardStats();\n            scheduleDigestBannerRefresh();\n            updateQueueBadge();\n        } else if (document.querySelector(\".queue-table\") && !(window._queueBulkInProgress && window._queueBulkInProgress())) {\n            scheduleQueueReload();\n        } else {\n            updateQueueBadge();\n        }\n    });\n\n    es.addEventListener(\"scan_complete\", function (e) {\n        // Clear scan button spinner.\n        var scanBtn = document.getElementById(\"scan-btn\");\n        if (scanBtn) { scanBtn.classList.remove(\"loading\"); scanBtn.disabled = false; }\n        // Re-check pause state on scan events.\n        if (window.checkPauseState) window.checkPauseState();\n        if (window.refreshLastScan) window.refreshLastScan();\n        // On dashboard, rows are already patched by container_update events.\n        // Refresh stats and banner to ensure counts are accurate.\n        if (document.getElementById(\"container-table\")) {\n            refreshDashboardStats();\n            if (window.recalcTabStats) window.recalcTabStats();\n            scheduleDigestBannerRefresh();\n        } else {\n            scheduleReload();\n        }\n        // Show warning toast if containers were skipped or failed.\n        var msg = e.data || \"\";\n        var rl = (msg.match(/rate_limited=(\\d+)/) || [])[1] | 0;\n        var failed = (msg.match(/failed=(\\d+)/) || [])[1] | 0;\n        if (rl > 0 || failed > 0) {\n            var parts = [];\n            if (rl > 0) parts.push(rl + \" skipped (rate limit)\");\n            if (failed > 0) parts.push(failed + \" failed\");\n            showToast(\"Scan complete \\u2014 \" + parts.join(\", \"), \"warning\");\n        }\n    });\n\n    es.addEventListener(\"rate_limits\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            var health = data.message || \"ok\";\n            var el = document.getElementById(\"rate-limit-status\");\n            if (!el) return;\n            var labels = { ok: \"Healthy\", low: \"Needs Attention\", exhausted: \"Exhausted\" };\n            el.textContent = labels[health] || \"Healthy\";\n            el.className = \"stat-value\";\n            if (health === \"ok\") el.classList.add(\"success\");\n            else if (health === \"low\") el.classList.add(\"warning\");\n            else if (health === \"exhausted\") el.classList.add(\"error\");\n        } catch (_) {}\n    });\n\n    es.addEventListener(\"settings_change\", function () {\n        if (window.checkPauseState) window.checkPauseState();\n    });\n\n    es.addEventListener(\"policy_change\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            showToast(data.message || (\"Policy changed: \" + data.container_name), \"info\");\n            if (data.container_name) {\n                updateContainerRow(data.container_name, data.host_id);\n                return;\n            }\n        } catch (_) {}\n        scheduleReload();\n    });\n\n    es.addEventListener(\"digest_ready\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            showToast(data.message || \"Digest ready\", \"info\");\n        } catch (_) {}\n        loadDigestBanner();\n    });\n\n    es.addEventListener(\"service_update\", function (e) {\n        try {\n            var data = JSON.parse(e.data);\n            queueBatchToast(data.message || (\"Service: \" + data.container_name), \"info\");\n            if (data.container_name) {\n                if (window.refreshServiceRow) window.refreshServiceRow(data.container_name);\n                // Swarm updates converge over 10-30s; do a second refresh.\n                setTimeout(function() { if (window.refreshServiceRow) window.refreshServiceRow(data.container_name); }, 10000);\n            }\n        } catch (_) {}\n    });\n\n    es.addEventListener(\"ghcr_check\", function() {\n        loadGHCRAlternatives();\n    });\n\n    es.addEventListener(\"cluster_host\", function(e) {\n        try {\n            var data = JSON.parse(e.data);\n            var hostID = data.host_id || data.host_name || \"\";\n            var msg = data.message || \"\";\n            var offline = msg.indexOf(\"disconnected\") !== -1;\n            var group = document.querySelector('tbody.host-group[data-host=\"' + hostID + '\"]');\n            if (!group) return;\n            var header = group.querySelector(\".host-header\");\n            var dot = group.querySelector(\".host-status-dot\");\n            var inner = group.querySelector(\".host-header-inner\");\n            var existing = group.querySelector(\".host-offline-link\");\n            if (header) {\n                if (offline) header.classList.add(\"host-offline\");\n                else header.classList.remove(\"host-offline\");\n            }\n            if (dot) {\n                dot.className = \"host-status-dot \" + (offline ? \"disconnected\" : \"connected\");\n            }\n            if (offline && !existing && inner) {\n                var link = document.createElement(\"a\");\n                link.href = \"/cluster\";\n                link.className = \"host-offline-link\";\n                link.textContent = \"OFFLINE \\u2014 TROUBLESHOOT\";\n                link.onclick = function(ev) { ev.stopPropagation(); };\n                var count = inner.querySelector(\".host-count\");\n                inner.insertBefore(link, count);\n            } else if (!offline && existing) {\n                existing.remove();\n            }\n        } catch (_) {}\n    });\n\n    es.onopen = function () {\n        setConnectionStatus(true);\n    };\n\n    es.onerror = function () {\n        setConnectionStatus(false);\n    };\n}\n\n/* ------------------------------------------------------------\n   11a. GHCR Alternatives\n   ------------------------------------------------------------ */\n\nfunction loadGHCRAlternatives() {\n    fetch(\"/api/ghcr/alternatives\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            ghcrAlternatives = {};\n            if (data && data.length) {\n                for (var i = 0; i < data.length; i++) {\n                    var alt = data[i];\n                    if (alt.available) {\n                        ghcrAlternatives[alt.docker_hub_image] = alt;\n                    }\n                }\n            }\n            applyGHCRBadges();\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\nvar registryStyles = {\n    \"docker.io\":        { label: \"Hub\",   cls: \"registry-badge-hub\" },\n    \"ghcr.io\":          { label: \"GHCR\",  cls: \"registry-badge-ghcr\" },\n    \"lscr.io\":          { label: \"LSCR\",  cls: \"registry-badge-lscr\" },\n    \"docker.gitea.com\": { label: \"Gitea\", cls: \"registry-badge-gitea\" }\n};\n\nfunction applyRegistryBadges() {\n    var rows = document.querySelectorAll(\"tr.container-row, tr.svc-header\");\n    rows.forEach(function(row) {\n        var imageCell = row.querySelector(\".cell-image\");\n        if (!imageCell) return;\n\n        // Skip if already badged.\n        if (imageCell.querySelector(\".registry-badge\")) return;\n\n        var reg = row.getAttribute(\"data-registry\") || \"docker.io\";\n        var style = registryStyles[reg] || registryStyles[\"docker.io\"];\n\n        var badge = document.createElement(\"span\");\n        badge.className = \"registry-badge \" + style.cls;\n        badge.textContent = style.label;\n        imageCell.insertBefore(badge, imageCell.firstChild);\n    });\n}\n\nfunction applyGHCRBadges() {\n    var rows = document.querySelectorAll(\"tr.container-row\");\n    rows.forEach(function(row) {\n        // Remove existing GHCR badges first (avoid duplicates on refresh).\n        var existing = row.querySelector(\".ghcr-badge\");\n        if (existing) existing.remove();\n\n        var imageCell = row.querySelector(\".cell-image\");\n        if (!imageCell) return;\n\n        var title = imageCell.getAttribute(\"title\") || \"\";\n        // Only for docker.io images (no dots in first segment, or explicit docker.io prefix).\n        // Skip library/* (official images like nginx, redis).\n        var repo = parseDockerRepo(title);\n        if (!repo || !ghcrAlternatives[repo]) return;\n\n        var badge = document.createElement(\"span\");\n        badge.className = \"ghcr-badge\";\n        badge.textContent = \"GHCR\";\n        badge.title = \"Also available on GitHub Container Registry\";\n        imageCell.appendChild(badge);\n    });\n}\n\nfunction parseDockerRepo(imageRef) {\n    // Strip tag/digest\n    var ref = imageRef.split(\"@\")[0].split(\":\")[0];\n    // Remove explicit docker.io/ prefix\n    ref = ref.replace(/^docker\\.io\\//, \"\");\n    // Skip non-docker.io registries (contain dots in first segment)\n    var firstSegment = ref.split(\"/\")[0];\n    if (firstSegment.indexOf(\".\") !== -1) return null;\n    // Skip official library images (single segment like \"nginx\")\n    if (ref.indexOf(\"/\") === -1) return null;\n    // Skip library/ prefix images\n    if (ref.indexOf(\"library/\") === 0) return null;\n    return ref;\n}\n\nfunction renderGHCRAlternatives() {\n    var container = document.getElementById(\"ghcr-alternatives-table\");\n    if (!container) return;\n\n    fetch(\"/api/ghcr/alternatives\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            if (!data || data.length === 0) {\n                while (container.firstChild) container.removeChild(container.firstChild);\n                var emptyP = document.createElement(\"p\");\n                emptyP.className = \"text-muted\";\n                emptyP.textContent = \"No GHCR alternatives detected yet. Alternatives are checked after each scan.\";\n                container.appendChild(emptyP);\n                return;\n            }\n\n            var table = document.createElement(\"table\");\n            table.className = \"table-readonly\";\n            var thead = document.createElement(\"thead\");\n            var headRow = document.createElement(\"tr\");\n            [\"Docker Hub Image\", \"GHCR Equivalent\", \"Status\"].forEach(function(label) {\n                var th = document.createElement(\"th\");\n                th.textContent = label;\n                headRow.appendChild(th);\n            });\n            thead.appendChild(headRow);\n            table.appendChild(thead);\n\n            var tbody = document.createElement(\"tbody\");\n            data.forEach(function(alt) {\n                var tr = document.createElement(\"tr\");\n\n                var tdHub = document.createElement(\"td\");\n                tdHub.className = \"mono\";\n                tdHub.textContent = alt.docker_hub_image + \":\" + alt.tag;\n                tr.appendChild(tdHub);\n\n                var tdGHCR = document.createElement(\"td\");\n                tdGHCR.className = \"mono\";\n                tdGHCR.textContent = alt.available ? alt.ghcr_image + \":\" + alt.tag : \"\\u2014\";\n                tr.appendChild(tdGHCR);\n\n                var tdStatus = document.createElement(\"td\");\n                var statusBadge = document.createElement(\"span\");\n                if (!alt.available) {\n                    statusBadge.className = \"badge badge-muted\";\n                    statusBadge.textContent = \"Not available\";\n                } else if (alt.digest_match) {\n                    statusBadge.className = \"badge badge-success\";\n                    statusBadge.textContent = \"Identical\";\n                } else {\n                    statusBadge.className = \"badge badge-warning\";\n                    statusBadge.textContent = \"Different build\";\n                }\n                tdStatus.appendChild(statusBadge);\n                tr.appendChild(tdStatus);\n\n                tbody.appendChild(tr);\n            });\n            table.appendChild(tbody);\n\n            while (container.firstChild) container.removeChild(container.firstChild);\n            container.appendChild(table);\n        })\n        .catch(function() {\n            while (container.firstChild) container.removeChild(container.firstChild);\n            var errP = document.createElement(\"p\");\n            errP.className = \"text-muted\";\n            errP.textContent = \"Failed to load GHCR alternatives.\";\n            container.appendChild(errP);\n        });\n}\n\n/* ------------------------------------------------------------\n   11b. Digest Banner\n   ------------------------------------------------------------ */\n\nfunction loadDigestBanner() {\n    var banner = document.getElementById(\"digest-banner\");\n    if (!banner) return;\n\n    fetch(\"/api/digest/banner\", {credentials: \"same-origin\"})\n        .then(function (res) { return res.json(); })\n        .then(function (data) {\n            if (data.count > 0) {\n                var text = \"Pending updates: \" + data.pending.join(\", \") +\n                    \" (\" + data.count + \" container\" + (data.count === 1 ? \"\" : \"s\") + \" awaiting action)\";\n                document.getElementById(\"digest-banner-text\").textContent = text;\n                banner.style.display = \"\";\n                banner.classList.remove(\"banner-hidden\");\n            } else {\n                banner.classList.add(\"banner-hidden\");\n            }\n        })\n        .catch(function () { banner.classList.add(\"banner-hidden\"); });\n}\n\nvar _digestBannerTimer = null;\n\n// Debounced digest banner refresh \u2014 avoids flickering when multiple events fire.\nfunction scheduleDigestBannerRefresh() {\n    if (_digestBannerTimer) clearTimeout(_digestBannerTimer);\n    _digestBannerTimer = setTimeout(function () {\n        _digestBannerTimer = null;\n        loadDigestBanner();\n    }, 1500);\n}\n\n// Update the queue badge count in the nav. Uses the lightweight /api/queue/count\n// endpoint to avoid blocking on release notes lookups. Debounced so rapid\n// calls (e.g. bulk row removals) collapse into a single fetch.\nvar _queueBadgeTimer = null;\nfunction updateQueueBadge() {\n    if (_queueBadgeTimer) clearTimeout(_queueBadgeTimer);\n    _queueBadgeTimer = setTimeout(function () {\n        _queueBadgeTimer = null;\n        fetch(\"/api/queue/count\", {credentials: \"same-origin\"})\n            .then(function (r) { return r.json(); })\n            .then(function (data) {\n                var badges = document.querySelectorAll(\".nav-badge\");\n                var count = typeof data.count === \"number\" ? data.count : 0;\n                for (var i = 0; i < badges.length; i++) {\n                    var link = badges[i].closest(\"a\");\n                    if (link && link.href && link.href.indexOf(\"/queue\") !== -1) {\n                        badges[i].textContent = count;\n                        badges[i].style.display = count > 0 ? \"\" : \"none\";\n                    }\n                }\n            })\n            .catch(function () {});\n    }, 300);\n}\n\nfunction dismissDigestBanner() {\n    var banner = document.getElementById(\"digest-banner\");\n    if (banner) banner.classList.add(\"banner-hidden\");\n\n    fetch(\"/api/digest/banner/dismiss\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: \"{}\"\n    });\n}\n\n\nexport {\n    scheduleReload,\n    scheduleQueueReload,\n    updateContainerRow,\n    updateStats,\n    refreshDashboardStats,\n    updatePendingColor,\n    showBadgeSpinner,\n    reapplyBadgeSpinners,\n    clearPendingBadge,\n    setConnectionStatus,\n    initSSE,\n    ghcrAlternatives,\n    loadGHCRAlternatives,\n    applyRegistryBadges,\n    applyGHCRBadges,\n    parseDockerRepo,\n    renderGHCRAlternatives,\n    loadDigestBanner,\n    scheduleDigestBannerRefresh,\n    updateQueueBadge,\n    dismissDigestBanner,\n    pendingBadgeActions\n};\n", "/* ============================================================\n   2. Settings Page\n   2a. Settings Helpers\n   ============================================================ */\n\nimport { showToast } from \"./utils.js\";\n\n/* ------------------------------------------------------------\n   2. Settings Page \u2014 initSettingsPage\n   ------------------------------------------------------------ */\n\nfunction initSettingsPage() {\n    var themeSelect = document.getElementById(\"theme-select\");\n    var stackSelect = document.getElementById(\"stack-default\");\n    var sectionSelect = document.getElementById(\"section-default\");\n    if (!themeSelect) return;\n\n    themeSelect.value = localStorage.getItem(\"sentinel-theme\") || \"auto\";\n    stackSelect.value = localStorage.getItem(\"sentinel-stacks\") || \"collapsed\";\n    if (sectionSelect) sectionSelect.value = localStorage.getItem(\"sentinel-sections\") || \"remember\";\n\n    themeSelect.addEventListener(\"change\", function() {\n        if (window.applyTheme) window.applyTheme(themeSelect.value);\n        localStorage.setItem(\"sentinel-theme\", themeSelect.value);\n        showToast(\"Theme updated\", \"success\");\n    });\n    stackSelect.addEventListener(\"change\", function() {\n        localStorage.setItem(\"sentinel-stacks\", stackSelect.value);\n        showToast(\"Stack default updated\", \"success\");\n    });\n    if (sectionSelect) {\n        sectionSelect.addEventListener(\"change\", function() {\n            localStorage.setItem(\"sentinel-sections\", sectionSelect.value);\n            if (sectionSelect.value !== \"remember\") {\n                // Clear saved accordion state when switching away from \"remember\"\n                clearAccordionState();\n            }\n            showToast(\"Section default updated\", \"success\");\n        });\n    }\n\n    // Fetch all settings and populate controls.\n    fetch(\"/api/settings\")\n        .then(function(r) { return r.json(); })\n        .then(function(settings) {\n            // Poll interval.\n            var pollSelect = document.getElementById(\"poll-interval\");\n            if (pollSelect) {\n                var current = settings[\"SENTINEL_POLL_INTERVAL\"] || settings[\"poll_interval\"] || \"6h0m0s\";\n                var normalised = normaliseDuration(current);\n                var matched = selectOptionByValue(pollSelect, normalised);\n                if (!matched && normalised !== \"\") {\n                    pollSelect.value = \"custom\";\n                    populateCustomDuration(\"poll\", normalised);\n                }\n            }\n\n            // Default policy.\n            var policySelect = document.getElementById(\"default-policy\");\n            if (policySelect) {\n                var policy = settings[\"default_policy\"] || settings[\"SENTINEL_DEFAULT_POLICY\"] || \"manual\";\n                selectOptionByValue(policySelect, policy);\n            }\n\n            // Rollback policy.\n            var rbSelect = document.getElementById(\"rollback-policy\");\n            if (rbSelect) {\n                var rbPolicy = settings[\"rollback_policy\"] || settings[\"SENTINEL_ROLLBACK_POLICY\"] || \"\";\n                selectOptionByValue(rbSelect, rbPolicy);\n            }\n\n            // Grace period.\n            var graceSelect = document.getElementById(\"grace-period\");\n            if (graceSelect) {\n                var grace = settings[\"grace_period\"] || settings[\"SENTINEL_GRACE_PERIOD\"] || \"30s\";\n                var graceNorm = normaliseDuration(grace);\n                var graceMatched = selectOptionByValue(graceSelect, graceNorm);\n                if (!graceMatched && graceNorm !== \"\") {\n                    graceSelect.value = \"custom\";\n                    populateCustomDuration(\"grace\", graceNorm);\n                }\n            }\n\n            // Latest auto-update toggle.\n            var latestAutoToggle = document.getElementById(\"latest-auto-toggle\");\n            if (latestAutoToggle) {\n                var latestAuto = settings[\"latest_auto_update\"] !== \"false\";\n                latestAutoToggle.checked = latestAuto;\n                updateLatestAutoText(latestAuto);\n            }\n\n            // Pause toggle.\n            var pauseToggle = document.getElementById(\"pause-toggle\");\n            if (pauseToggle) {\n                var paused = settings[\"paused\"] === \"true\";\n                pauseToggle.checked = paused;\n                updatePauseToggleText(paused);\n            }\n\n            // Container filters.\n            var filtersArea = document.getElementById(\"container-filters\");\n            if (filtersArea) {\n                var filters = settings[\"filters\"] || \"\";\n                filtersArea.value = filters;\n            }\n\n            // Image cleanup toggle.\n            var imageCleanupToggle = document.getElementById(\"image-cleanup-toggle\");\n            if (imageCleanupToggle) {\n                var imageCleanup = settings[\"image_cleanup\"] === \"true\";\n                imageCleanupToggle.checked = imageCleanup;\n                updateToggleText(\"image-cleanup-text\", imageCleanup);\n            }\n\n            // Cron schedule.\n            var cronInput = document.getElementById(\"cron-schedule\");\n            if (cronInput) {\n                cronInput.value = settings[\"schedule\"] || \"\";\n            }\n\n            // Dependency-aware toggle.\n            var depAwareToggle = document.getElementById(\"dep-aware-toggle\");\n            if (depAwareToggle) {\n                var depAware = settings[\"dependency_aware\"] === \"true\";\n                depAwareToggle.checked = depAware;\n                updateToggleText(\"dep-aware-text\", depAware);\n            }\n\n            // Hooks enabled toggle.\n            var hooksToggle = document.getElementById(\"hooks-toggle\");\n            if (hooksToggle) {\n                var hooksEnabled = settings[\"hooks_enabled\"] === \"true\";\n                hooksToggle.checked = hooksEnabled;\n                updateToggleText(\"hooks-toggle-text\", hooksEnabled);\n            }\n\n            // Write hook labels toggle.\n            var hooksLabelsToggle = document.getElementById(\"hooks-labels-toggle\");\n            if (hooksLabelsToggle) {\n                var hooksLabels = settings[\"hooks_write_labels\"] === \"true\";\n                hooksLabelsToggle.checked = hooksLabels;\n                updateToggleText(\"hooks-labels-text\", hooksLabels);\n            }\n\n            // Dry-run toggle.\n            var dryRunToggle = document.getElementById(\"dry-run-toggle\");\n            if (dryRunToggle) {\n                var dryRun = settings[\"dry_run\"] === \"true\";\n                dryRunToggle.checked = dryRun;\n                updateToggleText(\"dry-run-text\", dryRun);\n            }\n\n            // Pull-only toggle.\n            var pullOnlyToggle = document.getElementById(\"pull-only-toggle\");\n            if (pullOnlyToggle) {\n                var pullOnly = settings[\"pull_only\"] === \"true\";\n                pullOnlyToggle.checked = pullOnly;\n                updateToggleText(\"pull-only-text\", pullOnly);\n            }\n\n            // Update delay.\n            var updateDelayInput = document.getElementById(\"update-delay\");\n            if (updateDelayInput) {\n                updateDelayInput.value = settings[\"update_delay\"] || \"\";\n            }\n\n            // Maintenance window.\n            var maintenanceWindowInput = document.getElementById(\"maintenance-window\");\n            if (maintenanceWindowInput) {\n                maintenanceWindowInput.value = settings[\"maintenance_window\"] || \"\";\n            }\n\n            // Compose sync toggle.\n            var composeSyncToggle = document.getElementById(\"compose-sync-toggle\");\n            if (composeSyncToggle) {\n                var composeSync = settings[\"compose_sync\"] === \"true\";\n                composeSyncToggle.checked = composeSync;\n                updateToggleText(\"compose-sync-text\", composeSync);\n            }\n\n            // Image backup toggle.\n            var imageBackupToggle = document.getElementById(\"image-backup-toggle\");\n            if (imageBackupToggle) {\n                var imageBackup = settings[\"image_backup\"] === \"true\";\n                imageBackupToggle.checked = imageBackup;\n                updateToggleText(\"image-backup-text\", imageBackup);\n            }\n\n            // Show stopped toggle.\n            var showStoppedToggle = document.getElementById(\"show-stopped-toggle\");\n            if (showStoppedToggle) {\n                var showStopped = settings[\"show_stopped\"] === \"true\";\n                showStoppedToggle.checked = showStopped;\n                updateToggleText(\"show-stopped-text\", showStopped);\n            }\n\n            // Remove volumes toggle.\n            var removeVolumesToggle = document.getElementById(\"remove-volumes-toggle\");\n            if (removeVolumesToggle) {\n                var removeVolumes = settings[\"remove_volumes\"] === \"true\";\n                removeVolumesToggle.checked = removeVolumes;\n                updateToggleText(\"remove-volumes-text\", removeVolumes);\n            }\n\n            // Scan concurrency input.\n            var scanConcInput = document.getElementById(\"scan-concurrency-input\");\n            if (scanConcInput && settings[\"scan_concurrency\"]) {\n                var sc = parseInt(settings[\"scan_concurrency\"], 10);\n                if (!isNaN(sc) && sc >= 1) { scanConcInput.value = sc; }\n            }\n\n            // HA discovery toggle.\n            var haToggle = document.getElementById(\"ha-discovery-toggle\");\n            if (haToggle) {\n                var haEnabled = settings[\"ha_discovery_enabled\"] === \"true\";\n                haToggle.checked = haEnabled;\n                updateToggleText(\"ha-discovery-text\", haEnabled);\n            }\n            var haPrefixInput = document.getElementById(\"ha-discovery-prefix\");\n            if (haPrefixInput) {\n                haPrefixInput.value = settings[\"ha_discovery_prefix\"] || \"homeassistant\";\n            }\n\n            updateScanPreviews();\n        })\n        .catch(function() { /* ignore -- falls back to defaults */ });\n\n    // Tab navigation.\n    var tabBtns = document.querySelectorAll(\".tab-btn\");\n    var tabPanels = document.querySelectorAll(\".tab-panel\");\n    if (tabBtns.length > 0) {\n        var savedTab = localStorage.getItem(\"sentinel-settings-tab\");\n        if (savedTab) {\n            // Validate saved tab still exists (tabs were renamed).\n            var tabExists = false;\n            for (var i = 0; i < tabBtns.length; i++) {\n                if (tabBtns[i].getAttribute(\"data-tab\") === savedTab) {\n                    tabExists = true;\n                    break;\n                }\n            }\n            if (tabExists) {\n                for (var i = 0; i < tabBtns.length; i++) {\n                    var isTarget = tabBtns[i].getAttribute(\"data-tab\") === savedTab;\n                    tabBtns[i].classList.toggle(\"active\", isTarget);\n                    tabBtns[i].setAttribute(\"aria-selected\", isTarget ? \"true\" : \"false\");\n                }\n                for (var i = 0; i < tabPanels.length; i++) {\n                    tabPanels[i].classList.toggle(\"active\", tabPanels[i].id === \"tab-\" + savedTab);\n                }\n            }\n        }\n\n        for (var i = 0; i < tabBtns.length; i++) {\n            tabBtns[i].addEventListener(\"click\", function() {\n                var tab = this.getAttribute(\"data-tab\");\n                localStorage.setItem(\"sentinel-settings-tab\", tab);\n                for (var j = 0; j < tabBtns.length; j++) {\n                    tabBtns[j].classList.toggle(\"active\", tabBtns[j] === this);\n                    tabBtns[j].setAttribute(\"aria-selected\", tabBtns[j] === this ? \"true\" : \"false\");\n                }\n                for (var j = 0; j < tabPanels.length; j++) {\n                    tabPanels[j].classList.toggle(\"active\", tabPanels[j].id === \"tab-\" + tab);\n                }\n            });\n        }\n    }\n\n    // Auto-select Security tab when auth is off (no user button visible).\n    var securityBtn = document.querySelector('[data-tab=\"security\"]');\n    if (securityBtn && !document.querySelector('.nav-user-btn')) {\n        securityBtn.click();\n    }\n\n    // Load notification channels.\n    if (window.loadNotificationChannels) window.loadNotificationChannels();\n\n    // Load digest settings, per-container notification preferences, and templates.\n    if (window.loadDigestSettings) window.loadDigestSettings();\n    if (window.loadContainerNotifyPrefs) window.loadContainerNotifyPrefs();\n    if (window.loadNotifyTemplates) window.loadNotifyTemplates();\n\n    // Load registry credentials and rate limits.\n    if (window.loadRegistries) window.loadRegistries();\n\n    // Load release note sources.\n    if (window.loadReleaseSources) window.loadReleaseSources();\n\n    // Load GHCR alternatives table on registries tab.\n    if (window.renderGHCRAlternatives) window.renderGHCRAlternatives();\n\n    // Load About info.\n    if (window.loadAboutInfo) window.loadAboutInfo();\n\n    // Load cluster settings.\n    if (window.loadClusterSettings) window.loadClusterSettings();\n\n    // Load webhook settings.\n    loadWebhookSettings();\n}\n\n// Local helper \u2014 clearAccordionState is also in dashboard.js but duplicated\n// here to avoid circular import (settings page doesn't need full dashboard).\nfunction clearAccordionState() {\n    var keys = [];\n    for (var i = 0; i < localStorage.length; i++) {\n        var k = localStorage.key(i);\n        if (k && k.indexOf(\"sentinel-acc::\") === 0) keys.push(k);\n    }\n    for (var j = 0; j < keys.length; j++) {\n        localStorage.removeItem(keys[j]);\n    }\n}\n\n/* ------------------------------------------------------------\n   2a. Settings Helpers\n   ------------------------------------------------------------ */\n\nfunction normaliseDuration(dur) {\n    return dur\n        .replace(\"0m0s\", \"\").replace(\"0s\", \"\")\n        .replace(/^0h/, \"\");\n}\n\nfunction onCustomUnitChange(prefix) {\n    var unitEl = document.getElementById(prefix + \"-custom-unit\");\n    var valEl = document.getElementById(prefix + \"-custom-value\");\n    var btnEl = document.getElementById(prefix + \"-custom-btn\");\n    var hasUnit = unitEl && unitEl.value !== \"\";\n    if (valEl) {\n        valEl.disabled = !hasUnit;\n        if (hasUnit) valEl.focus();\n    }\n    if (btnEl) btnEl.disabled = !hasUnit;\n}\n\nfunction parseDuration(dur) {\n    var match = dur.match(/^(\\d+)(s|m|h)$/);\n    if (!match) return null;\n    return { value: match[1], unit: match[2] };\n}\n\nfunction populateCustomDuration(prefix, normalised) {\n    var wrap = document.getElementById(prefix + \"-custom-wrap\");\n    var unitEl = document.getElementById(prefix + \"-custom-unit\");\n    var valEl = document.getElementById(prefix + \"-custom-value\");\n    var btnEl = document.getElementById(prefix + \"-custom-btn\");\n    if (!wrap) return;\n\n    wrap.style.display = \"\";\n    var parsed = parseDuration(normalised);\n    if (parsed && unitEl && valEl) {\n        unitEl.value = parsed.unit;\n        valEl.value = parsed.value;\n        valEl.disabled = false;\n        if (btnEl) btnEl.disabled = false;\n    }\n}\n\nfunction selectOptionByValue(selectEl, value) {\n    for (var i = 0; i < selectEl.options.length; i++) {\n        if (selectEl.options[i].value === value) {\n            selectEl.selectedIndex = i;\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction updatePauseToggleText(paused) {\n    var text = document.getElementById(\"pause-toggle-text\");\n    if (text) {\n        text.textContent = paused ? \"Paused\" : \"Off\";\n    }\n}\n\nfunction updateScanPreviews() {\n    // Scan Schedule preview\n    var el = document.getElementById(\"scan-schedule-preview\");\n    if (el) {\n        var pauseToggle = document.getElementById(\"pause-toggle\");\n        var cronInput = document.getElementById(\"cron-schedule\");\n        var pollSelect = document.getElementById(\"poll-interval\");\n        if (pauseToggle && pauseToggle.checked) {\n            el.textContent = \"Paused\";\n        } else if (cronInput && cronInput.value) {\n            el.textContent = \"Cron: \" + cronInput.value;\n        } else if (pollSelect) {\n            if (pollSelect.value === \"custom\") {\n                var cv = (document.getElementById(\"poll-custom-value\") || {}).value || \"\";\n                var cu = (document.getElementById(\"poll-custom-unit\") || {}).value || \"\";\n                el.textContent = cv && cu ? \"Every \" + cv + cu : \"Custom\";\n            } else {\n                el.textContent = \"Every \" + pollSelect.options[pollSelect.selectedIndex].text;\n            }\n        }\n    }\n    // Update Policy preview\n    var el2 = document.getElementById(\"update-policy-preview\");\n    if (el2) {\n        var policySelect = document.getElementById(\"default-policy\");\n        var txt = \"Default: \" + (policySelect ? policySelect.value : \"manual\");\n        var mwInput = document.getElementById(\"maintenance-window\");\n        if (mwInput && mwInput.value) {\n            txt += \", window \" + mwInput.value;\n        } else {\n            var graceSelect = document.getElementById(\"grace-period\");\n            if (graceSelect) {\n                if (graceSelect.value === \"custom\") {\n                    var gv = (document.getElementById(\"grace-custom-value\") || {}).value || \"\";\n                    var gu = (document.getElementById(\"grace-custom-unit\") || {}).value || \"\";\n                    txt += gv && gu ? \", grace \" + gv + gu : \"\";\n                } else {\n                    txt += \", grace \" + graceSelect.options[graceSelect.selectedIndex].text;\n                }\n            }\n        }\n        el2.textContent = txt;\n    }\n}\n\nfunction onPollIntervalChange(value) {\n    var wrap = document.getElementById(\"poll-custom-wrap\");\n    if (value === \"custom\") {\n        if (wrap) wrap.style.display = \"\";\n        updateScanPreviews();\n        return;\n    }\n    if (wrap) wrap.style.display = \"none\";\n    setPollInterval(value);\n    updateScanPreviews();\n}\n\nfunction applyCustomPollInterval() {\n    var unit = document.getElementById(\"poll-custom-unit\");\n    var val = document.getElementById(\"poll-custom-value\");\n    if (!unit || !val || !unit.value || !val.value) return;\n    setPollInterval(val.value + unit.value);\n    updateScanPreviews();\n}\n\nfunction setPollInterval(interval) {\n    fetch(\"/api/settings/poll-interval\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ interval: interval })\n    })\n        .then(function (resp) {\n            return resp.json().then(function (data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function (result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Poll interval updated\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to update poll interval\", \"error\");\n            }\n        })\n        .catch(function () {\n            showToast(\"Network error -- could not update poll interval\", \"error\");\n        });\n}\n\nfunction setDefaultPolicy(value) {\n    updateScanPreviews();\n    fetch(\"/api/settings/default-policy\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ policy: value })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Default policy updated\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to update default policy\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update default policy\", \"error\");\n        });\n}\n\nfunction setRollbackPolicy(value) {\n    fetch(\"/api/settings/rollback-policy\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ policy: value })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Rollback policy updated\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to update rollback policy\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update rollback policy\", \"error\");\n        });\n}\n\nfunction onGracePeriodChange(value) {\n    var wrap = document.getElementById(\"grace-custom-wrap\");\n    if (value === \"custom\") {\n        if (wrap) wrap.style.display = \"\";\n        updateScanPreviews();\n        return;\n    }\n    if (wrap) wrap.style.display = \"none\";\n    setGracePeriod(value);\n    updateScanPreviews();\n}\n\nfunction applyCustomGracePeriod() {\n    var unit = document.getElementById(\"grace-custom-unit\");\n    var val = document.getElementById(\"grace-custom-value\");\n    if (!unit || !val || !unit.value || !val.value) return;\n    setGracePeriod(val.value + unit.value);\n    updateScanPreviews();\n}\n\nfunction setGracePeriod(duration) {\n    fetch(\"/api/settings/grace-period\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ duration: duration })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Grace period updated\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to update grace period\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update grace period\", \"error\");\n        });\n}\n\nfunction setPauseState(paused) {\n    updatePauseToggleText(paused);\n    updateScanPreviews();\n    fetch(\"/api/settings/pause\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ paused: paused })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || (paused ? \"Scanning paused\" : \"Scanning resumed\"), \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to update pause state\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update pause state\", \"error\");\n        });\n}\n\nfunction updateLatestAutoText(enabled) {\n    var text = document.getElementById(\"latest-auto-text\");\n    if (text) {\n        text.textContent = enabled ? \"On\" : \"Off\";\n    }\n}\n\nfunction setLatestAutoUpdate(enabled) {\n    updateLatestAutoText(enabled);\n    fetch(\"/api/settings/latest-auto-update\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ enabled: enabled })\n    })\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            showToast(data.message || \"Setting updated\", \"success\");\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update setting\", \"error\");\n        });\n}\n\nfunction saveFilters() {\n    var textarea = document.getElementById(\"container-filters\");\n    if (!textarea) return;\n\n    var lines = textarea.value.split(\"\\n\");\n    var patterns = [];\n    for (var i = 0; i < lines.length; i++) {\n        var trimmed = lines[i].replace(/^\\s+|\\s+$/g, \"\");\n        if (trimmed !== \"\") {\n            patterns.push(trimmed);\n        }\n    }\n\n    fetch(\"/api/settings/filters\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ patterns: patterns })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Filters saved\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to save filters\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not save filters\", \"error\");\n        });\n}\n\nfunction updateToggleText(textId, enabled) {\n    var text = document.getElementById(textId);\n    if (text) {\n        text.textContent = enabled ? \"On\" : \"Off\";\n    }\n}\n\nfunction setImageCleanup(enabled) {\n    updateToggleText(\"image-cleanup-text\", enabled);\n    fetch(\"/api/settings/image-cleanup\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction saveCronSchedule() {\n    var input = document.getElementById(\"cron-schedule\");\n    if (!input) return;\n    updateScanPreviews();\n    fetch(\"/api/settings/schedule\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ schedule: input.value }) })\n        .then(function(resp) { return resp.json().then(function(data) { return { ok: resp.ok, data: data }; }); })\n        .then(function(result) {\n            if (result.ok) { showToast(result.data.message || \"Schedule updated\", \"success\"); }\n            else { showToast(result.data.error || \"Failed to update schedule\", \"error\"); }\n        })\n        .catch(function() { showToast(\"Network error -- could not update schedule\", \"error\"); });\n}\n\nfunction setDependencyAware(enabled) {\n    updateToggleText(\"dep-aware-text\", enabled);\n    fetch(\"/api/settings/dependency-aware\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setHooksEnabled(enabled) {\n    updateToggleText(\"hooks-toggle-text\", enabled);\n    fetch(\"/api/settings/hooks-enabled\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setHooksWriteLabels(enabled) {\n    updateToggleText(\"hooks-labels-text\", enabled);\n    fetch(\"/api/settings/hooks-write-labels\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setDryRun(enabled) {\n    updateToggleText(\"dry-run-text\", enabled);\n    fetch(\"/api/settings/dry-run\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setPullOnly(enabled) {\n    updateToggleText(\"pull-only-text\", enabled);\n    fetch(\"/api/settings/pull-only\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setComposeSync(enabled) {\n    updateToggleText(\"compose-sync-text\", enabled);\n    fetch(\"/api/settings/compose-sync\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setImageBackup(enabled) {\n    updateToggleText(\"image-backup-text\", enabled);\n    fetch(\"/api/settings/image-backup\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setShowStopped(enabled) {\n    updateToggleText(\"show-stopped-text\", enabled);\n    fetch(\"/api/settings/show-stopped\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setRemoveVolumes(enabled) {\n    updateToggleText(\"remove-volumes-text\", enabled);\n    fetch(\"/api/settings/remove-volumes\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setScanConcurrency() {\n    var input = document.getElementById(\"scan-concurrency-input\");\n    var n = parseInt(input ? input.value : \"1\", 10);\n    if (isNaN(n) || n < 1 || n > 20) {\n        showToast(\"Concurrency must be between 1 and 20\", \"error\");\n        return;\n    }\n    fetch(\"/api/settings/scan-concurrency\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ concurrency: n }) })\n        .then(function(r) { return r.json(); })\n        .then(function(data) { showToast(data.message || \"Setting updated\", \"success\"); })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction setHADiscovery(enabled) {\n    updateToggleText(\"ha-discovery-text\", enabled);\n    var prefix = (document.getElementById(\"ha-discovery-prefix\") || {}).value || \"\";\n    fetch(\"/api/settings/ha-discovery\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled, prefix: prefix }) })\n        .then(function(r) {\n            if (r.status === 204) { showToast(\"HA discovery \" + (enabled ? \"enabled\" : \"disabled\"), \"success\"); return; }\n            return r.json().then(function(d) { if (d.error) showToast(d.error, \"error\"); });\n        })\n        .catch(function() { showToast(\"Network error -- could not update setting\", \"error\"); });\n}\n\nfunction saveHADiscoveryPrefix() {\n    var prefix = (document.getElementById(\"ha-discovery-prefix\") || {}).value || \"\";\n    var enabled = (document.getElementById(\"ha-discovery-toggle\") || {}).checked || false;\n    fetch(\"/api/settings/ha-discovery\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ enabled: enabled, prefix: prefix }) })\n        .then(function(r) {\n            if (r.status === 204) { showToast(\"Discovery prefix saved\", \"success\"); return; }\n            return r.json().then(function(d) { if (d.error) showToast(d.error, \"error\"); });\n        })\n        .catch(function() { showToast(\"Network error -- could not save prefix\", \"error\"); });\n}\n\nfunction setUpdateDelay() {\n    var input = document.getElementById(\"update-delay\");\n    if (!input) return;\n    updateScanPreviews();\n    fetch(\"/api/settings/update-delay\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ duration: input.value }) })\n        .then(function(resp) { return resp.json().then(function(data) { return { ok: resp.ok, data: data }; }); })\n        .then(function(result) {\n            if (result.ok) { showToast(result.data.message || \"Update delay saved\", \"success\"); }\n            else { showToast(result.data.error || \"Failed to save update delay\", \"error\"); }\n        })\n        .catch(function() { showToast(\"Network error -- could not save update delay\", \"error\"); });\n}\n\nfunction toggleCollapsible(headerEl) {\n    var expanded = headerEl.getAttribute(\"aria-expanded\") === \"true\";\n    headerEl.setAttribute(\"aria-expanded\", expanded ? \"false\" : \"true\");\n    var body = headerEl.nextElementSibling;\n    if (body) {\n        body.style.display = expanded ? \"none\" : \"\";\n    }\n}\n\nfunction saveDockerTLS() {\n    var ca = (document.getElementById(\"docker-tls-ca\") || {}).value || \"\";\n    var cert = (document.getElementById(\"docker-tls-cert\") || {}).value || \"\";\n    var key = (document.getElementById(\"docker-tls-key\") || {}).value || \"\";\n\n    fetch(\"/api/settings/docker-tls\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ca: ca, cert: cert, key: key })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Docker TLS settings saved\", \"success\");\n                var banner = document.getElementById(\"general-restart-banner\");\n                if (banner) banner.style.display = \"block\";\n            } else {\n                showToast(result.data.error || \"Failed to save Docker TLS settings\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not save Docker TLS settings\", \"error\");\n        });\n}\n\nfunction testDockerTLS() {\n    var ca = (document.getElementById(\"docker-tls-ca\") || {}).value || \"\";\n    var cert = (document.getElementById(\"docker-tls-cert\") || {}).value || \"\";\n    var key = (document.getElementById(\"docker-tls-key\") || {}).value || \"\";\n\n    if (!ca || !cert || !key) {\n        showToast(\"All three certificate paths are required for testing\", \"error\");\n        return;\n    }\n\n    var btn = document.getElementById(\"docker-tls-test-btn\");\n    if (btn) btn.disabled = true;\n\n    fetch(\"/api/settings/docker-tls-test\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ca: ca, cert: cert, key: key })\n    })\n        .then(function(resp) { return resp.json(); })\n        .then(function(data) {\n            if (data.success) {\n                showToast(\"Docker TLS connection successful\", \"success\");\n            } else {\n                showToast(\"Connection failed: \" + (data.error || \"unknown error\"), \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not test Docker TLS connection\", \"error\");\n        })\n        .finally(function() {\n            if (btn) btn.disabled = false;\n        });\n}\n\n/* ------------------------------------------------------------\n   Webhook Settings\n   ------------------------------------------------------------ */\n\nfunction loadWebhookSettings() {\n    var toggle = document.getElementById(\"webhook-enabled-toggle\");\n    if (!toggle) return;\n\n    fetch(\"/api/settings/webhook-info\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            var enabled = data.enabled === \"true\";\n            toggle.checked = enabled;\n            updateToggleText(\"webhook-enabled-text\", enabled);\n            showWebhookConfig(enabled, data.secret || \"\");\n        })\n        .catch(function() { /* ignore -- falls back to defaults */ });\n}\n\nfunction showWebhookConfig(enabled, secret) {\n    var configDiv = document.getElementById(\"webhook-config\");\n    if (!configDiv) return;\n    configDiv.style.display = enabled ? \"\" : \"none\";\n\n    var urlInput = document.getElementById(\"webhook-url\");\n    if (urlInput) {\n        urlInput.value = window.location.origin + \"/api/webhook\";\n    }\n\n    var secretInput = document.getElementById(\"webhook-secret\");\n    if (secretInput) {\n        secretInput.value = secret;\n        // If the secret is masked (contains ****), show a hint.\n        var hint = document.getElementById(\"webhook-secret-hint\");\n        if (hint) {\n            hint.style.display = (secret && secret.indexOf(\"****\") !== -1) ? \"\" : \"none\";\n        }\n    }\n}\n\nfunction setWebhookEnabled(enabled) {\n    updateToggleText(\"webhook-enabled-text\", enabled);\n    fetch(\"/api/settings/webhook-enabled\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ enabled: enabled })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Setting updated\", \"success\");\n                // Reload webhook info to get the auto-generated secret.\n                loadWebhookSettings();\n            } else {\n                showToast(result.data.error || \"Failed to update setting\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not update setting\", \"error\");\n        });\n}\n\nfunction regenerateWebhookSecret() {\n    if (!confirm(\"This will invalidate all existing webhook integrations. Continue?\")) return;\n\n    fetch(\"/api/settings/webhook-secret\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" }\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                var secretInput = document.getElementById(\"webhook-secret\");\n                if (secretInput) secretInput.value = result.data.secret || \"\";\n                // Hide the masked hint \u2014 the full secret is now visible.\n                var hint = document.getElementById(\"webhook-secret-hint\");\n                if (hint) hint.style.display = \"none\";\n                showToast(\"Webhook secret regenerated \u2014 copy it now, it won't be shown again\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to regenerate secret\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not regenerate secret\", \"error\");\n        });\n}\n\nfunction copyWebhookURL() {\n    var input = document.getElementById(\"webhook-url\");\n    if (!input || !input.value) return;\n    navigator.clipboard.writeText(input.value).then(function() {\n        showToast(\"Webhook URL copied\", \"success\");\n    }).catch(function() {\n        input.select();\n        document.execCommand(\"copy\");\n        showToast(\"Webhook URL copied\", \"success\");\n    });\n}\n\nfunction copyWebhookSecret() {\n    var input = document.getElementById(\"webhook-secret\");\n    if (!input || !input.value) return;\n    navigator.clipboard.writeText(input.value).then(function() {\n        showToast(\"Webhook secret copied\", \"success\");\n    }).catch(function() {\n        input.select();\n        document.execCommand(\"copy\");\n        showToast(\"Webhook secret copied\", \"success\");\n    });\n}\n\n/* ------------------------------------------------------------\n   Maintenance Window\n   ------------------------------------------------------------ */\n\nfunction saveMaintenanceWindow() {\n    var input = document.getElementById(\"maintenance-window\");\n    if (!input) return;\n    updateScanPreviews();\n    fetch(\"/api/settings/maintenance-window\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ value: input.value.trim() })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Maintenance window saved\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to save maintenance window\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not save maintenance window\", \"error\");\n        });\n}\n\n/* ------------------------------------------------------------\n   Backup & Restore\n   ------------------------------------------------------------ */\n\nfunction exportConfig() {\n    var includeSecrets = document.getElementById(\"export-secrets-toggle\");\n    var qs = (includeSecrets && includeSecrets.checked) ? \"?secrets=true\" : \"\";\n    fetch(\"/api/config/export\" + qs)\n        .then(function(r) {\n            if (!r.ok) throw new Error(\"Export failed\");\n            return r.blob();\n        })\n        .then(function(blob) {\n            var a = document.createElement(\"a\");\n            a.href = URL.createObjectURL(blob);\n            a.download = \"sentinel-config-\" + new Date().toISOString().slice(0, 10) + \".json\";\n            a.click();\n            URL.revokeObjectURL(a.href);\n            showToast(\"Configuration exported\", \"success\");\n        })\n        .catch(function() {\n            showToast(\"Export failed\", \"error\");\n        });\n}\n\nfunction importConfig() {\n    var fileInput = document.getElementById(\"config-import-file\");\n    if (!fileInput || !fileInput.files.length) {\n        showToast(\"Select a file first\", \"error\");\n        return;\n    }\n\n    if (!confirm(\"Import will overwrite matching settings. Continue?\")) return;\n\n    var file = fileInput.files[0];\n    var reader = new FileReader();\n    reader.onload = function(e) {\n        fetch(\"/api/config/import\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: e.target.result\n        })\n            .then(function(r) { return r.json(); })\n            .then(function(data) {\n                if (data.error) {\n                    showToast(data.error, \"error\");\n                } else {\n                    showToast(data.message || \"Configuration imported\", \"success\");\n                    setTimeout(function() { location.reload(); }, 1000);\n                }\n            })\n            .catch(function() {\n                showToast(\"Import failed\", \"error\");\n            });\n    };\n    reader.readAsText(file);\n}\n\nexport {\n    initSettingsPage,\n    onPollIntervalChange,\n    onCustomUnitChange,\n    applyCustomPollInterval,\n    setDefaultPolicy,\n    setRollbackPolicy,\n    onGracePeriodChange,\n    applyCustomGracePeriod,\n    setLatestAutoUpdate,\n    setPauseState,\n    saveFilters,\n    setImageCleanup,\n    saveCronSchedule,\n    setDependencyAware,\n    setHooksEnabled,\n    setHooksWriteLabels,\n    setDryRun,\n    setPullOnly,\n    setUpdateDelay,\n    setComposeSync,\n    setImageBackup,\n    setShowStopped,\n    setRemoveVolumes,\n    setScanConcurrency,\n    setHADiscovery,\n    saveHADiscoveryPrefix,\n    updateToggleText,\n    toggleCollapsible,\n    saveDockerTLS,\n    testDockerTLS,\n    setWebhookEnabled,\n    regenerateWebhookSecret,\n    copyWebhookURL,\n    copyWebhookSecret,\n    saveMaintenanceWindow,\n    updateScanPreviews,\n    exportConfig,\n    importConfig\n};\n", "/* ============================================================\n   2b. Cluster Settings Tab\n   ============================================================ */\n\nimport { showToast } from \"./utils.js\";\n\n// Import updateToggleText from settings-core via window to avoid bundler issues.\nfunction _updateToggleText(textId, enabled) {\n    if (window.updateToggleText) {\n        window.updateToggleText(textId, enabled);\n    } else {\n        var text = document.getElementById(textId);\n        if (text) text.textContent = enabled ? \"On\" : \"Off\";\n    }\n}\n\nfunction loadClusterSettings() {\n    // Only run on the settings page (cluster-enabled element exists).\n    if (!document.getElementById(\"cluster-enabled\")) return;\n\n    fetch(\"/api/settings/cluster\")\n        .then(function(r) { return r.json(); })\n        .then(function(s) {\n            var enabled = s.enabled === \"true\";\n            document.getElementById(\"cluster-enabled\").checked = enabled;\n            _updateToggleText(\"cluster-enabled-text\", enabled);\n            document.getElementById(\"cluster-port\").value = s.port || \"9443\";\n            document.getElementById(\"cluster-grace\").value = s.grace_period || \"30m\";\n            document.getElementById(\"cluster-policy\").value = s.remote_policy || \"manual\";\n            toggleClusterFields(enabled);\n        })\n        .catch(function(err) {\n            console.error(\"Failed to load cluster settings:\", err);\n        });\n}\n\nfunction onClusterToggle(enabled) {\n    if (!enabled) {\n        if (!confirm(\"Disabling cluster mode will disconnect all agents. Continue?\")) {\n            document.getElementById(\"cluster-enabled\").checked = true;\n            return;\n        }\n    }\n    _updateToggleText(\"cluster-enabled-text\", enabled);\n    toggleClusterFields(enabled);\n    saveClusterSettings();\n}\n\nfunction toggleClusterFields(enabled) {\n    var fields = document.getElementById(\"cluster-fields\");\n    if (!fields) return;\n    if (enabled) {\n        fields.classList.remove(\"disabled\");\n    } else {\n        fields.classList.add(\"disabled\");\n    }\n}\n\nfunction saveClusterSettings() {\n    var enabled = document.getElementById(\"cluster-enabled\").checked;\n    fetch(\"/api/settings/cluster\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n            enabled: enabled,\n            port: document.getElementById(\"cluster-port\").value,\n            grace_period: document.getElementById(\"cluster-grace\").value,\n            remote_policy: document.getElementById(\"cluster-policy\").value\n        })\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) {\n                return { ok: resp.ok, data: data };\n            });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(\"Cluster settings saved\", \"success\");\n            } else {\n                showToast(result.data.error || \"Failed to save cluster settings\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error -- could not save cluster settings\", \"error\");\n        });\n}\n\nexport {\n    loadClusterSettings,\n    onClusterToggle,\n    toggleClusterFields,\n    saveClusterSettings\n};\n", "/* ============================================================\n   13. Notification Configuration - Multi-channel System\n   14. Digest Settings\n   14b. HTML Escape Helper (local version)\n   ============================================================ */\n\nimport { showToast, apiPost } from \"./utils.js\";\n\nvar EVENT_TYPES = [\n    { key: \"update_available\", label: \"Update Available\" },\n    { key: \"update_started\", label: \"Update Started\" },\n    { key: \"update_succeeded\", label: \"Update Succeeded\" },\n    { key: \"update_failed\", label: \"Update Failed\" },\n    { key: \"rollback_succeeded\", label: \"Rollback Succeeded\" },\n    { key: \"rollback_failed\", label: \"Rollback Failed\" },\n    { key: \"container_state\", label: \"State Change\" }\n];\n\n// Map legacy event keys (from older saved configs in BoltDB) to current constants.\nvar LEGACY_EVENT_KEYS = {\n    \"update_complete\": \"update_succeeded\",\n    \"rollback\": \"rollback_succeeded\",\n    \"state_change\": \"container_state\"\n};\n\nfunction canonicaliseEventKey(key) {\n    return LEGACY_EVENT_KEYS[key] || key;\n}\n\nvar PROVIDER_FIELDS = {\n    gotify: [\n        { key: \"url\", label: \"Server URL\", type: \"text\", placeholder: \"http://gotify:80\" },\n        { key: \"token\", label: \"App Token\", type: \"password\", placeholder: \"Token\" }\n    ],\n    webhook: [\n        { key: \"url\", label: \"URL\", type: \"text\", placeholder: \"https://example.com/webhook\" },\n        { key: \"headers\", label: \"Headers (JSON)\", type: \"text\", placeholder: '{\"Authorization\": \"Bearer ...\"}' }\n    ],\n    slack: [\n        { key: \"webhook_url\", label: \"Webhook URL\", type: \"text\", placeholder: \"https://hooks.slack.com/services/...\" }\n    ],\n    discord: [\n        { key: \"webhook_url\", label: \"Webhook URL\", type: \"text\", placeholder: \"https://discord.com/api/webhooks/...\" }\n    ],\n    ntfy: [\n        { key: \"server\", label: \"Server\", type: \"text\", placeholder: \"https://ntfy.sh\" },\n        { key: \"topic\", label: \"Topic\", type: \"text\", placeholder: \"sentinel\" },\n        { key: \"priority\", label: \"Priority\", type: \"text\", placeholder: \"3\" },\n        { key: \"token\", label: \"Token\", type: \"password\", placeholder: \"Bearer token (optional)\" },\n        { key: \"username\", label: \"Username\", type: \"text\", placeholder: \"Username (optional)\" },\n        { key: \"password\", label: \"Password\", type: \"password\", placeholder: \"Password (optional)\" }\n    ],\n    telegram: [\n        { key: \"bot_token\", label: \"Bot Token\", type: \"password\", placeholder: \"123456:ABC-DEF...\" },\n        { key: \"chat_id\", label: \"Chat ID\", type: \"text\", placeholder: \"-1001234567890\" }\n    ],\n    pushover: [\n        { key: \"app_token\", label: \"App Token\", type: \"password\", placeholder: \"Application token\" },\n        { key: \"user_key\", label: \"User Key\", type: \"password\", placeholder: \"User/group key\" }\n    ],\n    smtp: [\n        { key: \"host\", label: \"SMTP Server\", type: \"text\", placeholder: \"smtp.example.com\" },\n        { key: \"port\", label: \"Port\", type: \"text\", placeholder: \"587\" },\n        { key: \"from\", label: \"From\", type: \"text\", placeholder: \"sentinel@example.com\" },\n        { key: \"to\", label: \"To\", type: \"text\", placeholder: \"you@example.com\" },\n        { key: \"username\", label: \"Username\", type: \"text\", placeholder: \"Username (optional)\" },\n        { key: \"password\", label: \"Password\", type: \"password\", placeholder: \"Password (optional)\" },\n        { key: \"tls\", label: \"Use TLS\", type: \"text\", placeholder: \"true or false\" }\n    ],\n    apprise: [\n        { key: \"url\", label: \"Apprise API URL\", type: \"text\", placeholder: \"http://apprise:8000\" },\n        { key: \"tag\", label: \"Config Tag\", type: \"text\", placeholder: \"Tag for persistent config (optional)\" },\n        { key: \"urls\", label: \"Apprise URLs\", type: \"text\", placeholder: \"Apprise URL(s) for stateless mode (optional)\" }\n    ],\n    mqtt: [\n        { key: \"broker\", label: \"Broker URL\", type: \"text\", placeholder: \"tcp://mqtt:1883\" },\n        { key: \"topic\", label: \"Topic\", type: \"text\", placeholder: \"sentinel/events\" },\n        { key: \"client_id\", label: \"Client ID\", type: \"text\", placeholder: \"docker-sentinel (optional)\" },\n        { key: \"username\", label: \"Username\", type: \"text\", placeholder: \"Username (optional)\" },\n        { key: \"password\", label: \"Password\", type: \"password\", placeholder: \"Password (optional)\" },\n        { key: \"qos\", label: \"QoS\", type: \"text\", placeholder: \"0, 1, or 2 (default: 0)\" }\n    ],\n};\n\nvar notificationChannels = [];\n\nfunction loadNotificationChannels() {\n    fetch(\"/api/settings/notifications\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            if (Array.isArray(data)) {\n                notificationChannels = data;\n            } else {\n                notificationChannels = [];\n            }\n            renderChannels();\n        })\n        .catch(function() {\n            notificationChannels = [];\n            renderChannels();\n        });\n}\n\nfunction renderChannels() {\n    var container = document.getElementById(\"channel-list\");\n    if (!container) return;\n\n    while (container.firstChild) container.removeChild(container.firstChild);\n\n    if (notificationChannels.length === 0) {\n        var empty = document.createElement(\"div\");\n        empty.className = \"empty-state\";\n        empty.style.padding = \"var(--sp-8) var(--sp-4)\";\n        var emptyH = document.createElement(\"h3\");\n        emptyH.textContent = \"No notification channels\";\n        var emptyP = document.createElement(\"p\");\n        emptyP.textContent = \"Add a channel using the dropdown below to receive update notifications.\";\n        empty.appendChild(emptyH);\n        empty.appendChild(emptyP);\n        container.appendChild(empty);\n        return;\n    }\n\n    for (var i = 0; i < notificationChannels.length; i++) {\n        container.appendChild(buildChannelCard(i));\n    }\n}\n\nfunction buildChannelCard(index) {\n    var ch = notificationChannels[index];\n    var fields = PROVIDER_FIELDS[ch.type] || [];\n    var settings = {};\n    try { settings = JSON.parse(ch.settings || \"{}\"); } catch(e) { settings = ch.settings || {}; }\n\n    var card = document.createElement(\"div\");\n    card.className = \"channel-card\";\n    card.setAttribute(\"data-index\", index);\n\n    // Header: type badge + name input + enabled toggle + actions\n    var header = document.createElement(\"div\");\n    header.className = \"channel-card-header\";\n\n    var badge = document.createElement(\"span\");\n    badge.className = \"channel-type-badge\";\n    badge.textContent = ch.type;\n    header.appendChild(badge);\n\n    var nameInput = document.createElement(\"input\");\n    nameInput.className = \"channel-name-input\";\n    nameInput.type = \"text\";\n    nameInput.value = ch.name || \"\";\n    nameInput.placeholder = \"Channel name\";\n    nameInput.setAttribute(\"data-field\", \"name\");\n    header.appendChild(nameInput);\n\n    var actions = document.createElement(\"div\");\n    actions.className = \"channel-actions\";\n\n    var toggleLabel = document.createElement(\"label\");\n    toggleLabel.style.fontSize = \"0.75rem\";\n    toggleLabel.style.color = \"var(--fg-secondary)\";\n    toggleLabel.style.display = \"flex\";\n    toggleLabel.style.alignItems = \"center\";\n    toggleLabel.style.gap = \"6px\";\n\n    var toggle = document.createElement(\"input\");\n    toggle.type = \"checkbox\";\n    toggle.className = \"channel-toggle\";\n    toggle.checked = ch.enabled !== false;\n    toggle.setAttribute(\"data-field\", \"enabled\");\n    toggleLabel.appendChild(toggle);\n    toggleLabel.appendChild(document.createTextNode(\"Enabled\"));\n    actions.appendChild(toggleLabel);\n\n    var testBtn = document.createElement(\"button\");\n    testBtn.className = \"btn\";\n    testBtn.textContent = \"Test\";\n    testBtn.setAttribute(\"data-index\", index);\n    testBtn.onclick = function() { testChannel(parseInt(this.getAttribute(\"data-index\"))); };\n    actions.appendChild(testBtn);\n\n    var delBtn = document.createElement(\"button\");\n    delBtn.className = \"btn btn-error\";\n    delBtn.textContent = \"Delete\";\n    delBtn.setAttribute(\"data-index\", index);\n    delBtn.onclick = function() { deleteChannel(parseInt(this.getAttribute(\"data-index\"))); };\n    actions.appendChild(delBtn);\n\n    header.appendChild(actions);\n    card.appendChild(header);\n\n    // Provider-specific fields\n    var fieldsDiv = document.createElement(\"div\");\n    fieldsDiv.className = \"channel-fields\";\n\n    for (var f = 0; f < fields.length; f++) {\n        var field = fields[f];\n        var row = document.createElement(\"div\");\n        row.className = \"channel-field\";\n\n        var label = document.createElement(\"div\");\n        label.className = \"channel-field-label\";\n        label.textContent = field.label;\n        row.appendChild(label);\n\n        var input = document.createElement(\"input\");\n        input.className = \"channel-field-input\";\n        input.type = field.type || \"text\";\n        input.placeholder = field.placeholder || \"\";\n        input.setAttribute(\"data-setting\", field.key);\n\n        // Special handling for headers (object -> JSON string)\n        var val = settings[field.key];\n        if (field.key === \"headers\" && val && typeof val === \"object\") {\n            input.value = JSON.stringify(val);\n        } else if (field.key === \"priority\" && val !== undefined) {\n            input.value = String(val);\n        } else {\n            input.value = val || \"\";\n        }\n\n        row.appendChild(input);\n        fieldsDiv.appendChild(row);\n    }\n\n    card.appendChild(fieldsDiv);\n\n    // Event filter pills.\n    var enabledEvents = ch.events;\n    // If events is null/undefined/empty, all events are enabled by default.\n    var allEnabled = !enabledEvents || enabledEvents.length === 0;\n\n    // Canonicalise legacy event keys from saved config so pills light up correctly.\n    var canonicalEvents = [];\n    if (!allEnabled) {\n        for (var ce = 0; ce < enabledEvents.length; ce++) {\n            canonicalEvents.push(canonicaliseEventKey(enabledEvents[ce]));\n        }\n    }\n\n    var pillsWrap = document.createElement(\"div\");\n    pillsWrap.className = \"event-pills\";\n\n    var pillsLabel = document.createElement(\"div\");\n    pillsLabel.className = \"event-pills-label\";\n    pillsLabel.textContent = \"Event filters\";\n    pillsWrap.appendChild(pillsLabel);\n\n    for (var e = 0; e < EVENT_TYPES.length; e++) {\n        var evtType = EVENT_TYPES[e];\n        var pill = document.createElement(\"button\");\n        pill.type = \"button\";\n        pill.className = \"event-pill\";\n        pill.textContent = evtType.label;\n        pill.setAttribute(\"data-event\", evtType.key);\n\n        var isActive = allEnabled;\n        if (!allEnabled) {\n            for (var k = 0; k < canonicalEvents.length; k++) {\n                if (canonicalEvents[k] === evtType.key) {\n                    isActive = true;\n                    break;\n                }\n            }\n        }\n        if (isActive) {\n            pill.classList.add(\"active\");\n        }\n\n        pill.addEventListener(\"click\", function() {\n            this.classList.toggle(\"active\");\n        });\n\n        pillsWrap.appendChild(pill);\n    }\n\n    card.appendChild(pillsWrap);\n    return card;\n}\n\nfunction addChannel() {\n    var select = document.getElementById(\"channel-type-select\");\n    if (!select || !select.value) return;\n\n    var type = select.value;\n    var name = type.charAt(0).toUpperCase() + type.slice(1);\n\n    var defaultEvents = [];\n    for (var i = 0; i < EVENT_TYPES.length; i++) {\n        defaultEvents.push(EVENT_TYPES[i].key);\n    }\n\n    notificationChannels.push({\n        id: \"new-\" + Date.now() + \"-\" + Math.random().toString(36).substr(2, 6),\n        type: type,\n        name: name,\n        enabled: true,\n        settings: \"{}\",\n        events: defaultEvents\n    });\n\n    select.value = \"\";\n    renderChannels();\n    showToast(\"Added \" + name + \" channel \u2014 configure and save\", \"info\");\n}\n\nfunction deleteChannel(index) {\n    if (index < 0 || index >= notificationChannels.length) return;\n    var name = notificationChannels[index].name || notificationChannels[index].type;\n    notificationChannels.splice(index, 1);\n    renderChannels();\n    showToast(\"Removed \" + name + \" \u2014 save to apply\", \"info\");\n}\n\nfunction collectChannelsFromDOM() {\n    var cards = document.querySelectorAll(\".channel-card\");\n    for (var i = 0; i < cards.length; i++) {\n        var idx = parseInt(cards[i].getAttribute(\"data-index\"));\n        if (idx < 0 || idx >= notificationChannels.length) continue;\n\n        var nameInput = cards[i].querySelector('[data-field=\"name\"]');\n        if (nameInput) notificationChannels[idx].name = nameInput.value;\n\n        var toggle = cards[i].querySelector('[data-field=\"enabled\"]');\n        if (toggle) notificationChannels[idx].enabled = toggle.checked;\n\n        var settings = {};\n        try { settings = JSON.parse(notificationChannels[idx].settings || \"{}\"); } catch(e) { settings = {}; }\n        if (typeof notificationChannels[idx].settings === \"object\" && notificationChannels[idx].settings !== null && !(notificationChannels[idx].settings instanceof String)) {\n            settings = notificationChannels[idx].settings;\n        }\n\n        var inputs = cards[i].querySelectorAll(\"[data-setting]\");\n        for (var j = 0; j < inputs.length; j++) {\n            var key = inputs[j].getAttribute(\"data-setting\");\n            var val = inputs[j].value;\n            if (key === \"headers\") {\n                try { settings[key] = JSON.parse(val); } catch(e) { settings[key] = {}; }\n            } else if (key === \"priority\") {\n                settings[key] = parseInt(val) || 3;\n            } else {\n                settings[key] = val;\n            }\n        }\n\n        notificationChannels[idx].settings = JSON.stringify(settings);\n\n        // Collect event pill states.\n        var pills = cards[i].querySelectorAll(\".event-pill\");\n        var events = [];\n        for (var p = 0; p < pills.length; p++) {\n            if (pills[p].classList.contains(\"active\")) {\n                events.push(pills[p].getAttribute(\"data-event\"));\n            }\n        }\n        notificationChannels[idx].events = events;\n    }\n}\n\nfunction saveNotificationChannels() {\n    collectChannelsFromDOM();\n\n    var btn = document.getElementById(\"notify-save-btn\");\n    if (btn) { btn.classList.add(\"loading\"); btn.disabled = true; }\n\n    // Parse settings strings back to objects for the API.\n    var payload = [];\n    for (var i = 0; i < notificationChannels.length; i++) {\n        var ch = {};\n        var keys = Object.keys(notificationChannels[i]);\n        for (var k = 0; k < keys.length; k++) {\n            ch[keys[k]] = notificationChannels[i][keys[k]];\n        }\n        if (typeof ch.settings === \"string\") {\n            try { ch.settings = JSON.parse(ch.settings); } catch(e) { ch.settings = {}; }\n        }\n        payload.push(ch);\n    }\n\n    fetch(\"/api/settings/notifications\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload)\n    })\n        .then(function(resp) {\n            return resp.json().then(function(data) { return { ok: resp.ok, data: data }; });\n        })\n        .then(function(result) {\n            if (result.ok) {\n                showToast(result.data.message || \"Notification settings saved\", \"success\");\n                loadNotificationChannels();\n            } else {\n                showToast(result.data.error || \"Failed to save notification settings\", \"error\");\n            }\n        })\n        .catch(function() {\n            showToast(\"Network error \u2014 could not save notification settings\", \"error\");\n        })\n        .finally(function() {\n            if (btn) { btn.classList.remove(\"loading\"); btn.disabled = false; }\n        });\n}\n\nfunction testChannel(index) {\n    collectChannelsFromDOM();\n    var ch = notificationChannels[index];\n    if (!ch) return;\n\n    var btn = document.querySelectorAll('.channel-card[data-index=\"' + index + '\"] .btn')[0];\n\n    apiPost(\n        \"/api/settings/notifications/test\",\n        { id: ch.id },\n        \"Test sent to \" + (ch.name || ch.type),\n        \"Test failed for \" + (ch.name || ch.type),\n        btn\n    );\n}\n\nfunction testNotification() {\n    var btn = document.getElementById(\"notify-test-btn\");\n    apiPost(\n        \"/api/settings/notifications/test\",\n        null,\n        \"Test notification sent to all channels\",\n        \"Failed to send test notification\",\n        btn\n    );\n}\n\n/* ------------------------------------------------------------\n   14. Digest Settings\n   ------------------------------------------------------------ */\n\nvar NOTIFY_MODE_LABELS = {\n    \"default\": \"Immediate + summary\",\n    \"every_scan\": \"Every scan\",\n    \"digest_only\": \"Summary only\",\n    \"muted\": \"Silent\"\n};\n\nfunction modeUsesDigest(mode) {\n    return mode === \"default\" || mode === \"digest_only\";\n}\n\nfunction updateDigestScheduleVisibility(mode) {\n    var section = document.getElementById(\"digest-schedule-section\");\n    if (section) section.style.display = modeUsesDigest(mode) ? \"\" : \"none\";\n}\n\nfunction updateNotifyModePreview(mode) {\n    var preview = document.getElementById(\"notify-mode-preview\");\n    if (preview) preview.textContent = NOTIFY_MODE_LABELS[mode] || mode;\n}\n\nfunction onNotifyModeChange(mode) {\n    updateDigestScheduleVisibility(mode);\n    updateNotifyModePreview(mode);\n    saveDigestSettings();\n}\n\nfunction getSelectedNotifyMode() {\n    var radios = document.querySelectorAll('input[name=\"default-notify-mode\"]');\n    for (var i = 0; i < radios.length; i++) {\n        if (radios[i].checked) return radios[i].value;\n    }\n    return \"default\";\n}\n\nfunction loadDigestSettings() {\n    fetch(\"/api/settings/digest\", {credentials: \"same-origin\"})\n        .then(function (res) { return res.json(); })\n        .then(function (data) {\n            var mode = data.default_notify_mode || \"default\";\n            var radios = document.querySelectorAll('input[name=\"default-notify-mode\"]');\n            for (var i = 0; i < radios.length; i++) {\n                radios[i].checked = (radios[i].value === mode);\n            }\n            updateDigestScheduleVisibility(mode);\n            updateNotifyModePreview(mode);\n            var el = document.getElementById(\"digest-time\");\n            if (el) el.value = data.digest_time || \"09:00\";\n            el = document.getElementById(\"digest-interval\");\n            if (el) el.value = data.digest_interval || \"24h\";\n        })\n        .catch(function () {});\n}\n\nfunction saveDigestSettings() {\n    var mode = getSelectedNotifyMode();\n    var body = {\n        default_notify_mode: mode,\n        digest_enabled: modeUsesDigest(mode)\n    };\n    var el = document.getElementById(\"digest-time\");\n    if (el && el.value) body.digest_time = el.value;\n    el = document.getElementById(\"digest-interval\");\n    if (el && el.value) body.digest_interval = el.value;\n\n    fetch(\"/api/settings/digest\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify(body)\n    })\n    .then(function (res) { return res.json(); })\n    .then(function (data) {\n        if (data.status === \"ok\") showToast(\"Settings saved\", \"success\");\n    })\n    .catch(function () { showToast(\"Failed to save settings\", \"error\"); });\n}\n\nfunction triggerDigest() {\n    fetch(\"/api/digest/trigger\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"}\n    })\n    .then(function (res) { return res.json(); })\n    .then(function (data) {\n        showToast(data.message || \"Digest triggered\", \"info\");\n    })\n    .catch(function () { showToast(\"Failed to trigger digest\", \"error\"); });\n}\n\nfunction loadContainerNotifyPrefs() {\n    var container = document.getElementById(\"container-notify-prefs\");\n    if (!container) return;\n\n    fetch(\"/api/settings/container-notify-prefs\", {credentials: \"same-origin\"})\n        .then(function (res) { return res.json(); })\n        .then(function (prefs) {\n            fetch(\"/api/containers\", {credentials: \"same-origin\"})\n                .then(function (res) { return res.json(); })\n                .then(function (containers) {\n                    renderContainerNotifyPrefs(container, containers, prefs);\n                });\n        })\n        .catch(function () {\n            while (container.firstChild) container.removeChild(container.firstChild);\n            var msg = document.createElement(\"p\");\n            msg.className = \"text-muted\";\n            msg.textContent = \"Failed to load preferences\";\n            container.appendChild(msg);\n        });\n}\n\nfunction renderContainerNotifyPrefs(el, containers, prefs) {\n    while (el.firstChild) el.removeChild(el.firstChild);\n\n    if (!containers || containers.length === 0) {\n        var msg = document.createElement(\"p\");\n        msg.className = \"text-muted\";\n        msg.textContent = \"No containers found\";\n        el.appendChild(msg);\n        return;\n    }\n\n    var allModes = [\n        {value: \"default\", label: \"Immediate + summary\"},\n        {value: \"every_scan\", label: \"Every scan\"},\n        {value: \"digest_only\", label: \"Summary only\"},\n        {value: \"muted\", label: \"Silent\"}\n    ];\n\n    // Build data with stack info\n    var items = [];\n    var overrideCount = 0;\n    for (var i = 0; i < containers.length; i++) {\n        var mode = (prefs[containers[i].name] && prefs[containers[i].name].mode) || \"default\";\n        if (mode !== \"default\") overrideCount++;\n        items.push({name: containers[i].name, mode: mode, stack: containers[i].stack || \"\"});\n    }\n\n    // Group by stack, sorted: named stacks alphabetically, standalone last\n    var stackMap = {};\n    var stackOrder = [];\n    for (var s = 0; s < items.length; s++) {\n        var key = items[s].stack;\n        if (!stackMap[key]) {\n            stackMap[key] = [];\n            stackOrder.push(key);\n        }\n        stackMap[key].push(items[s]);\n    }\n    stackOrder.sort(function(a, b) {\n        if (a === \"\") return 1;\n        if (b === \"\") return -1;\n        return a.localeCompare(b);\n    });\n    // Sort containers within each stack\n    for (var sk in stackMap) {\n        stackMap[sk].sort(function(a, b) { return a.name.localeCompare(b.name); });\n    }\n\n    // Summary\n    var summary = document.createElement(\"p\");\n    summary.className = \"notify-prefs-summary\";\n    summary.textContent = overrideCount === 0\n        ? \"All \" + items.length + \" containers use the default notification mode. Select containers below to set a different mode.\"\n        : overrideCount + \" of \" + items.length + \" containers have custom settings. Select containers to change their mode.\";\n    el.appendChild(summary);\n\n    // Toolbar\n    var toolbar = document.createElement(\"div\");\n    toolbar.className = \"notify-prefs-toolbar\";\n\n    var selectAllBtn = document.createElement(\"button\");\n    selectAllBtn.className = \"btn\";\n    selectAllBtn.textContent = \"Select all\";\n    selectAllBtn.addEventListener(\"click\", function() { toggleAllPrefs(true); });\n    toolbar.appendChild(selectAllBtn);\n\n    var deselectBtn = document.createElement(\"button\");\n    deselectBtn.className = \"btn\";\n    deselectBtn.textContent = \"Deselect all\";\n    deselectBtn.addEventListener(\"click\", function() { toggleAllPrefs(false); });\n    toolbar.appendChild(deselectBtn);\n\n    el.appendChild(toolbar);\n\n    // Container list grouped by stack\n    var listWrap = document.createElement(\"div\");\n    listWrap.id = \"notify-prefs-list\";\n\n    for (var g = 0; g < stackOrder.length; g++) {\n        var stackName = stackOrder[g];\n        var groupItems = stackMap[stackName];\n\n        // Card wrapper for this stack\n        var groupCard = document.createElement(\"div\");\n        groupCard.className = \"notify-prefs-group\";\n\n        var heading = document.createElement(\"div\");\n        heading.className = \"notify-prefs-group-heading\";\n        heading.textContent = stackName === \"swarm\" ? \"Swarm Services\" : (stackName || \"Standalone\");\n        groupCard.appendChild(heading);\n\n        // Grid for this stack\n        var grid = document.createElement(\"div\");\n        grid.className = \"notify-prefs-list\";\n\n        for (var j = 0; j < groupItems.length; j++) {\n            var item = groupItems[j];\n            var label = document.createElement(\"label\");\n            label.className = \"notify-pref-item\" + (item.mode !== \"default\" ? \" has-override\" : \"\");\n            label.dataset.name = item.name;\n\n            var cb = document.createElement(\"input\");\n            cb.type = \"checkbox\";\n            cb.value = item.name;\n            cb.addEventListener(\"change\", function() {\n                this.closest(\".notify-pref-item\").classList.toggle(\"checked\", this.checked);\n                updatePrefsActionBar();\n            });\n            label.appendChild(cb);\n\n            var nameSpan = document.createElement(\"span\");\n            nameSpan.className = \"notify-pref-name\";\n            nameSpan.textContent = item.name;\n            label.appendChild(nameSpan);\n\n            if (item.mode !== \"default\") {\n                var badge = document.createElement(\"span\");\n                badge.className = \"notify-pref-badge\";\n                badge.textContent = NOTIFY_MODE_LABELS[item.mode] || item.mode;\n                label.appendChild(badge);\n            }\n\n            grid.appendChild(label);\n        }\n        groupCard.appendChild(grid);\n        listWrap.appendChild(groupCard);\n    }\n    el.appendChild(listWrap);\n\n    // Action bar (hidden until selection)\n    var actionBar = document.createElement(\"div\");\n    actionBar.className = \"notify-prefs-action-bar\";\n    actionBar.id = \"notify-prefs-action-bar\";\n    actionBar.style.display = \"none\";\n\n    var countSpan = document.createElement(\"span\");\n    countSpan.className = \"action-count\";\n    countSpan.id = \"notify-prefs-action-count\";\n    countSpan.textContent = \"0 selected\";\n    actionBar.appendChild(countSpan);\n\n    var actionSel = document.createElement(\"select\");\n    actionSel.className = \"setting-select\";\n    actionSel.id = \"notify-prefs-action-mode\";\n    for (var k = 0; k < allModes.length; k++) {\n        var opt = document.createElement(\"option\");\n        opt.value = allModes[k].value;\n        opt.textContent = allModes[k].label;\n        actionSel.appendChild(opt);\n    }\n    actionBar.appendChild(actionSel);\n\n    var applyBtn = document.createElement(\"button\");\n    applyBtn.className = \"btn btn-success\";\n    applyBtn.textContent = \"Apply\";\n    applyBtn.addEventListener(\"click\", function() { applyPrefsToSelected(); });\n    actionBar.appendChild(applyBtn);\n\n    var resetBtn = document.createElement(\"button\");\n    resetBtn.className = \"btn\";\n    resetBtn.textContent = \"Reset to default\";\n    resetBtn.addEventListener(\"click\", function() { applyPrefsToSelected(\"default\"); });\n    actionBar.appendChild(resetBtn);\n\n    el.appendChild(actionBar);\n}\n\nfunction toggleAllPrefs(checked) {\n    var cbs = document.querySelectorAll(\"#notify-prefs-list input[type=checkbox]\");\n    for (var i = 0; i < cbs.length; i++) {\n        cbs[i].checked = checked;\n        cbs[i].closest(\".notify-pref-item\").classList.toggle(\"checked\", checked);\n    }\n    updatePrefsActionBar();\n}\n\nfunction updatePrefsActionBar() {\n    var cbs = document.querySelectorAll(\"#notify-prefs-list input[type=checkbox]:checked\");\n    var bar = document.getElementById(\"notify-prefs-action-bar\");\n    var count = document.getElementById(\"notify-prefs-action-count\");\n    if (!bar) return;\n    bar.style.display = cbs.length > 0 ? \"\" : \"none\";\n    if (count) count.textContent = cbs.length + \" selected\";\n}\n\nfunction applyPrefsToSelected(forceMode) {\n    var modeSel = document.getElementById(\"notify-prefs-action-mode\");\n    var mode = forceMode || (modeSel ? modeSel.value : \"default\");\n    var cbs = document.querySelectorAll(\"#notify-prefs-list input[type=checkbox]:checked\");\n    if (cbs.length === 0) return;\n\n    var label = NOTIFY_MODE_LABELS[mode] || mode;\n    var action = forceMode ? \"Reset\" : \"Set\";\n    if (!confirm(action + \" \" + cbs.length + \" container\" + (cbs.length > 1 ? \"s\" : \"\") + \" to \\\"\" + label + \"\\\"?\")) return;\n\n    var pending = cbs.length;\n    for (var i = 0; i < cbs.length; i++) {\n        (function(name) {\n            fetch(\"/api/containers/\" + encodeURIComponent(name) + \"/notify-pref\", {\n                method: \"POST\",\n                credentials: \"same-origin\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify({mode: mode})\n            })\n            .then(function() {\n                pending--;\n                if (pending === 0) {\n                    showToast(action + \" \" + cbs.length + \" containers to \" + label, \"success\");\n                    loadContainerNotifyPrefs();\n                }\n            })\n            .catch(function() { pending--; });\n        })(cbs[i].value);\n    }\n}\n\nfunction setContainerNotifyPref(name, mode) {\n    fetch(\"/api/containers/\" + encodeURIComponent(name) + \"/notify-pref\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify({mode: mode})\n    })\n    .then(function (res) { return res.json(); })\n    .then(function (data) {\n        if (data.status === \"ok\") {\n            showToast(\"Notification mode updated for \" + name, \"success\");\n            loadContainerNotifyPrefs();\n        }\n    })\n    .catch(function () { showToast(\"Failed to update notification mode\", \"error\"); });\n}\n\n/* ------------------------------------------------------------\n   14. HTML Escape Helper\n   ------------------------------------------------------------ */\n\nfunction escapeHtml(str) {\n    if (!str) return \"\";\n    return str\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\n// isSafeURL validates that a URL string starts with http:// or https://.\n// Used as a defence-in-depth check before inserting server-provided URLs\n// into href attributes via innerHTML.\nfunction isSafeURL(url) {\n    return typeof url === \"string\" && (url.indexOf(\"https://\") === 0 || url.indexOf(\"http://\") === 0);\n}\n\n\n/* ------------------------------------------------------------\n   15. Notification Message Templates\n   ------------------------------------------------------------ */\n\nvar _notifyTemplates = {};\n\nfunction loadNotifyTemplates() {\n    fetch(\"/api/settings/notifications/templates\", {credentials: \"same-origin\"})\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            _notifyTemplates = (data && data.templates) ? data.templates : {};\n            // Load template for currently selected event type.\n            loadTemplateForEvent();\n        })\n        .catch(function() {\n            _notifyTemplates = {};\n        });\n}\n\nfunction loadTemplateForEvent() {\n    var sel = document.getElementById(\"template-event-type\");\n    var textarea = document.getElementById(\"template-body\");\n    if (!sel || !textarea) return;\n    var eventType = sel.value;\n    textarea.value = _notifyTemplates[eventType] || \"\";\n    // Hide preview when switching events.\n    var previewOut = document.getElementById(\"template-preview-output\");\n    if (previewOut) previewOut.style.display = \"none\";\n}\n\nfunction saveNotifyTemplate() {\n    var sel = document.getElementById(\"template-event-type\");\n    var textarea = document.getElementById(\"template-body\");\n    if (!sel || !textarea) return;\n\n    var eventType = sel.value;\n    var tmpl = textarea.value;\n\n    fetch(\"/api/settings/notifications/templates\", {\n        method: \"PUT\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify({event_type: eventType, template: tmpl})\n    })\n    .then(function(resp) {\n        return resp.json().then(function(data) { return {ok: resp.ok, data: data}; });\n    })\n    .then(function(result) {\n        if (result.ok) {\n            _notifyTemplates[eventType] = tmpl;\n            showToast(\"Template saved for \" + eventType, \"success\");\n        } else {\n            showToast(result.data.error || \"Failed to save template\", \"error\");\n        }\n    })\n    .catch(function() {\n        showToast(\"Network error \u2014 could not save template\", \"error\");\n    });\n}\n\nfunction deleteNotifyTemplate() {\n    var sel = document.getElementById(\"template-event-type\");\n    var textarea = document.getElementById(\"template-body\");\n    if (!sel) return;\n\n    var eventType = sel.value;\n\n    fetch(\"/api/settings/notifications/templates/\" + encodeURIComponent(eventType), {\n        method: \"DELETE\",\n        credentials: \"same-origin\"\n    })\n    .then(function(resp) {\n        return resp.json().then(function(data) { return {ok: resp.ok, data: data}; });\n    })\n    .then(function(result) {\n        if (result.ok) {\n            delete _notifyTemplates[eventType];\n            if (textarea) textarea.value = \"\";\n            var previewOut = document.getElementById(\"template-preview-output\");\n            if (previewOut) previewOut.style.display = \"none\";\n            showToast(\"Template reset to default for \" + eventType, \"success\");\n        } else {\n            showToast(result.data.error || \"Failed to reset template\", \"error\");\n        }\n    })\n    .catch(function() {\n        showToast(\"Network error \u2014 could not reset template\", \"error\");\n    });\n}\n\nfunction previewNotifyTemplate() {\n    var sel = document.getElementById(\"template-event-type\");\n    var textarea = document.getElementById(\"template-body\");\n    if (!sel || !textarea) return;\n\n    var eventType = sel.value;\n    var tmpl = textarea.value;\n\n    if (!tmpl) {\n        showToast(\"Enter a template to preview\", \"info\");\n        return;\n    }\n\n    fetch(\"/api/settings/notifications/templates/preview\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: {\"Content-Type\": \"application/json\"},\n        body: JSON.stringify({event_type: eventType, template: tmpl})\n    })\n    .then(function(resp) {\n        return resp.json().then(function(data) { return {ok: resp.ok, data: data}; });\n    })\n    .then(function(result) {\n        var previewOut = document.getElementById(\"template-preview-output\");\n        var previewText = document.getElementById(\"template-preview-text\");\n        if (!previewOut || !previewText) return;\n\n        if (result.ok) {\n            previewText.textContent = result.data.preview || \"\";\n            previewOut.style.display = \"\";\n        } else {\n            previewText.textContent = \"Error: \" + (result.data.error || \"invalid template\");\n            previewOut.style.display = \"\";\n        }\n    })\n    .catch(function() {\n        showToast(\"Network error \u2014 could not preview template\", \"error\");\n    });\n}\n\nexport {\n    loadNotificationChannels,\n    addChannel,\n    saveNotificationChannels,\n    testNotification,\n    onNotifyModeChange,\n    loadDigestSettings,\n    saveDigestSettings,\n    triggerDigest,\n    loadContainerNotifyPrefs,\n    setContainerNotifyPref,\n    escapeHtml,\n    isSafeURL,\n    loadNotifyTemplates,\n    loadTemplateForEvent,\n    saveNotifyTemplate,\n    deleteNotifyTemplate,\n    previewNotifyTemplate\n};\n", "/* ============================================================\n   15. Registry Credentials & Rate Limits\n   16. Rate Limit Status - Dashboard Polling\n   ============================================================ */\n\nimport { showToast } from \"./utils.js\";\n\nvar registryData = {};\nvar registryCredentials = [];\n\nfunction loadRegistries() {\n    fetch(\"/api/settings/registries\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            registryData = data;\n            registryCredentials = [];\n            Object.keys(data).forEach(function(reg) {\n                if (data[reg].credential) {\n                    registryCredentials.push(data[reg].credential);\n                }\n            });\n            renderRegistryStatus();\n            renderRegistryCredentials();\n        })\n        .catch(function(err) { console.error(\"Failed to load registries:\", err); });\n}\n\nfunction renderRegistryStatus() {\n    var container = document.getElementById(\"registry-status-table\");\n    var warningsEl = document.getElementById(\"registry-warnings\");\n    if (!container) return;\n\n    var registries = Object.keys(registryData);\n    if (registries.length === 0) {\n        container.textContent = \"\";\n        var emptyDiv = document.createElement(\"div\");\n        emptyDiv.className = \"empty-state\";\n        emptyDiv.style.padding = \"var(--sp-6) var(--sp-4)\";\n        var emptyH3 = document.createElement(\"h3\");\n        emptyH3.textContent = \"No registries detected\";\n        var emptyP = document.createElement(\"p\");\n        emptyP.textContent = \"Registries will appear here after the first scan.\";\n        emptyDiv.appendChild(emptyH3);\n        emptyDiv.appendChild(emptyP);\n        container.appendChild(emptyDiv);\n        if (warningsEl) warningsEl.textContent = \"\";\n        return;\n    }\n\n    // Build the table using DOM methods for safety.\n    var table = document.createElement(\"table\");\n    table.className = \"data-table\";\n    var thead = document.createElement(\"thead\");\n    var headRow = document.createElement(\"tr\");\n    [\"Registry\", \"Containers\", \"Used\", \"Resets\", \"Auth\"].forEach(function(label) {\n        var th = document.createElement(\"th\");\n        th.textContent = label;\n        headRow.appendChild(th);\n    });\n    thead.appendChild(headRow);\n    table.appendChild(thead);\n\n    var tbody = document.createElement(\"tbody\");\n    var warnings = [];\n    registries.sort();\n\n    registries.forEach(function(reg) {\n        var info = registryData[reg];\n        var rl = info.rate_limit;\n        var cred = info.credential;\n\n        var images = rl ? rl.container_count : 0;\n        var usedText = \"\\u2014\";\n        var usedClass = \"\";\n        var resets = \"\\u2014\";\n\n        if (rl && rl.has_limits) {\n            var used = rl.limit - rl.remaining;\n            usedText = used + \" / \" + rl.limit;\n            if (rl.remaining <= 0) {\n                usedClass = \"text-error\";\n            } else if (rl.limit > 0 && used / rl.limit >= 0.8) {\n                usedClass = \"text-warning\";\n            }\n            if (rl.reset_at && rl.reset_at !== \"0001-01-01T00:00:00Z\") {\n                var resetTime = new Date(rl.reset_at);\n                var now = new Date();\n                var diffMs = resetTime - now;\n                if (diffMs > 0) {\n                    var hours = Math.floor(diffMs / 3600000);\n                    var mins = Math.floor((diffMs % 3600000) / 60000);\n                    resets = hours + \"h \" + mins + \"m\";\n                } else {\n                    resets = \"expired\";\n                }\n            }\n        } else if (rl && !rl.has_limits && rl.limit === -1 && rl.last_updated === \"0001-01-01T00:00:00Z\") {\n            usedText = \"\\u2014\";\n        } else if (rl && !rl.has_limits) {\n            usedText = \"No limits\";\n        }\n\n        var tr = document.createElement(\"tr\");\n\n        var tdReg = document.createElement(\"td\");\n        var regStrong = document.createElement(\"strong\");\n        regStrong.textContent = reg;\n        tdReg.appendChild(regStrong);\n        tr.appendChild(tdReg);\n\n        var tdImages = document.createElement(\"td\");\n        tdImages.textContent = images;\n        tr.appendChild(tdImages);\n\n        var tdUsed = document.createElement(\"td\");\n        if (usedClass) {\n            var usedSpan = document.createElement(\"span\");\n            usedSpan.className = usedClass;\n            usedSpan.textContent = usedText;\n            tdUsed.appendChild(usedSpan);\n        } else {\n            tdUsed.textContent = usedText;\n        }\n        tr.appendChild(tdUsed);\n\n        var tdResets = document.createElement(\"td\");\n        tdResets.textContent = resets;\n        tr.appendChild(tdResets);\n\n        var tdAuth = document.createElement(\"td\");\n        var authBadge = document.createElement(\"span\");\n        if (cred) {\n            authBadge.className = \"badge badge-success\";\n            authBadge.textContent = \"\\u2713 Yes\";\n        } else {\n            authBadge.className = \"badge badge-muted\";\n            authBadge.textContent = \"\\u2717 None\";\n        }\n        tdAuth.appendChild(authBadge);\n        tr.appendChild(tdAuth);\n\n        tbody.appendChild(tr);\n\n        if (rl && rl.has_limits && !cred) {\n            warnings.push(reg);\n        }\n    });\n\n    table.appendChild(tbody);\n    container.textContent = \"\";\n    container.appendChild(table);\n\n    if (warningsEl) {\n        warningsEl.textContent = \"\";\n        warnings.forEach(function(reg) {\n            var alertDiv = document.createElement(\"div\");\n            alertDiv.className = \"alert alert-warning\";\n            alertDiv.textContent = \"\\u26a0 \" + reg + \": No credentials. Unauthenticated rate limits apply.\";\n            warningsEl.appendChild(alertDiv);\n        });\n    }\n}\n\nfunction renderRegistryCredentials() {\n    var container = document.getElementById(\"credential-list\");\n    if (!container) return;\n    container.textContent = \"\";\n\n    if (registryCredentials.length === 0) {\n        var emptyDiv = document.createElement(\"div\");\n        emptyDiv.className = \"empty-state\";\n        emptyDiv.style.padding = \"var(--sp-6) var(--sp-4)\";\n        var emptyH3 = document.createElement(\"h3\");\n        emptyH3.textContent = \"No credentials configured\";\n        var emptyP = document.createElement(\"p\");\n        emptyP.textContent = \"Add credentials for registries that enforce rate limits (e.g. Docker Hub).\";\n        emptyDiv.appendChild(emptyH3);\n        emptyDiv.appendChild(emptyP);\n        container.appendChild(emptyDiv);\n        // Don't return \u2014 dropdown population code below must still run.\n    }\n\n    registryCredentials.forEach(function(cred, index) {\n        var card = document.createElement(\"div\");\n        card.className = \"channel-card\";\n        card.setAttribute(\"data-index\", index);\n\n        // Header\n        var header = document.createElement(\"div\");\n        header.className = \"channel-card-header\";\n        var typeBadge = document.createElement(\"span\");\n        typeBadge.className = \"channel-type-badge\";\n        typeBadge.textContent = cred.registry;\n        header.appendChild(typeBadge);\n\n        var actions = document.createElement(\"div\");\n        actions.className = \"channel-actions\";\n        var testBtn = document.createElement(\"button\");\n        testBtn.className = \"btn btn-sm\";\n        testBtn.textContent = \"Test\";\n        testBtn.setAttribute(\"data-index\", index);\n        testBtn.addEventListener(\"click\", function() { testRegistryCredential(parseInt(this.getAttribute(\"data-index\"), 10)); });\n        actions.appendChild(testBtn);\n        var delBtn = document.createElement(\"button\");\n        delBtn.className = \"btn btn-sm btn-error\";\n        delBtn.textContent = \"Remove\";\n        delBtn.setAttribute(\"data-index\", index);\n        delBtn.addEventListener(\"click\", function() { deleteRegistryCredential(parseInt(this.getAttribute(\"data-index\"), 10)); });\n        actions.appendChild(delBtn);\n        header.appendChild(actions);\n        card.appendChild(header);\n\n        // Hidden field to preserve registry value on collect.\n        var regHidden = document.createElement(\"input\");\n        regHidden.type = \"hidden\";\n        regHidden.setAttribute(\"data-field\", \"registry\");\n        regHidden.value = cred.registry;\n        card.appendChild(regHidden);\n\n        // Fields: username and password only (registry is fixed via badge).\n        var fields = document.createElement(\"div\");\n        fields.className = \"channel-fields\";\n        var textFieldDefs = [\n            { label: \"Username\", field: \"username\", type: \"text\", value: cred.username },\n            { label: \"Password / Token\", field: \"secret\", type: \"password\", value: cred.secret }\n        ];\n        textFieldDefs.forEach(function(def) {\n            var fieldDiv = document.createElement(\"div\");\n            fieldDiv.className = \"channel-field\";\n            var labelSpan = document.createElement(\"span\");\n            labelSpan.className = \"channel-field-label\";\n            labelSpan.textContent = def.label;\n            fieldDiv.appendChild(labelSpan);\n            var input = document.createElement(\"input\");\n            input.type = def.type;\n            input.className = \"channel-field-input\";\n            input.value = def.value || \"\";\n            input.setAttribute(\"data-field\", def.field);\n            fieldDiv.appendChild(input);\n            fields.appendChild(fieldDiv);\n        });\n        card.appendChild(fields);\n\n        // Registry-specific help callout.\n        var hints = {\n            \"docker.io\": \"Create a Personal Access Token at hub.docker.com \\u2192 Account Settings \\u2192 Personal access tokens. Read-only scope is sufficient. Authenticated users get 200 pulls/6h (vs 100 anonymous).\",\n            \"ghcr.io\": \"Create a Personal Access Token at github.com \\u2192 Settings \\u2192 Developer settings \\u2192 Personal access tokens (classic). Select the read:packages scope.\",\n            \"lscr.io\": \"LinuxServer images are also available via GHCR (ghcr.io/linuxserver/*). Use your LinuxServer Fleet credentials, or switch the registry to ghcr.io for simpler auth.\",\n            \"docker.gitea.com\": \"Use your Gitea account credentials. Gitea registries typically have no rate limits.\"\n        };\n        var hintText = hints[cred.registry];\n        if (hintText) {\n            var helpDiv = document.createElement(\"div\");\n            helpDiv.className = \"alert alert-info\";\n            helpDiv.style.margin = \"var(--sp-3) var(--sp-4) var(--sp-4)\";\n            var helpIcon = document.createElement(\"span\");\n            helpIcon.className = \"alert-info-icon\";\n            helpIcon.textContent = \"\\u2139\";\n            helpDiv.appendChild(helpIcon);\n            var helpSpan = document.createElement(\"span\");\n            helpSpan.textContent = hintText;\n            helpDiv.appendChild(helpSpan);\n            card.appendChild(helpDiv);\n        }\n\n        container.appendChild(card);\n    });\n\n    // Populate the \"Add\" dropdown with registries that don't already have credentials.\n    var addSelect = document.getElementById(\"registry-type-select\");\n    if (addSelect) {\n        while (addSelect.options.length > 1) addSelect.remove(1);\n        var usedRegs = {};\n        registryCredentials.forEach(function(c) { usedRegs[c.registry] = true; });\n        var allRegs = Object.keys(registryData).sort();\n        // Always include common registries even if not yet detected.\n        [\"docker.io\", \"ghcr.io\", \"lscr.io\", \"docker.gitea.com\"].forEach(function(r) {\n            if (allRegs.indexOf(r) === -1) allRegs.push(r);\n        });\n        allRegs.sort();\n        allRegs.forEach(function(reg) {\n            if (!usedRegs[reg]) {\n                var opt = document.createElement(\"option\");\n                opt.value = reg;\n                opt.textContent = reg;\n                addSelect.appendChild(opt);\n            }\n        });\n    }\n}\n\nfunction addRegistryCredential() {\n    var select = document.getElementById(\"registry-type-select\");\n    if (!select) return;\n    if (!select.value) {\n        showToast(\"Select a registry from the dropdown first\", \"warning\");\n        select.focus();\n        return;\n    }\n    var reg = select.value;\n    var id = \"reg-\" + Date.now() + \"-\" + Math.random().toString(36).substr(2, 9);\n    registryCredentials.push({ id: id, registry: reg, username: \"\", secret: \"\" });\n    select.value = \"\";\n    renderRegistryCredentials();\n    showToast(\"Added \" + reg + \" \\u2014 enter credentials and save\", \"info\");\n}\n\nfunction deleteRegistryCredential(index) {\n    registryCredentials.splice(index, 1);\n    renderRegistryCredentials();\n    showToast(\"Credential removed \\u2014 save to persist\", \"info\");\n}\n\nfunction collectRegistryCredentialsFromDOM() {\n    var cards = document.querySelectorAll(\"#credential-list .channel-card\");\n    cards.forEach(function(card, i) {\n        if (i < registryCredentials.length) {\n            var inputs = card.querySelectorAll(\"[data-field]\");\n            inputs.forEach(function(input) {\n                var field = input.getAttribute(\"data-field\");\n                if (field) registryCredentials[i][field] = input.value;\n            });\n        }\n    });\n}\n\nfunction saveRegistryCredentials(event) {\n    collectRegistryCredentialsFromDOM();\n    var btn = event && event.target ? event.target.closest(\".btn\") : null;\n    if (btn) btn.classList.add(\"loading\");\n\n    fetch(\"/api/settings/registries\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(registryCredentials)\n    })\n    .then(function(r) { return r.json(); })\n    .then(function(data) {\n        if (btn) btn.classList.remove(\"loading\");\n        if (data.error) {\n            showToast(\"Failed: \" + data.error, \"error\");\n        } else {\n            showToast(\"Registry credentials saved\", \"success\");\n            loadRegistries();\n            // Probe runs server-side in background; re-fetch after it completes.\n            setTimeout(function() { loadRegistries(); }, 3000);\n        }\n    })\n    .catch(function(err) {\n        if (btn) btn.classList.remove(\"loading\");\n        showToast(\"Save failed: \" + err, \"error\");\n    });\n}\n\nfunction testRegistryCredential(index) {\n    collectRegistryCredentialsFromDOM();\n    var cred = registryCredentials[index];\n    if (!cred) return;\n\n    fetch(\"/api/settings/registries/test\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ id: cred.id, registry: cred.registry, username: cred.username, secret: cred.secret })\n    })\n    .then(function(r) { return r.json(); })\n    .then(function(data) {\n        if (data.success) {\n            showToast(\"Credentials valid for \" + cred.registry, \"success\");\n            // Refresh rate-limit status after background probe, but don't\n            // reload credentials \u2014 unsaved entries would be wiped.\n            setTimeout(function() {\n                fetch(\"/api/settings/registries\")\n                    .then(function(r) { return r.json(); })\n                    .then(function(d) {\n                        registryData = d;\n                        renderRegistryStatus();\n                    });\n            }, 3000);\n        } else {\n            showToast(\"Test failed: \" + (data.error || \"unknown error\"), \"error\");\n        }\n    })\n    .catch(function(err) { showToast(\"Test failed: \" + err, \"error\"); });\n}\n\n\n/* ------------------------------------------------------------\n   16. Rate Limit Status \u2014 Dashboard Polling\n   ------------------------------------------------------------ */\n\nfunction updateRateLimitStatus() {\n    fetch(\"/api/ratelimits\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            var el = document.getElementById(\"rate-limit-status\");\n            if (!el) return;\n            var health = data.health || \"ok\";\n            var labels = { ok: \"Healthy\", low: \"Needs Attention\", exhausted: \"Exhausted\" };\n            el.textContent = labels[health] || \"Healthy\";\n            el.className = \"stat-value\";\n            if (health === \"ok\") el.classList.add(\"success\");\n            else if (health === \"low\") el.classList.add(\"warning\");\n            else if (health === \"exhausted\") el.classList.add(\"error\");\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\nif (document.getElementById(\"rate-limit-status\")) {\n    updateRateLimitStatus();\n}\n\n\nexport {\n    loadRegistries,\n    addRegistryCredential,\n    saveRegistryCredentials,\n    updateRateLimitStatus\n};\n", "/* ============================================================\n   About tab & Release note sources\n   ============================================================ */\n\nimport { showToast } from \"./utils.js\";\nimport { getCSRFToken } from \"./csrf.js\";\n\nfunction loadFooterVersion() {\n    var el = document.getElementById(\"footer-version\");\n    if (!el) return;\n    fetch(\"/api/about\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            el.textContent = \"Docker-Sentinel \" + (data.version || \"dev\");\n        })\n        .catch(function() { /* ignore \u2014 falls back to defaults */ });\n}\n\nfunction loadAboutInfo() {\n    var container = document.getElementById(\"about-content\");\n    if (!container) return;\n\n    fetch(\"/api/about\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            var rows = document.createElement(\"div\");\n            rows.className = \"settings-rows\";\n\n            appendAboutSection(rows, \"Instance\");\n            appendAboutRow(rows, \"Version\", data.version || \"dev\");\n            appendAboutRow(rows, \"Go Version\", data.go_version || \"-\");\n            appendAboutRow(rows, \"Data Directory\", data.data_directory || \"-\");\n            appendAboutRow(rows, \"Uptime\", data.uptime || \"-\");\n            appendAboutRow(rows, \"Started\", data.started_at ? formatAboutTime(data.started_at) : \"-\");\n\n            appendAboutSection(rows, \"Runtime\");\n            appendAboutRow(rows, \"Poll Interval\", data.poll_interval || \"-\");\n            appendAboutRow(rows, \"Last Scan\", data.last_scan ? formatAboutTimeAgo(data.last_scan) : \"Never\");\n            appendAboutRow(rows, \"Containers Monitored\", String(data.containers || 0));\n            appendAboutRow(rows, \"Updates Applied\", String(data.updates_applied || 0));\n            appendAboutRow(rows, \"Snapshots Stored\", String(data.snapshots || 0));\n\n            appendAboutSection(rows, \"Integrations\");\n\n            // Notification channels\n            if (data.channels && data.channels.length > 0) {\n                var chWrap = document.createElement(\"div\");\n                chWrap.className = \"about-channels\";\n                for (var i = 0; i < data.channels.length; i++) {\n                    var badge = document.createElement(\"span\");\n                    badge.className = \"about-channel-badge\";\n                    badge.textContent = data.channels[i].name;\n                    var typeSpan = document.createElement(\"span\");\n                    typeSpan.className = \"about-channel-type\";\n                    typeSpan.textContent = data.channels[i].type;\n                    badge.appendChild(typeSpan);\n                    chWrap.appendChild(badge);\n                }\n                appendAboutRowEl(rows, \"Notification Channels\", chWrap);\n            } else {\n                appendAboutRow(rows, \"Notification Channels\", \"None configured\");\n            }\n\n            // Registry auth\n            if (data.registries && data.registries.length > 0) {\n                var regWrap = document.createElement(\"div\");\n                regWrap.className = \"about-channels\";\n                for (var i = 0; i < data.registries.length; i++) {\n                    var regBadge = document.createElement(\"span\");\n                    regBadge.className = \"about-channel-badge\";\n                    regBadge.textContent = data.registries[i];\n                    regWrap.appendChild(regBadge);\n                }\n                appendAboutRowEl(rows, \"Registry Auth\", regWrap);\n            } else {\n                appendAboutRow(rows, \"Registry Auth\", \"None configured\");\n            }\n\n            // Beta banner\n            var banner = document.createElement(\"div\");\n            banner.className = \"about-banner\";\n            var bannerIcon = document.createElement(\"span\");\n            bannerIcon.className = \"about-banner-icon\";\n            bannerIcon.textContent = \"\\u24D8\";\n            banner.appendChild(bannerIcon);\n            var bannerText = document.createElement(\"span\");\n            bannerText.textContent = \"This is BETA software. Features may be broken and/or unstable. Please report any issues on \";\n            var bannerLink = document.createElement(\"a\");\n            bannerLink.href = \"https://github.com/Will-Luck/Docker-Sentinel/issues\";\n            bannerLink.target = \"_blank\";\n            bannerLink.rel = \"noopener\";\n            bannerLink.textContent = \"GitHub\";\n            bannerText.appendChild(bannerLink);\n            bannerText.appendChild(document.createTextNode(\"!\"));\n            banner.appendChild(bannerText);\n\n            // Links section\n            appendAboutSection(rows, \"Links\");\n            var linksWrap = document.createElement(\"div\");\n            linksWrap.className = \"about-links\";\n            var links = [\n                { icon: \"\\uD83D\\uDCC1\", label: \"GitHub\", url: \"https://github.com/Will-Luck/Docker-Sentinel\" },\n                { icon: \"\\uD83D\\uDC1B\", label: \"Report a Bug\", url: \"https://github.com/Will-Luck/Docker-Sentinel/issues/new?template=bug_report.md\" },\n                { icon: \"\\uD83D\\uDCA1\", label: \"Feature Request\", url: \"https://github.com/Will-Luck/Docker-Sentinel/issues/new?template=feature_request.md\" },\n                { icon: \"\\uD83D\\uDCC4\", label: \"Releases\", url: \"https://github.com/Will-Luck/Docker-Sentinel/releases\" }\n            ];\n            for (var li = 0; li < links.length; li++) {\n                var a = document.createElement(\"a\");\n                a.className = \"about-link\";\n                a.href = links[li].url;\n                a.target = \"_blank\";\n                a.rel = \"noopener\";\n                var ico = document.createElement(\"span\");\n                ico.className = \"about-link-icon\";\n                ico.textContent = links[li].icon;\n                a.appendChild(ico);\n                a.appendChild(document.createTextNode(links[li].label));\n                linksWrap.appendChild(a);\n            }\n            var linksRow = document.createElement(\"div\");\n            linksRow.className = \"setting-row\";\n            linksRow.appendChild(linksWrap);\n            rows.appendChild(linksRow);\n\n            container.textContent = \"\";\n            container.appendChild(banner);\n            container.appendChild(rows);\n        })\n        .catch(function() {\n            container.textContent = \"Failed to load info\";\n        });\n}\n\nfunction appendAboutSection(parent, title) {\n    var div = document.createElement(\"div\");\n    div.className = \"about-section-title\";\n    div.textContent = title;\n    parent.appendChild(div);\n}\n\nfunction appendAboutRow(parent, label, value) {\n    var row = document.createElement(\"div\");\n    row.className = \"setting-row\";\n    var info = document.createElement(\"div\");\n    info.className = \"setting-info\";\n    var lbl = document.createElement(\"div\");\n    lbl.className = \"setting-label\";\n    lbl.textContent = label;\n    info.appendChild(lbl);\n    row.appendChild(info);\n    var val = document.createElement(\"div\");\n    val.className = \"about-value\";\n    val.textContent = value;\n    row.appendChild(val);\n    parent.appendChild(row);\n}\n\nfunction appendAboutRowEl(parent, label, valueEl) {\n    var row = document.createElement(\"div\");\n    row.className = \"setting-row\";\n    var info = document.createElement(\"div\");\n    info.className = \"setting-info\";\n    var lbl = document.createElement(\"div\");\n    lbl.className = \"setting-label\";\n    lbl.textContent = label;\n    info.appendChild(lbl);\n    row.appendChild(info);\n    row.appendChild(valueEl);\n    parent.appendChild(row);\n}\n\nfunction formatAboutTime(iso) {\n    try {\n        var d = new Date(iso);\n        return d.toLocaleDateString(undefined, { year: \"numeric\", month: \"short\", day: \"numeric\" }) +\n            \" \" + d.toLocaleTimeString(undefined, { hour: \"2-digit\", minute: \"2-digit\" });\n    } catch(e) {\n        return iso;\n    }\n}\n\nfunction formatAboutTimeAgo(iso) {\n    try {\n        var d = new Date(iso);\n        var now = new Date();\n        var diff = now - d;\n        var mins = Math.floor(diff / 60000);\n        if (mins < 1) return \"Just now\";\n        if (mins < 60) return mins + \"m ago\";\n        var hours = Math.floor(mins / 60);\n        if (hours < 24) return hours + \"h \" + (mins % 60) + \"m ago\";\n        var days = Math.floor(hours / 24);\n        return days + \"d \" + (hours % 24) + \"h ago\";\n    } catch(e) {\n        return iso;\n    }\n}\n\n// ---------------------------------------------------------------------------\n// Release note sources\n// ---------------------------------------------------------------------------\n\nvar releaseSources = [];\n\nfunction loadReleaseSources() {\n    var container = document.getElementById(\"release-sources-list\");\n    if (!container) return;\n    fetch(\"/api/release-sources\")\n        .then(function(r) { return r.json(); })\n        .then(function(data) {\n            releaseSources = Array.isArray(data) ? data : [];\n            renderReleaseSources();\n        })\n        .catch(function() {});\n}\n\nfunction renderReleaseSources() {\n    var container = document.getElementById(\"release-sources-list\");\n    if (!container) return;\n    container.textContent = \"\";\n\n    if (releaseSources.length === 0) {\n        var empty = document.createElement(\"div\");\n        empty.className = \"empty-state\";\n        empty.style.padding = \"var(--sp-6) var(--sp-4)\";\n        var h3 = document.createElement(\"h3\");\n        h3.textContent = \"No custom sources configured\";\n        var p = document.createElement(\"p\");\n        p.textContent = \"Add mappings to fetch release notes for images not covered by built-in rules.\";\n        empty.appendChild(h3);\n        empty.appendChild(p);\n        container.appendChild(empty);\n        return;\n    }\n\n    releaseSources.forEach(function(src, index) {\n        var card = document.createElement(\"div\");\n        card.className = \"channel-card\";\n\n        var header = document.createElement(\"div\");\n        header.className = \"channel-card-header\";\n        var badge = document.createElement(\"span\");\n        badge.className = \"channel-type-badge\";\n        badge.textContent = src.image_pattern || \"source\";\n        header.appendChild(badge);\n\n        var actions = document.createElement(\"div\");\n        actions.className = \"channel-actions\";\n        var delBtn = document.createElement(\"button\");\n        delBtn.className = \"btn btn-sm btn-error\";\n        delBtn.textContent = \"Remove\";\n        (function(i) {\n            delBtn.addEventListener(\"click\", function() { deleteReleaseSource(i); });\n        })(index);\n        actions.appendChild(delBtn);\n        header.appendChild(actions);\n        card.appendChild(header);\n\n        var fields = document.createElement(\"div\");\n        fields.className = \"channel-fields\";\n        [\n            { label: \"Image Pattern\", field: \"image_pattern\", value: src.image_pattern },\n            { label: \"GitHub Repo\", field: \"github_repo\", value: src.github_repo }\n        ].forEach(function(def) {\n            var row = document.createElement(\"div\");\n            row.className = \"channel-field\";\n            var lbl = document.createElement(\"span\");\n            lbl.className = \"channel-field-label\";\n            lbl.textContent = def.label;\n            row.appendChild(lbl);\n            var inp = document.createElement(\"input\");\n            inp.type = \"text\";\n            inp.className = \"channel-field-input\";\n            inp.value = def.value || \"\";\n            inp.setAttribute(\"data-index\", index);\n            inp.setAttribute(\"data-field\", def.field);\n            row.appendChild(inp);\n            fields.appendChild(row);\n        });\n        card.appendChild(fields);\n        container.appendChild(card);\n    });\n}\n\nfunction addReleaseSource() {\n    releaseSources.push({ image_pattern: \"\", github_repo: \"\" });\n    renderReleaseSources();\n}\n\nfunction deleteReleaseSource(index) {\n    releaseSources.splice(index, 1);\n    renderReleaseSources();\n}\n\nfunction collectReleaseSourcesFromDOM() {\n    var inputs = document.querySelectorAll(\"#release-sources-list input[data-field]\");\n    var map = {};\n    inputs.forEach(function(inp) {\n        var i = inp.getAttribute(\"data-index\");\n        var f = inp.getAttribute(\"data-field\");\n        if (!map[i]) map[i] = {};\n        map[i][f] = inp.value.trim();\n    });\n    return Object.keys(map).sort(function(a,b){return a-b;}).map(function(k){ return map[k]; });\n}\n\nfunction saveReleaseSources(event) {\n    if (event) event.preventDefault();\n    var sources = collectReleaseSourcesFromDOM();\n    fetch(\"/api/release-sources\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\", \"X-CSRF-Token\": getCSRFToken() },\n        body: JSON.stringify(sources)\n    }).then(function(r) {\n        if (r.ok) {\n            releaseSources = sources;\n            showToast(\"Release sources saved\", \"success\");\n        } else {\n            r.json().then(function(d) { showToast(\"Save failed: \" + (d.error || r.status), \"error\"); });\n        }\n    }).catch(function() { showToast(\"Save failed\", \"error\"); });\n}\n\n\nexport {\n    loadFooterVersion,\n    loadAboutInfo,\n    loadReleaseSources,\n    addReleaseSource,\n    saveReleaseSources\n};\n", "/* ============================================================\n   Docker-Sentinel \u2014 Images management page\n   ============================================================ */\n\n// Module state: cached image data and current filter/sort.\nvar _allImages = [];\nvar _currentFilter = 'all'; // all | in-use | unused\nvar _currentSort = 'default'; // default (in-use first, then newest) | alpha\nvar _manageMode = false;\nvar _selectedIds = new Set();\n\nexport async function loadImages() {\n    try {\n        var resp = await fetch('/api/images');\n        if (!resp.ok) throw new Error('HTTP ' + resp.status);\n        var data = await resp.json();\n        _allImages = data.images || [];\n        renderImagesTable();\n    } catch (err) {\n        console.error('Failed to load images:', err);\n    }\n}\n\n// ---- Filtering and sorting ----\n\nexport function filterImages(filter) {\n    _currentFilter = filter;\n    // Update active pill.\n    var pills = document.querySelectorAll('.images-filter-pill');\n    for (var i = 0; i < pills.length; i++) {\n        pills[i].classList.toggle('active', pills[i].getAttribute('data-filter') === filter);\n    }\n    renderImagesTable();\n}\n\nexport function sortImages(sort) {\n    _currentSort = sort;\n    var pills = document.querySelectorAll('.images-sort-pill');\n    for (var i = 0; i < pills.length; i++) {\n        pills[i].classList.toggle('active', pills[i].getAttribute('data-sort') === sort);\n    }\n    renderImagesTable();\n}\n\nfunction getFilteredAndSorted() {\n    // Filter.\n    var filtered = _allImages;\n    if (_currentFilter === 'in-use') {\n        filtered = _allImages.filter(function(img) { return img.in_use; });\n    } else if (_currentFilter === 'unused') {\n        filtered = _allImages.filter(function(img) { return !img.in_use; });\n    }\n\n    // Sort.\n    filtered = filtered.slice(); // copy before sorting\n    if (_currentSort === 'alpha') {\n        filtered.sort(function(a, b) {\n            var tagA = (a.repo_tags && a.repo_tags.length > 0) ? a.repo_tags[0].toLowerCase() : 'zzz';\n            var tagB = (b.repo_tags && b.repo_tags.length > 0) ? b.repo_tags[0].toLowerCase() : 'zzz';\n            return tagA < tagB ? -1 : tagA > tagB ? 1 : 0;\n        });\n    } else {\n        // Default: in-use first, then newest.\n        filtered.sort(function(a, b) {\n            if (a.in_use !== b.in_use) return a.in_use ? -1 : 1;\n            return b.created - a.created;\n        });\n    }\n    return filtered;\n}\n\n// ---- Manage mode (multi-select) ----\n\nexport function toggleManageMode() {\n    _manageMode = !_manageMode;\n    _selectedIds.clear();\n    var btn = document.getElementById('manage-btn');\n    if (btn) btn.textContent = _manageMode ? 'Cancel' : 'Manage';\n    updateBulkBar();\n    renderImagesTable();\n}\n\nfunction updateBulkBar() {\n    var bar = document.getElementById('images-bulk-bar');\n    if (!bar) return;\n    if (_manageMode && _selectedIds.size > 0) {\n        bar.style.display = 'flex';\n        var countEl = bar.querySelector('.bulk-count');\n        if (countEl) countEl.textContent = _selectedIds.size + ' selected';\n    } else {\n        bar.style.display = 'none';\n    }\n}\n\nexport function toggleImageSelect(id) {\n    if (_selectedIds.has(id)) {\n        _selectedIds.delete(id);\n    } else {\n        _selectedIds.add(id);\n    }\n    // Update checkbox state without full re-render.\n    var cb = document.querySelector('input[data-image-id=\"' + CSS.escape(id) + '\"]');\n    if (cb) cb.checked = _selectedIds.has(id);\n\n    // Update select-all checkbox.\n    var selectAll = document.getElementById('images-select-all');\n    if (selectAll) {\n        var visible = getFilteredAndSorted().filter(function(img) { return !img.in_use; });\n        selectAll.checked = visible.length > 0 && visible.every(function(img) { return _selectedIds.has(img.id); });\n    }\n    updateBulkBar();\n}\n\nexport function toggleSelectAll() {\n    var visible = getFilteredAndSorted().filter(function(img) { return !img.in_use; });\n    var allSelected = visible.length > 0 && visible.every(function(img) { return _selectedIds.has(img.id); });\n    if (allSelected) {\n        visible.forEach(function(img) { _selectedIds.delete(img.id); });\n    } else {\n        visible.forEach(function(img) { _selectedIds.add(img.id); });\n    }\n    renderImagesTable();\n    updateBulkBar();\n}\n\nexport async function removeSelectedImages() {\n    var count = _selectedIds.size;\n    if (count === 0) return;\n    if (!confirm('Remove ' + count + ' selected image' + (count > 1 ? 's' : '') + '? This cannot be undone.')) return;\n\n    var ids = Array.from(_selectedIds);\n    var removed = 0;\n    var failed = 0;\n    for (var i = 0; i < ids.length; i++) {\n        try {\n            var resp = await fetch('/api/images/' + encodeURIComponent(ids[i]), { method: 'DELETE' });\n            if (resp.ok) { removed++; } else { failed++; }\n        } catch (_) { failed++; }\n    }\n\n    if (window.showToast) {\n        if (failed > 0) {\n            window.showToast('Removed ' + removed + ', failed ' + failed, 'warning');\n        } else {\n            window.showToast('Removed ' + removed + ' image' + (removed > 1 ? 's' : ''));\n        }\n    }\n    _selectedIds.clear();\n    _manageMode = false;\n    var btn = document.getElementById('manage-btn');\n    if (btn) btn.textContent = 'Manage';\n    updateBulkBar();\n    loadImages();\n}\n\n// ---- Rendering ----\n\nfunction renderImagesTable() {\n    var tbody = document.getElementById('images-tbody');\n    if (!tbody) return;\n\n    while (tbody.firstChild) tbody.removeChild(tbody.firstChild);\n\n    var images = getFilteredAndSorted();\n\n    if (images.length === 0) {\n        var emptyRow = document.createElement('tr');\n        var emptyCell = document.createElement('td');\n        emptyCell.colSpan = _manageMode ? 7 : 6;\n        emptyCell.style.textAlign = 'center';\n        emptyCell.style.padding = '2rem';\n        emptyCell.style.color = 'var(--text-secondary)';\n        emptyCell.textContent = _currentFilter !== 'all' ? 'No ' + _currentFilter + ' images' : 'No images found';\n        emptyRow.appendChild(emptyCell);\n        tbody.appendChild(emptyRow);\n        return;\n    }\n\n    // Update summary from full list (not filtered).\n    var totalSize = _allImages.reduce(function(sum, img) { return sum + img.size; }, 0);\n    var inUse = _allImages.filter(function(img) { return img.in_use; }).length;\n    var summaryEl = document.getElementById('images-summary');\n    if (summaryEl) {\n        summaryEl.textContent = _allImages.length + ' images (' + inUse + ' in use), ' + formatBytes(totalSize) + ' total';\n    }\n\n    // Update header row to show/hide checkbox column.\n    var thead = tbody.closest('table').querySelector('thead tr');\n    var existingTh = thead ? thead.querySelector('.th-select') : null;\n    if (_manageMode && !existingTh && thead) {\n        var th = document.createElement('th');\n        th.className = 'th-select';\n        th.style.width = '40px';\n        var selectAll = document.createElement('input');\n        selectAll.type = 'checkbox';\n        selectAll.id = 'images-select-all';\n        selectAll.title = 'Select all unused';\n        selectAll.addEventListener('change', function() { toggleSelectAll(); });\n        th.appendChild(selectAll);\n        thead.insertBefore(th, thead.firstChild);\n    } else if (!_manageMode && existingTh) {\n        existingTh.remove();\n    }\n\n    for (var i = 0; i < images.length; i++) {\n        var img = images[i];\n        var row = document.createElement('tr');\n\n        // Checkbox cell (manage mode only).\n        if (_manageMode) {\n            var checkCell = document.createElement('td');\n            checkCell.className = 'td-checkbox';\n            if (!img.in_use) {\n                var cb = document.createElement('input');\n                cb.type = 'checkbox';\n                cb.checked = _selectedIds.has(img.id);\n                cb.setAttribute('data-image-id', img.id);\n                cb.addEventListener('change', (function(id) {\n                    return function() { toggleImageSelect(id); };\n                })(img.id));\n                checkCell.appendChild(cb);\n            }\n            row.appendChild(checkCell);\n        }\n\n        // Tags cell \u2014 each tag on its own line to prevent overlap.\n        var tagsCell = document.createElement('td');\n        tagsCell.className = 'cell-image-tags';\n        if (img.repo_tags && img.repo_tags.length > 0) {\n            for (var t = 0; t < img.repo_tags.length; t++) {\n                var tagSpan = document.createElement('code');\n                tagSpan.className = 'image-tag';\n                tagSpan.textContent = img.repo_tags[t];\n                tagSpan.title = img.repo_tags[t];\n                tagsCell.appendChild(tagSpan);\n                if (t < img.repo_tags.length - 1) {\n                    tagsCell.appendChild(document.createElement('br'));\n                }\n            }\n        } else {\n            var noneSpan = document.createElement('span');\n            noneSpan.className = 'text-muted';\n            noneSpan.textContent = '<none>';\n            tagsCell.appendChild(noneSpan);\n        }\n        row.appendChild(tagsCell);\n\n        // ID cell\n        var idCell = document.createElement('td');\n        idCell.className = 'cell-image-id';\n        var code = document.createElement('code');\n        code.title = img.id;\n        code.textContent = img.id.replace('sha256:', '').substring(0, 12);\n        idCell.appendChild(code);\n        row.appendChild(idCell);\n\n        // Size cell\n        var sizeCell = document.createElement('td');\n        sizeCell.className = 'cell-image-size';\n        sizeCell.textContent = formatBytes(img.size);\n        row.appendChild(sizeCell);\n\n        // Created cell\n        var createdCell = document.createElement('td');\n        createdCell.title = new Date(img.created * 1000).toISOString();\n        createdCell.textContent = formatRelativeTime(img.created);\n        row.appendChild(createdCell);\n\n        // In Use cell\n        var useCell = document.createElement('td');\n        var badge = document.createElement('span');\n        badge.className = img.in_use ? 'badge badge-success' : 'badge badge-muted';\n        badge.textContent = img.in_use ? 'In Use' : 'Unused';\n        useCell.appendChild(badge);\n        row.appendChild(useCell);\n\n        // Actions cell\n        var actionsCell = document.createElement('td');\n        if (!_manageMode) {\n            var btn = document.createElement('button');\n            btn.className = 'btn btn-sm btn-danger';\n            btn.textContent = 'Remove';\n            if (img.in_use) {\n                btn.disabled = true;\n                btn.title = 'Cannot remove: image is in use by a container';\n            } else {\n                btn.setAttribute('data-image-id', img.id);\n                btn.addEventListener('click', (function(imageId) {\n                    return function() { removeImage(imageId); };\n                })(img.id));\n            }\n            actionsCell.appendChild(btn);\n        }\n        row.appendChild(actionsCell);\n\n        tbody.appendChild(row);\n    }\n}\n\nfunction formatBytes(bytes) {\n    if (bytes === 0) return '0 B';\n    var k = 1024;\n    var sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    var i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n}\n\nfunction formatRelativeTime(unixSeconds) {\n    var now = Date.now() / 1000;\n    var diff = now - unixSeconds;\n    if (diff < 60) return 'just now';\n    if (diff < 3600) return Math.floor(diff / 60) + 'm ago';\n    if (diff < 86400) return Math.floor(diff / 3600) + 'h ago';\n    return Math.floor(diff / 86400) + 'd ago';\n}\n\nexport async function pruneImages() {\n    if (!confirm('Remove all dangling (unused, untagged) images?')) return;\n    try {\n        var resp = await fetch('/api/images/prune', { method: 'POST' });\n        if (!resp.ok) throw new Error('HTTP ' + resp.status);\n        var data = await resp.json();\n        if (window.showToast) {\n            window.showToast('Pruned ' + data.images_deleted + ' images, reclaimed ' + formatBytes(data.space_reclaimed));\n        }\n        loadImages();\n    } catch (err) {\n        if (window.showToast) window.showToast('Prune failed: ' + err.message, 'error');\n    }\n}\n\nexport async function removeImage(id) {\n    if (!confirm('Remove this image? This cannot be undone.')) return;\n    try {\n        var resp = await fetch('/api/images/' + encodeURIComponent(id), { method: 'DELETE' });\n        if (!resp.ok) throw new Error('HTTP ' + resp.status);\n        if (window.showToast) window.showToast('Image removed');\n        loadImages();\n    } catch (err) {\n        if (window.showToast) window.showToast('Remove failed: ' + err.message, 'error');\n    }\n}\n", "/* ============================================================\n   Docker-Sentinel \u2014 Activity Logs page (client-side)\n   ============================================================ */\n\nvar _allLogs = [];\nvar _currentType = 'all'; // all | update | policy | auth | settings\n\n// Type groups for filtering.\nvar TYPE_GROUPS = {\n    update:   ['update', 'rollback', 'approve', 'reject', 'ignore', 'check',\n               'self_update', 'update_to_version', 'restart', 'start', 'stop',\n               'scale', 'scan', 'webhook', 'ghcr_switch', 'image_prune', 'image_remove'],\n    policy:   ['policy_set', 'policy_delete', 'bulk_policy', 'notify_pref', 'notify_states_cleared'],\n    auth:     ['auth'],\n    settings: ['settings', 'cluster-settings', 'config-import', 'digest', 'hooks']\n};\n\n// Badge colour per type.\nvar TYPE_BADGE = {\n    policy_set:    'badge-info',\n    policy_delete: 'badge-muted',\n    approve:       'badge-success',\n    reject:        'badge-error',\n    update:        'badge-success',\n    rollback:      'badge-warning',\n    start:         'badge-success',\n    stop:          'badge-error',\n    restart:       'badge-warning',\n    auth:          'badge-info',\n    settings:      'badge-muted',\n    scan:          'badge-info',\n    check:         'badge-info'\n};\n\nexport async function loadActivityLogs() {\n    try {\n        var resp = await fetch('/api/logs');\n        if (!resp.ok) throw new Error('HTTP ' + resp.status);\n        _allLogs = await resp.json();\n        if (!Array.isArray(_allLogs)) _allLogs = [];\n        renderLogs();\n    } catch (err) {\n        console.error('Failed to load logs:', err);\n    }\n}\n\nexport function filterLogs(type) {\n    _currentType = type;\n    var pills = document.querySelectorAll('.logs-type-pill');\n    for (var i = 0; i < pills.length; i++) {\n        pills[i].classList.toggle('active', pills[i].getAttribute('data-type') === type);\n    }\n    renderLogs();\n}\n\nfunction getFiltered() {\n    if (_currentType === 'all') return _allLogs;\n    var types = TYPE_GROUPS[_currentType] || [];\n    return _allLogs.filter(function(log) {\n        return types.indexOf(log.type) >= 0;\n    });\n}\n\nfunction renderLogs() {\n    var tbody = document.getElementById('logs-tbody');\n    if (!tbody) return;\n    while (tbody.firstChild) tbody.removeChild(tbody.firstChild);\n\n    var logs = getFiltered();\n\n    // Update summary.\n    var summary = document.getElementById('logs-summary');\n    if (summary) {\n        var text = _allLogs.length + ' total entries';\n        if (_currentType !== 'all') text += ' (' + logs.length + ' shown)';\n        summary.textContent = text;\n    }\n\n    if (logs.length === 0) {\n        var tr = document.createElement('tr');\n        var td = document.createElement('td');\n        td.colSpan = 5;\n        td.style.textAlign = 'center';\n        td.style.padding = '2rem';\n        td.style.color = 'var(--text-secondary)';\n        td.textContent = _currentType !== 'all' ? 'No ' + _currentType + ' entries' : 'No activity logged yet.';\n        tr.appendChild(td);\n        tbody.appendChild(tr);\n        return;\n    }\n\n    for (var i = 0; i < logs.length; i++) {\n        var log = logs[i];\n        var row = document.createElement('tr');\n\n        // Time\n        var timeCell = document.createElement('td');\n        var ts = new Date(log.timestamp);\n        timeCell.title = ts.toISOString();\n        timeCell.textContent = formatTimeAgo(ts);\n        row.appendChild(timeCell);\n\n        // User\n        var userCell = document.createElement('td');\n        if (log.user) {\n            userCell.textContent = log.user;\n        } else {\n            var sys = document.createElement('span');\n            sys.className = 'text-muted';\n            sys.textContent = 'system';\n            userCell.appendChild(sys);\n        }\n        row.appendChild(userCell);\n\n        // Type badge\n        var typeCell = document.createElement('td');\n        var badge = document.createElement('span');\n        badge.className = 'badge ' + (TYPE_BADGE[log.type] || 'badge-muted');\n        badge.textContent = log.type;\n        typeCell.appendChild(badge);\n        row.appendChild(typeCell);\n\n        // Container\n        var containerCell = document.createElement('td');\n        containerCell.className = 'mono';\n        if (log.container) {\n            var link = document.createElement('a');\n            link.href = (log.kind === 'service' ? '/service/' : '/container/') + encodeURIComponent(log.container);\n            link.textContent = log.container;\n            containerCell.appendChild(link);\n        } else {\n            containerCell.textContent = '-';\n        }\n        row.appendChild(containerCell);\n\n        // Message\n        var msgCell = document.createElement('td');\n        msgCell.title = log.message;\n        msgCell.textContent = log.message;\n        row.appendChild(msgCell);\n\n        tbody.appendChild(row);\n    }\n}\n\nexport function exportLogs(format) {\n    var logs = getFiltered();\n    if (logs.length === 0) {\n        if (window.showToast) window.showToast('No logs to export', 'warning');\n        return;\n    }\n\n    var content, filename, mime;\n    if (format === 'json') {\n        content = JSON.stringify(logs, null, 2);\n        filename = 'sentinel-logs.json';\n        mime = 'application/json';\n    } else {\n        var rows = ['Time,User,Type,Container,Message'];\n        for (var i = 0; i < logs.length; i++) {\n            var l = logs[i];\n            rows.push([\n                new Date(l.timestamp).toISOString(),\n                csvEscape(l.user || 'system'),\n                csvEscape(l.type),\n                csvEscape(l.container || ''),\n                csvEscape(l.message)\n            ].join(','));\n        }\n        content = rows.join('\\n');\n        filename = 'sentinel-logs.csv';\n        mime = 'text/csv';\n    }\n\n    var blob = new Blob([content], { type: mime });\n    var url = URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    a.click();\n    URL.revokeObjectURL(url);\n}\n\nfunction csvEscape(str) {\n    if (!str) return '';\n    if (str.indexOf(',') >= 0 || str.indexOf('\"') >= 0 || str.indexOf('\\n') >= 0) {\n        return '\"' + str.replace(/\"/g, '\"\"') + '\"';\n    }\n    return str;\n}\n\nfunction formatTimeAgo(date) {\n    var diff = (Date.now() - date.getTime()) / 1000;\n    if (diff < 60) return 'just now';\n    if (diff < 3600) return Math.floor(diff / 60) + 'm ago';\n    if (diff < 86400) return Math.floor(diff / 3600) + 'h ago';\n    if (diff < 604800) return Math.floor(diff / 86400) + 'd ago';\n    return date.toLocaleDateString();\n}\n", "/* ============================================================\n   Docker-Sentinel Dashboard v3 - Client-side JavaScript\n   ES module entry point (bundled by esbuild --format=iife)\n   ============================================================ */\n\n// Side-effect import: patches window.fetch with CSRF token injection.\nimport { getCSRFToken } from \"./csrf.js\";\n\nimport {\n    showToast,\n    escapeHTML,\n    showConfirm,\n    apiPost\n} from \"./utils.js\";\n\nimport {\n    initTheme,\n    applyTheme,\n    initAccordionPersistence,\n    initPauseBanner,\n    resumeScanning,\n    checkPauseState,\n    refreshLastScan,\n    onRowClick,\n    toggleStack,\n    toggleSwarmSection,\n    toggleHostGroup,\n    expandAllStacks,\n    collapseAllStacks,\n    selectedContainers,\n    manageMode,\n    updateSelectionUI,\n    clearSelection,\n    recomputeSelectionState,\n    initFilters,\n    activateFilter,\n    applyFiltersAndSort,\n    initDashboardTabs,\n    recalcTabStats,\n    setUpdateStatsFn,\n    toggleManageMode,\n    fetchContainerLogs\n} from \"./dashboard.js\";\n\nimport {\n    toggleQueueAccordion,\n    approveUpdate,\n    ignoreUpdate,\n    rejectUpdate,\n    getBulkInProgress,\n    approveAll,\n    ignoreAll,\n    rejectAll,\n    triggerUpdate,\n    triggerCheck,\n    triggerRollback,\n    changePolicy,\n    triggerScan,\n    triggerSelfUpdate,\n    switchToGHCR,\n    loadAllTags,\n    updateToVersion,\n    applyBulkPolicy\n} from \"./queue.js\";\n\nimport {\n    toggleSvc,\n    triggerSvcUpdate,\n    changeSvcPolicy,\n    rollbackSvc,\n    scaleSvc,\n    refreshServiceRow\n} from \"./swarm.js\";\n\nimport {\n    initSSE,\n    updateContainerRow,\n    updateStats,\n    updatePendingColor,\n    showBadgeSpinner,\n    reapplyBadgeSpinners,\n    clearPendingBadge,\n    pendingBadgeActions,\n    loadGHCRAlternatives,\n    applyRegistryBadges,\n    loadDigestBanner,\n    scheduleDigestBannerRefresh,\n    updateQueueBadge,\n    dismissDigestBanner,\n    renderGHCRAlternatives,\n    refreshDashboardStats\n} from \"./sse.js\";\n\nimport {\n    initSettingsPage,\n    onPollIntervalChange,\n    onCustomUnitChange,\n    applyCustomPollInterval,\n    setDefaultPolicy,\n    setRollbackPolicy,\n    onGracePeriodChange,\n    applyCustomGracePeriod,\n    setLatestAutoUpdate,\n    setPauseState,\n    saveFilters,\n    setImageCleanup,\n    saveCronSchedule,\n    setDependencyAware,\n    setHooksEnabled,\n    setHooksWriteLabels,\n    setDryRun,\n    setPullOnly,\n    setUpdateDelay,\n    setComposeSync,\n    setImageBackup,\n    setShowStopped,\n    setRemoveVolumes,\n    setScanConcurrency,\n    setHADiscovery,\n    saveHADiscoveryPrefix,\n    updateToggleText,\n    toggleCollapsible,\n    saveDockerTLS,\n    testDockerTLS,\n    setWebhookEnabled,\n    regenerateWebhookSecret,\n    copyWebhookURL,\n    copyWebhookSecret,\n    saveMaintenanceWindow,\n    exportConfig,\n    importConfig\n} from \"./settings-core.js\";\n\nimport {\n    loadClusterSettings,\n    onClusterToggle,\n    saveClusterSettings\n} from \"./settings-cluster.js\";\n\nimport {\n    loadNotificationChannels,\n    addChannel,\n    saveNotificationChannels,\n    testNotification,\n    onNotifyModeChange,\n    loadDigestSettings,\n    saveDigestSettings,\n    triggerDigest,\n    loadContainerNotifyPrefs,\n    setContainerNotifyPref,\n    loadNotifyTemplates,\n    loadTemplateForEvent,\n    saveNotifyTemplate,\n    deleteNotifyTemplate,\n    previewNotifyTemplate\n} from \"./notifications.js\";\n\nimport {\n    loadRegistries,\n    addRegistryCredential,\n    saveRegistryCredentials,\n    updateRateLimitStatus\n} from \"./registries.js\";\n\nimport {\n    loadFooterVersion,\n    loadAboutInfo,\n    loadReleaseSources,\n    addReleaseSource,\n    saveReleaseSources\n} from \"./about.js\";\n\nimport {\n    loadImages,\n    pruneImages,\n    removeImage,\n    filterImages,\n    sortImages,\n    toggleManageMode as toggleImageManageMode,\n    toggleImageSelect,\n    toggleSelectAll as toggleImageSelectAll,\n    removeSelectedImages\n} from \"./images.js\";\n\nimport {\n    loadActivityLogs,\n    filterLogs,\n    exportLogs\n} from \"./logs.js\";\n\n// Wire updateStats into dashboard module (avoids circular import).\nsetUpdateStatsFn(updateStats);\n\n// Expose dashboard state for cross-module access via window.\n// Queue and SSE modules read these to avoid circular imports.\nwindow._dashboardSelectedContainers = selectedContainers;\nwindow._dashboardManageMode = false;\n\n// Expose getBulkInProgress for SSE module.\nwindow._queueBulkInProgress = getBulkInProgress;\n\n/* ------------------------------------------------------------\n   Window exports - functions called from HTML onclick/onchange\n   ------------------------------------------------------------ */\n\n// Utils (used by inline scripts)\nwindow.showToast = showToast;\nwindow.csrfToken = getCSRFToken;\nwindow.escapeHTML = escapeHTML;\nwindow.showConfirm = showConfirm;\nwindow.apiPost = apiPost;\n\n// Dashboard\nwindow.activateFilter = activateFilter;\nwindow.resumeScanning = resumeScanning;\nwindow.expandAllStacks = expandAllStacks;\nwindow.collapseAllStacks = collapseAllStacks;\nwindow.toggleManageMode = function() {\n    toggleManageMode();\n    window._dashboardManageMode = manageMode;\n};\nwindow.triggerScan = triggerScan;\nwindow.toggleHostGroup = toggleHostGroup;\nwindow.toggleStack = toggleStack;\nwindow.toggleSwarmSection = toggleSwarmSection;\nwindow.onRowClick = onRowClick;\nwindow.applyBulkPolicy = applyBulkPolicy;\nwindow.clearSelection = clearSelection;\nwindow.applyTheme = applyTheme;\nwindow.applyFiltersAndSort = applyFiltersAndSort;\nwindow.recalcTabStats = recalcTabStats;\nwindow.recomputeSelectionState = recomputeSelectionState;\nwindow.checkPauseState = checkPauseState;\nwindow.refreshLastScan = refreshLastScan;\nwindow.fetchContainerLogs = fetchContainerLogs;\n\n// Queue\nwindow.toggleQueueAccordion = toggleQueueAccordion;\nwindow.approveUpdate = approveUpdate;\nwindow.ignoreUpdate = ignoreUpdate;\nwindow.rejectUpdate = rejectUpdate;\nwindow.approveAll = approveAll;\nwindow.ignoreAll = ignoreAll;\nwindow.rejectAll = rejectAll;\nwindow.triggerUpdate = triggerUpdate;\nwindow.triggerCheck = triggerCheck;\nwindow.triggerRollback = triggerRollback;\nwindow.changePolicy = changePolicy;\nwindow.triggerSelfUpdate = triggerSelfUpdate;\nwindow.loadAllTags = loadAllTags;\nwindow.updateToVersion = updateToVersion;\nwindow.switchToGHCR = switchToGHCR;\n\n// Swarm\nwindow.toggleSvc = toggleSvc;\nwindow.triggerSvcUpdate = triggerSvcUpdate;\nwindow.changeSvcPolicy = changeSvcPolicy;\nwindow.rollbackSvc = rollbackSvc;\nwindow.scaleSvc = scaleSvc;\nwindow.refreshServiceRow = refreshServiceRow;\n\n// SSE\nwindow.updateContainerRow = updateContainerRow;\nwindow.updateQueueBadge = updateQueueBadge;\nwindow.applyRegistryBadges = applyRegistryBadges;\nwindow.loadGHCRAlternatives = loadGHCRAlternatives;\nwindow.renderGHCRAlternatives = renderGHCRAlternatives;\n\n// Settings core\nwindow.onPollIntervalChange = onPollIntervalChange;\nwindow.onCustomUnitChange = onCustomUnitChange;\nwindow.applyCustomPollInterval = applyCustomPollInterval;\nwindow.setDefaultPolicy = setDefaultPolicy;\nwindow.setRollbackPolicy = setRollbackPolicy;\nwindow.onGracePeriodChange = onGracePeriodChange;\nwindow.applyCustomGracePeriod = applyCustomGracePeriod;\nwindow.setLatestAutoUpdate = setLatestAutoUpdate;\nwindow.setPauseState = setPauseState;\nwindow.saveFilters = saveFilters;\nwindow.setImageCleanup = setImageCleanup;\nwindow.saveCronSchedule = saveCronSchedule;\nwindow.setDependencyAware = setDependencyAware;\nwindow.setHooksEnabled = setHooksEnabled;\nwindow.setHooksWriteLabels = setHooksWriteLabels;\nwindow.setDryRun = setDryRun;\nwindow.setPullOnly = setPullOnly;\nwindow.setUpdateDelay = setUpdateDelay;\nwindow.setComposeSync = setComposeSync;\nwindow.setImageBackup = setImageBackup;\nwindow.setShowStopped = setShowStopped;\nwindow.setRemoveVolumes = setRemoveVolumes;\nwindow.setScanConcurrency = setScanConcurrency;\nwindow.setHADiscovery = setHADiscovery;\nwindow.saveHADiscoveryPrefix = saveHADiscoveryPrefix;\nwindow.updateToggleText = updateToggleText;\nwindow.toggleCollapsible = toggleCollapsible;\nwindow.saveDockerTLS = saveDockerTLS;\nwindow.testDockerTLS = testDockerTLS;\nwindow.setWebhookEnabled = setWebhookEnabled;\nwindow.regenerateWebhookSecret = regenerateWebhookSecret;\nwindow.copyWebhookURL = copyWebhookURL;\nwindow.copyWebhookSecret = copyWebhookSecret;\nwindow.saveMaintenanceWindow = saveMaintenanceWindow;\nwindow.exportConfig = exportConfig;\nwindow.importConfig = importConfig;\n\n// Settings cluster\nwindow.onClusterToggle = onClusterToggle;\nwindow.saveClusterSettings = saveClusterSettings;\nwindow.loadClusterSettings = loadClusterSettings;\n\n// Notifications\nwindow.addChannel = addChannel;\nwindow.saveNotificationChannels = saveNotificationChannels;\nwindow.testNotification = testNotification;\nwindow.onNotifyModeChange = onNotifyModeChange;\nwindow.saveDigestSettings = saveDigestSettings;\nwindow.triggerDigest = triggerDigest;\nwindow.saveNotifyPref = setContainerNotifyPref;\nwindow.loadNotificationChannels = loadNotificationChannels;\nwindow.loadDigestSettings = loadDigestSettings;\nwindow.loadContainerNotifyPrefs = loadContainerNotifyPrefs;\nwindow.loadNotifyTemplates = loadNotifyTemplates;\nwindow.loadTemplateForEvent = loadTemplateForEvent;\nwindow.saveNotifyTemplate = saveNotifyTemplate;\nwindow.deleteNotifyTemplate = deleteNotifyTemplate;\nwindow.previewNotifyTemplate = previewNotifyTemplate;\n\n// Registries\nwindow.addRegistryCredential = addRegistryCredential;\nwindow.saveRegistryCredentials = saveRegistryCredentials;\nwindow.loadRegistries = loadRegistries;\n\n// About\nwindow.addReleaseSource = addReleaseSource;\nwindow.saveReleaseSources = saveReleaseSources;\nwindow.loadAboutInfo = loadAboutInfo;\nwindow.loadReleaseSources = loadReleaseSources;\n\n// Images\nwindow.loadImages = loadImages;\nwindow.pruneImages = pruneImages;\nwindow.removeImage = removeImage;\nwindow.filterImages = filterImages;\nwindow.sortImages = sortImages;\nwindow.toggleImageManageMode = toggleImageManageMode;\nwindow.toggleImageSelect = toggleImageSelect;\nwindow.toggleImageSelectAll = toggleImageSelectAll;\nwindow.removeSelectedImages = removeSelectedImages;\n\n// Activity Logs\nwindow.loadActivityLogs = loadActivityLogs;\nwindow.filterLogs = filterLogs;\nwindow.exportLogs = exportLogs;\n\n/* ------------------------------------------------------------\n   12. Initialisation\n   ------------------------------------------------------------ */\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    initTheme();\n    // Only init SSE on authenticated pages (skip login/setup).\n    var path = window.location.pathname;\n    if (path !== \"/login\" && path !== \"/setup\") {\n        initSSE();\n    }\n    initPauseBanner();\n    loadFooterVersion();\n    loadDigestBanner();\n    initFilters();\n    initDashboardTabs();\n    refreshLastScan();\n\n    // Apply stack default preference.\n    var stackPref = localStorage.getItem(\"sentinel-stacks\") || \"collapsed\";\n    if (stackPref === \"expanded\") {\n        expandAllStacks();\n    }\n\n    initSettingsPage();\n    initAccordionPersistence();\n\n    // Color the pending stat card based on initial value.\n    var stats = document.getElementById(\"stats\");\n    if (stats) {\n        var pendingEl = stats.querySelectorAll(\".stat-value\")[2];\n        if (pendingEl) {\n            var val = parseInt(pendingEl.textContent.trim(), 10);\n            updatePendingColor(val);\n        }\n    }\n\n    // Keyboard support for stack headers.\n    var stackHeaders = document.querySelectorAll(\".stack-header\");\n    for (var sh = 0; sh < stackHeaders.length; sh++) {\n        stackHeaders[sh].setAttribute(\"tabindex\", \"0\");\n        stackHeaders[sh].setAttribute(\"role\", \"button\");\n        stackHeaders[sh].setAttribute(\"aria-expanded\", \"false\");\n        stackHeaders[sh].addEventListener(\"keydown\", function(e) {\n            if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                toggleStack(this);\n            }\n        });\n    }\n\n    // Keyboard support for policy help tooltips.\n    var policyHelps = document.querySelectorAll(\".policy-help\");\n    for (var ph = 0; ph < policyHelps.length; ph++) {\n        policyHelps[ph].setAttribute(\"role\", \"button\");\n        policyHelps[ph].setAttribute(\"aria-label\", \"Policy information\");\n        policyHelps[ph].addEventListener(\"keydown\", function(e) {\n            if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                var tooltip = this.querySelector(\".policy-tooltip\");\n                if (tooltip) {\n                    var isVisible = tooltip.style.display === \"block\";\n                    tooltip.style.display = isVisible ? \"\" : \"block\";\n                }\n            }\n        });\n    }\n\n\n    // Escape key closes open tooltips.\n    document.addEventListener(\"keydown\", function(e) {\n        if (e.key === \"Escape\") {\n            var tooltips = document.querySelectorAll(\".policy-tooltip\");\n            for (var t = 0; t < tooltips.length; t++) {\n                tooltips[t].style.display = \"\";\n            }\n        }\n    });\n\n    // Multi-select: checkbox delegation on container table.\n    var table = document.getElementById(\"container-table\");\n    if (table) {\n        table.addEventListener(\"change\", function (e) {\n            var target = e.target;\n\n            // Select-all checkbox\n            if (target.id === \"select-all\") {\n                var checkboxes = table.querySelectorAll(\".row-select\");\n                for (var i = 0; i < checkboxes.length; i++) {\n                    checkboxes[i].checked = target.checked;\n                    selectedContainers[checkboxes[i].value] = target.checked;\n                }\n                recomputeSelectionState();\n                return;\n            }\n\n            // Stack-level select checkbox\n            if (target.classList.contains(\"stack-select\")) {\n                var tbody = target.closest(\"tbody.stack-group\");\n                if (tbody) {\n                    var rows = tbody.querySelectorAll(\".row-select\");\n                    for (var i = 0; i < rows.length; i++) {\n                        rows[i].checked = target.checked;\n                        selectedContainers[rows[i].value] = target.checked;\n                    }\n                }\n                recomputeSelectionState();\n                return;\n            }\n\n            // Individual row checkbox\n            if (target.classList.contains(\"row-select\")) {\n                selectedContainers[target.value] = target.checked;\n                recomputeSelectionState();\n            }\n        });\n\n        // Prevent stack-select checkbox from toggling stack collapse.\n        table.addEventListener(\"click\", function(e) {\n            if (e.target.classList.contains(\"stack-select\")) {\n                e.stopPropagation();\n            }\n        });\n\n        // Apply registry source badges and load GHCR alternatives.\n        applyRegistryBadges();\n        loadGHCRAlternatives();\n    }\n\n    // Stop/Start/Restart badge click delegation (containers only).\n    document.addEventListener(\"click\", function(e) {\n        var badge = e.target.closest(\".status-badge-wrap .badge-hover\");\n        if (!badge) return;\n        e.stopPropagation();\n        var wrap = badge.closest(\".status-badge-wrap\");\n        if (!wrap) return;\n\n        // Container stop/start/restart actions.\n        var name = wrap.getAttribute(\"data-name\");\n        if (!name) return;\n        var action = wrap.getAttribute(\"data-action\") || \"restart\";\n\n        var hostId = wrap.getAttribute(\"data-host-id\");\n\n        // Track pending action so spinner survives DOM updates on other rows.\n        var actionKey = (hostId || \"\") + \"::\" + name;\n        pendingBadgeActions[actionKey] = true;\n\n        showBadgeSpinner(wrap);\n        var endpoint = \"/api/containers/\" + encodeURIComponent(name) + \"/\" + action;\n        if (hostId) endpoint += \"?host=\" + encodeURIComponent(hostId);\n        var label = action.charAt(0).toUpperCase() + action.slice(1);\n        apiPost(\n            endpoint,\n            null,\n            label + \" initiated for \" + name,\n            \"Failed to \" + action + \" \" + name\n        );\n    });\n});\n"],
  "mappings": "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",
  "names": ["selectedContainers", "i", "escapeHtml", "updateStats", "showBadgeSpinner", "e", "toggleManageMode", "img", "updateStats", "toggleManageMode", "showBadgeSpinner"]
}
